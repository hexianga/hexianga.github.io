{"version":3,"file":"index-legacy.c5a5cd23.js","sources":["../../src/algorithm/in-place.ts","../../src/algorithm/storage.ts","../../src/utils/auto-scroll.ts","../../src/utils/calender.ts","../../src/utils/classnames.ts","../../src/utils/dates.ts","../../src/utils/intersection-ratio.ts","../../src/utils/number.ts","../../src/main/context.ts","../../src/components/timeline.tsx","../../src/components/calender.tsx","../../src/components/canvas.tsx","../../src/components/history.tsx","../../assets/icon.tsx","../../src/components/notification.tsx","../../src/components/scroll/index.tsx","../../src/components/simple-table.tsx","../../src/utils/mock.ts","../../src/components/visual-list/dynamic-visual-list.tsx","../../src/components/visual-list/fixed-visual-list.tsx","../../src/example/memory.tsx","../../src/example/react-demo.tsx","../../src/example/pdf/text-layer.ts","../../src/example/pdf/page.tsx","../../src/utils/load-resource.ts","../../src/example/pdf/index.tsx","../../src/example/storage-test.tsx","../../src/example/index.tsx","../../src/components/icon.tsx","../../src/components/selector.tsx","../../src/components/visual-list/index.tsx","../../src/components/gesture.tsx","../../src/example/lodash-date.tsx","../../src/docs/directory.tsx","../../src/docs/index.tsx","../../src/utils/read-text.ts","../../src/main/index.tsx","../../vite/preload-helper","../../src/app.tsx","../../src/hooks/use-performance.ts"],"sourcesContent":["/**\n * 原地算法：in-place algorithm 不需要借助额外的数据结构就能对输入的数据进行变换的算法\n * wiki: https://en.wikipedia.org/wiki/In-place_algorithm\n * 典型例子：将一个数组中的所有元素反转\n *\n * 冒泡，选择，插入排序都是原地排序。\n */\n\nexport function revert(arr: number[]) {\n  // 时间复杂度 O(n) 空间复杂度 O(0)\n  for (let i = 0; i < Math.floor(arr.length / 2); i++) {\n    const temp = arr[i];\n    arr[i] = arr[arr.length - 1 - i];\n    arr[arr.length - i - 1] = temp;\n  }\n\n  return arr;\n}\n\nexport function arraySwap<T>(arr: T[], from: number, to: number) {\n  const temp = arr[from];\n  arr[from] = arr[to];\n  arr[to] = temp;\n  return arr;\n}\n\nexport function arrayMove<T>(array: T[], from: number, to: number) {\n  const newArray = array.slice();\n  // 第一个参数已经计算好了位置，第三个参数计算要插入的数据，此时虽然改变了数组，但是不影响第一个参数。\n  newArray.splice(to < 0 ? newArray.length + to : to, 0, newArray.splice(from, 1)[0]);\n  return newArray;\n}\n\n/**\n * 对有序数组排序，时间复杂度 O(n), 空间复杂度O(1)\n * 重点是知道 简单的用 index 变量就能表示一个新数组了\n * @param array\n */\n\nexport function removeRepeat<T>(array: T[]): number {\n  // 边界判断\n  if (array.length === 0) return 0;\n\n  let index = 0;\n  for (let i = 0; i < array.length; i++) {\n    if (array[index] !== array[i]) {\n      index++;\n      array[index] = array[i];\n    }\n  }\n\n  // const newArray = array.slice(0, index + 1)\n  return index + 1;\n}\n\nwindow.fn = {\n  ...(window.fn ?? {}),\n  arrayMove,\n  arraySwap,\n  revert,\n  removeRepeat,\n};\n","// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport type NormalType = string | number | boolean | null | undefined | Record<string, any>;\n\ninterface SaveData {\n  data: NormalType;\n  expires: number;\n}\n\n/**\n * 1. 保证使用 localStorage 存储数据可以存进去，不会因为之前存储的数据太多导致无法存入。【前提：当前存储的数据不超过浏览器存储上限，超出则会报错】\n * 2. 保证超过过期时间的数据会被清除\n * 3. 保证每次清除的是不常用的 key\n */\n\nconst DEFAULT_LIVE_TIME = 7 * 24 * 60 * 60 * 1000; // 存储数据默认存活时间 7 天\nconst CHECK_INTERVAL_TIME = 10 * 60 * 1000; // 10 分钟检测一次\n\nexport class CustomStorage {\n  private cache: Set<string>;\n  private remainKeys: Set<string>;\n  private clearLength = 10;\n  private timer: NodeJS.Timeout | undefined;\n  private liveTime = DEFAULT_LIVE_TIME;\n  private checkIntervalTime = CHECK_INTERVAL_TIME;\n\n  constructor(remainKeys: string[] = ['auth']) {\n    this.remainKeys = new Set(remainKeys);\n    this.cache = new Set(Object.keys(localStorage));\n    this.checkCacheValidity();\n  }\n\n  setItem(key: string, value: NormalType | SaveData) {\n    try {\n      if (typeof value === 'object' && value?.expires) {\n        value = JSON.stringify(value);\n      } else {\n        value = JSON.stringify({\n          data: value,\n          expires: Date.now() + this.liveTime,\n        });\n      }\n    } catch (error) {\n      throw new Error('参数错误！');\n    }\n\n    this.save(key, value);\n  }\n\n  getItem(key: string) {\n    let value: NormalType;\n    value = localStorage.getItem(key);\n    this.updateKeyPos(key);\n\n    if (!value) return value;\n\n    try {\n      value = JSON.parse(value);\n    } catch (error) {\n      if (value === 'undefined') {\n        value = undefined;\n      }\n    }\n\n    if (typeof value === 'object' && value !== null) {\n      return value.data;\n    }\n\n    return value;\n  }\n\n  save = (key: string, value: string) => {\n    try {\n      localStorage.setItem(key, value);\n      this.cache.add(key); // 走到这里的时候已经存储成功了\n    } catch (error) {\n      if (!this.isExceedSize()) {\n        this.removeSomeKeys();\n        this.save(key, value);\n      } else {\n        console.groupCollapsed('%c数据太大！超出存储上限！', 'color: red;');\n        console.log(JSON.parse(value));\n        console.groupEnd();\n      }\n    }\n  };\n\n  isExceedSize() {\n    if (this.cache.size > this.remainKeys.size) {\n      return false;\n    } else {\n      for (const key of this.cache) {\n        if (!this.remainKeys.has(key)) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }\n\n  removeSomeKeys() {\n    console.groupCollapsed('%c空间不够删除不常用数据', 'color: green;');\n    let count = 0;\n    for (const key of this.cache) {\n      if (!this.remainKeys.has(key)) {\n        console.log(key);\n        this.remove(key);\n        count++;\n        if (count >= this.clearLength) break;\n      }\n    }\n    console.groupEnd();\n  }\n\n  updateKeyPos(key: string) {\n    this.cache.delete(key);\n    this.cache.add(key);\n  }\n\n  checkCacheValidity = () => {\n    console.groupCollapsed('%c 清除过期数据', 'color: blue;');\n    for (const key of this.cache) {\n      if (this.remainKeys.has(key)) continue;\n\n      const value = localStorage.getItem(key);\n      if (!value) continue;\n\n      try {\n        const data = JSON.parse(value);\n        if (Object.prototype.toString.call(data) !== '[object Object]') continue;\n\n        if (Date.now() > data.expires) {\n          console.log(key);\n          this.remove(key);\n        }\n        // eslint-disable-next-line no-empty\n      } catch (error) {}\n    }\n    console.groupEnd();\n\n    this.timer = setTimeout(this.checkCacheValidity, this.checkIntervalTime);\n  };\n\n  setLiveTime(time: number) {\n    this.liveTime = time;\n  }\n\n  setCheckIntervalTime(time: number) {\n    this.checkIntervalTime = time;\n    if (this.timer) {\n      clearTimeout(this.timer);\n    }\n    this.timer = setTimeout(this.checkCacheValidity, this.checkIntervalTime);\n  }\n\n  resetTime() {\n    this.liveTime = DEFAULT_LIVE_TIME;\n    this.checkIntervalTime = CHECK_INTERVAL_TIME;\n    if (this.timer) {\n      clearTimeout(this.timer);\n    }\n    this.timer = setTimeout(this.checkCacheValidity, this.checkIntervalTime);\n  }\n\n  destroy() {\n    this.clear();\n    if (this.timer) {\n      clearTimeout(this.timer);\n    }\n  }\n\n  remove(key: string) {\n    this.cache.delete(key);\n    localStorage.removeItem(key);\n  }\n\n  clear() {\n    this.cache.clear();\n    localStorage.clear();\n  }\n}\n\nexport const storage = new CustomStorage(['bigData', 'expires', 'exceedSize', 'dataType']);\n","const AutoScrollThreshold = 100;\nexport let rafX: number;\nexport let rafY: number;\n\nexport const autoScrollX = (x: number, container: HTMLElement, threshold = AutoScrollThreshold) => {\n  const rect = container.getBoundingClientRect();\n\n  const step = () => {\n    if (x - rect.left < threshold) {\n      const delta = threshold - (x - rect.left);\n      const speed = delta / 10;\n      container.scrollLeft -= speed;\n      rafX = requestAnimationFrame(step);\n    }\n\n    if (rect.right - x < threshold) {\n      const delta = threshold - (rect.right - x);\n      const speed = delta / 10;\n      container.scrollLeft += speed;\n      rafX = requestAnimationFrame(step);\n    }\n  };\n\n  cancelAnimationFrame(rafX);\n  rafX = requestAnimationFrame(step);\n};\n\ninterface ThresholdOffset {\n  top?: number;\n  bottom?: number;\n}\n\ninterface AutoScrollY {\n  y: number;\n  container: HTMLElement;\n  threshold?: number;\n  offset?: ThresholdOffset;\n}\n\nexport const autoScrollY = ({\n  y,\n  container,\n  threshold = AutoScrollThreshold,\n  offset,\n}: AutoScrollY) => {\n  const rect = container.getBoundingClientRect();\n  const thresholdTop = threshold + (offset?.top ?? 0);\n  const thresholdBottom = threshold + (offset?.bottom ?? 0);\n\n  const step = () => {\n    if (y - rect.top < thresholdTop) {\n      const delta = thresholdTop - (y - rect.top);\n      const speed = delta / 10;\n      container.scrollTop -= speed;\n      rafY = requestAnimationFrame(step);\n    }\n\n    if (rect.bottom - y < thresholdBottom) {\n      const delta = threshold - (rect.bottom - y);\n      const speed = delta / 10;\n      container.scrollTop += speed;\n      rafY = requestAnimationFrame(step);\n    }\n  };\n\n  cancelAnimationFrame(rafY);\n  rafY = requestAnimationFrame(step);\n};\n","/* eslint-disable */\n// @ts-nocheck\n// code: https://github.com/jjonline/calendar.js/blob/master/calendar.js\n/**\n * @1900-2100区间内的公历、农历互转\n * @charset UTF-8\n * @Author  Jea杨(JJonline@JJonline.Cn)\n * @Time    2014-7-21\n * @Time    2016-8-13 Fixed 2033hex、Attribution Annals\n * @Time    2016-9-25 Fixed lunar LeapMonth Param Bug\n * @Time    2017-7-24 Fixed use getTerm Func Param Error.use solar year,NOT lunar year\n * @Version 1.0.3\n * @公历转农历：calendar.solar2lunar(1987,11,01); //[you can ignore params of prefix 0]\n * @农历转公历：calendar.lunar2solar(1987,09,10); //[you can ignore params of prefix 0]\n */\n export const calendarUtil = {\n\n  /**\n   * 农历1900-2100的润大小信息表\n   * @Array Of Property\n   * @return Hex\n   */\n  lunarInfo: [0x04bd8, 0x04ae0, 0x0a570, 0x054d5, 0x0d260, 0x0d950, 0x16554, 0x056a0, 0x09ad0, 0x055d2,//1900-1909\n      0x04ae0, 0x0a5b6, 0x0a4d0, 0x0d250, 0x1d255, 0x0b540, 0x0d6a0, 0x0ada2, 0x095b0, 0x14977,//1910-1919\n      0x04970, 0x0a4b0, 0x0b4b5, 0x06a50, 0x06d40, 0x1ab54, 0x02b60, 0x09570, 0x052f2, 0x04970,//1920-1929\n      0x06566, 0x0d4a0, 0x0ea50, 0x16a95, 0x05ad0, 0x02b60, 0x186e3, 0x092e0, 0x1c8d7, 0x0c950,//1930-1939\n      0x0d4a0, 0x1d8a6, 0x0b550, 0x056a0, 0x1a5b4, 0x025d0, 0x092d0, 0x0d2b2, 0x0a950, 0x0b557,//1940-1949\n      0x06ca0, 0x0b550, 0x15355, 0x04da0, 0x0a5b0, 0x14573, 0x052b0, 0x0a9a8, 0x0e950, 0x06aa0,//1950-1959\n      0x0aea6, 0x0ab50, 0x04b60, 0x0aae4, 0x0a570, 0x05260, 0x0f263, 0x0d950, 0x05b57, 0x056a0,//1960-1969\n      0x096d0, 0x04dd5, 0x04ad0, 0x0a4d0, 0x0d4d4, 0x0d250, 0x0d558, 0x0b540, 0x0b6a0, 0x195a6,//1970-1979\n      0x095b0, 0x049b0, 0x0a974, 0x0a4b0, 0x0b27a, 0x06a50, 0x06d40, 0x0af46, 0x0ab60, 0x09570,//1980-1989\n      0x04af5, 0x04970, 0x064b0, 0x074a3, 0x0ea50, 0x06b58, 0x05ac0, 0x0ab60, 0x096d5, 0x092e0,//1990-1999\n      0x0c960, 0x0d954, 0x0d4a0, 0x0da50, 0x07552, 0x056a0, 0x0abb7, 0x025d0, 0x092d0, 0x0cab5,//2000-2009\n      0x0a950, 0x0b4a0, 0x0baa4, 0x0ad50, 0x055d9, 0x04ba0, 0x0a5b0, 0x15176, 0x052b0, 0x0a930,//2010-2019\n      0x07954, 0x06aa0, 0x0ad50, 0x05b52, 0x04b60, 0x0a6e6, 0x0a4e0, 0x0d260, 0x0ea65, 0x0d530,//2020-2029\n      0x05aa0, 0x076a3, 0x096d0, 0x04afb, 0x04ad0, 0x0a4d0, 0x1d0b6, 0x0d250, 0x0d520, 0x0dd45,//2030-2039\n      0x0b5a0, 0x056d0, 0x055b2, 0x049b0, 0x0a577, 0x0a4b0, 0x0aa50, 0x1b255, 0x06d20, 0x0ada0,//2040-2049\n      /**Add By JJonline@JJonline.Cn**/\n      0x14b63, 0x09370, 0x049f8, 0x04970, 0x064b0, 0x168a6, 0x0ea50, 0x06b20, 0x1a6c4, 0x0aae0,//2050-2059\n      0x092e0, 0x0d2e3, 0x0c960, 0x0d557, 0x0d4a0, 0x0da50, 0x05d55, 0x056a0, 0x0a6d0, 0x055d4,//2060-2069\n      0x052d0, 0x0a9b8, 0x0a950, 0x0b4a0, 0x0b6a6, 0x0ad50, 0x055a0, 0x0aba4, 0x0a5b0, 0x052b0,//2070-2079\n      0x0b273, 0x06930, 0x07337, 0x06aa0, 0x0ad50, 0x14b55, 0x04b60, 0x0a570, 0x054e4, 0x0d160,//2080-2089\n      0x0e968, 0x0d520, 0x0daa0, 0x16aa6, 0x056d0, 0x04ae0, 0x0a9d4, 0x0a2d0, 0x0d150, 0x0f252,//2090-2099\n      0x0d520],//2100\n\n  /**\n   * 公历每个月份的天数普通表\n   * @Array Of Property\n   * @return Number\n   */\n  solarMonth: [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],\n\n  /**\n   * 天干地支之天干速查表\n   * @Array Of Property trans[\"甲\",\"乙\",\"丙\",\"丁\",\"戊\",\"己\",\"庚\",\"辛\",\"壬\",\"癸\"]\n   * @return Cn string\n   */\n  Gan: [\"\\u7532\", \"\\u4e59\", \"\\u4e19\", \"\\u4e01\", \"\\u620a\", \"\\u5df1\", \"\\u5e9a\", \"\\u8f9b\", \"\\u58ec\", \"\\u7678\"],\n\n  /**\n   * 天干地支之地支速查表\n   * @Array Of Property\n   * @trans[\"子\",\"丑\",\"寅\",\"卯\",\"辰\",\"巳\",\"午\",\"未\",\"申\",\"酉\",\"戌\",\"亥\"]\n   * @return Cn string\n   */\n  Zhi: [\"\\u5b50\", \"\\u4e11\", \"\\u5bc5\", \"\\u536f\", \"\\u8fb0\", \"\\u5df3\", \"\\u5348\", \"\\u672a\", \"\\u7533\", \"\\u9149\", \"\\u620c\", \"\\u4ea5\"],\n\n  /**\n   * 天干地支之地支速查表<=>生肖\n   * @Array Of Property\n   * @trans[\"鼠\",\"牛\",\"虎\",\"兔\",\"龙\",\"蛇\",\"马\",\"羊\",\"猴\",\"鸡\",\"狗\",\"猪\"]\n   * @return Cn string\n   */\n  Animals: [\"\\u9f20\", \"\\u725b\", \"\\u864e\", \"\\u5154\", \"\\u9f99\", \"\\u86c7\", \"\\u9a6c\", \"\\u7f8a\", \"\\u7334\", \"\\u9e21\", \"\\u72d7\", \"\\u732a\"],\n\n  /**\n   * 阳历节日\n   */\n  festival: {\n      '1-1': {title: '元旦节'},\n      '2-14': {title: '情人节'},\n      '5-1': {title: '劳动节'},\n      '5-4': {title: '青年节'},\n      '6-1': {title: '儿童节'},\n      '9-10': {title: '教师节'},\n      '10-1': {title: '国庆节'},\n      '12-25': {title: '圣诞节'},\n\n      '3-8': {title: '妇女节'},\n      '3-12': {title: '植树节'},\n      '4-1': {title: '愚人节'},\n      '5-12': {title: '护士节'},\n      '7-1': {title: '建党节'},\n      '8-1': {title: '建军节'},\n      '12-24': {title: '平安夜'},\n  },\n\n  /**\n   * 农历节日\n   */\n  lFestival: {\n      '12-30': {title: '除夕'},\n      '1-1': {title: '春节'},\n      '1-15': {title: '元宵节'},\n      '2-2': {title: '龙抬头'},\n      '5-5': {title: '端午节'},\n      '7-7': {title: '七夕节'},\n      '7-15': {title: '中元节'},\n      '8-15': {title: '中秋节'},\n      '9-9': {title: '重阳节'},\n      '10-1': {title: '寒衣节'},\n      '10-15': {title: '下元节'},\n      '12-8': {title: '腊八节'},\n      '12-23': {title: '北方小年'},\n      '12-24': {title: '南方小年'},\n  },\n\n  /**\n   * 返回默认定义的阳历节日\n   */\n  getFestival() {\n      return this.festival\n  },\n\n  /**\n   * 返回默认定义的内容里节日\n   */\n  getLunarFestival() {\n      return this.lFestival\n  },\n\n  /**\n   *\n   * @param param {Object} 按照festival的格式输入数据，设置阳历节日\n   */\n  setFestival(param = {}) {\n      this.festival = param\n  },\n\n  /**\n   *\n   * @param param {Object} 按照lFestival的格式输入数据，设置农历节日\n   */\n  setLunarFestival(param = {}) {\n      this.lFestival = param\n  },\n\n  /**\n   * 24节气速查表\n   * @Array Of Property\n   * @trans[\"小寒\",\"大寒\",\"立春\",\"雨水\",\"惊蛰\",\"春分\",\"清明\",\"谷雨\",\"立夏\",\"小满\",\"芒种\",\"夏至\",\"小暑\",\"大暑\",\"立秋\",\"处暑\",\"白露\",\"秋分\",\"寒露\",\"霜降\",\"立冬\",\"小雪\",\"大雪\",\"冬至\"]\n   * @return Cn string\n   */\n  solarTerm: [\"\\u5c0f\\u5bd2\", \"\\u5927\\u5bd2\", \"\\u7acb\\u6625\", \"\\u96e8\\u6c34\", \"\\u60ca\\u86f0\", \"\\u6625\\u5206\", \"\\u6e05\\u660e\", \"\\u8c37\\u96e8\", \"\\u7acb\\u590f\", \"\\u5c0f\\u6ee1\", \"\\u8292\\u79cd\", \"\\u590f\\u81f3\", \"\\u5c0f\\u6691\", \"\\u5927\\u6691\", \"\\u7acb\\u79cb\", \"\\u5904\\u6691\", \"\\u767d\\u9732\", \"\\u79cb\\u5206\", \"\\u5bd2\\u9732\", \"\\u971c\\u964d\", \"\\u7acb\\u51ac\", \"\\u5c0f\\u96ea\", \"\\u5927\\u96ea\", \"\\u51ac\\u81f3\"],\n\n  /**\n   * 1900-2100各年的24节气日期速查表\n   * @Array Of Property\n   * @return 0x string For splice\n   */\n  sTermInfo: ['9778397bd097c36b0b6fc9274c91aa', '97b6b97bd19801ec9210c965cc920e', '97bcf97c3598082c95f8c965cc920f',\n      '97bd0b06bdb0722c965ce1cfcc920f', 'b027097bd097c36b0b6fc9274c91aa', '97b6b97bd19801ec9210c965cc920e',\n      '97bcf97c359801ec95f8c965cc920f', '97bd0b06bdb0722c965ce1cfcc920f', 'b027097bd097c36b0b6fc9274c91aa',\n      '97b6b97bd19801ec9210c965cc920e', '97bcf97c359801ec95f8c965cc920f', '97bd0b06bdb0722c965ce1cfcc920f',\n      'b027097bd097c36b0b6fc9274c91aa', '9778397bd19801ec9210c965cc920e', '97b6b97bd19801ec95f8c965cc920f',\n      '97bd09801d98082c95f8e1cfcc920f', '97bd097bd097c36b0b6fc9210c8dc2', '9778397bd197c36c9210c9274c91aa',\n      '97b6b97bd19801ec95f8c965cc920e', '97bd09801d98082c95f8e1cfcc920f', '97bd097bd097c36b0b6fc9210c8dc2',\n      '9778397bd097c36c9210c9274c91aa', '97b6b97bd19801ec95f8c965cc920e', '97bcf97c3598082c95f8e1cfcc920f',\n      '97bd097bd097c36b0b6fc9210c8dc2', '9778397bd097c36c9210c9274c91aa', '97b6b97bd19801ec9210c965cc920e',\n      '97bcf97c3598082c95f8c965cc920f', '97bd097bd097c35b0b6fc920fb0722', '9778397bd097c36b0b6fc9274c91aa',\n      '97b6b97bd19801ec9210c965cc920e', '97bcf97c3598082c95f8c965cc920f', '97bd097bd097c35b0b6fc920fb0722',\n      '9778397bd097c36b0b6fc9274c91aa', '97b6b97bd19801ec9210c965cc920e', '97bcf97c359801ec95f8c965cc920f',\n      '97bd097bd097c35b0b6fc920fb0722', '9778397bd097c36b0b6fc9274c91aa', '97b6b97bd19801ec9210c965cc920e',\n      '97bcf97c359801ec95f8c965cc920f', '97bd097bd097c35b0b6fc920fb0722', '9778397bd097c36b0b6fc9274c91aa',\n      '97b6b97bd19801ec9210c965cc920e', '97bcf97c359801ec95f8c965cc920f', '97bd097bd07f595b0b6fc920fb0722',\n      '9778397bd097c36b0b6fc9210c8dc2', '9778397bd19801ec9210c9274c920e', '97b6b97bd19801ec95f8c965cc920f',\n      '97bd07f5307f595b0b0bc920fb0722', '7f0e397bd097c36b0b6fc9210c8dc2', '9778397bd097c36c9210c9274c920e',\n      '97b6b97bd19801ec95f8c965cc920f', '97bd07f5307f595b0b0bc920fb0722', '7f0e397bd097c36b0b6fc9210c8dc2',\n      '9778397bd097c36c9210c9274c91aa', '97b6b97bd19801ec9210c965cc920e', '97bd07f1487f595b0b0bc920fb0722',\n      '7f0e397bd097c36b0b6fc9210c8dc2', '9778397bd097c36b0b6fc9274c91aa', '97b6b97bd19801ec9210c965cc920e',\n      '97bcf7f1487f595b0b0bb0b6fb0722', '7f0e397bd097c35b0b6fc920fb0722', '9778397bd097c36b0b6fc9274c91aa',\n      '97b6b97bd19801ec9210c965cc920e', '97bcf7f1487f595b0b0bb0b6fb0722', '7f0e397bd097c35b0b6fc920fb0722',\n      '9778397bd097c36b0b6fc9274c91aa', '97b6b97bd19801ec9210c965cc920e', '97bcf7f1487f531b0b0bb0b6fb0722',\n      '7f0e397bd097c35b0b6fc920fb0722', '9778397bd097c36b0b6fc9274c91aa', '97b6b97bd19801ec9210c965cc920e',\n      '97bcf7f1487f531b0b0bb0b6fb0722', '7f0e397bd07f595b0b6fc920fb0722', '9778397bd097c36b0b6fc9274c91aa',\n      '97b6b97bd19801ec9210c9274c920e', '97bcf7f0e47f531b0b0bb0b6fb0722', '7f0e397bd07f595b0b0bc920fb0722',\n      '9778397bd097c36b0b6fc9210c91aa', '97b6b97bd197c36c9210c9274c920e', '97bcf7f0e47f531b0b0bb0b6fb0722',\n      '7f0e397bd07f595b0b0bc920fb0722', '9778397bd097c36b0b6fc9210c8dc2', '9778397bd097c36c9210c9274c920e',\n      '97b6b7f0e47f531b0723b0b6fb0722', '7f0e37f5307f595b0b0bc920fb0722', '7f0e397bd097c36b0b6fc9210c8dc2',\n      '9778397bd097c36b0b70c9274c91aa', '97b6b7f0e47f531b0723b0b6fb0721', '7f0e37f1487f595b0b0bb0b6fb0722',\n      '7f0e397bd097c35b0b6fc9210c8dc2', '9778397bd097c36b0b6fc9274c91aa', '97b6b7f0e47f531b0723b0b6fb0721',\n      '7f0e27f1487f595b0b0bb0b6fb0722', '7f0e397bd097c35b0b6fc920fb0722', '9778397bd097c36b0b6fc9274c91aa',\n      '97b6b7f0e47f531b0723b0b6fb0721', '7f0e27f1487f531b0b0bb0b6fb0722', '7f0e397bd097c35b0b6fc920fb0722',\n      '9778397bd097c36b0b6fc9274c91aa', '97b6b7f0e47f531b0723b0b6fb0721', '7f0e27f1487f531b0b0bb0b6fb0722',\n      '7f0e397bd097c35b0b6fc920fb0722', '9778397bd097c36b0b6fc9274c91aa', '97b6b7f0e47f531b0723b0b6fb0721',\n      '7f0e27f1487f531b0b0bb0b6fb0722', '7f0e397bd07f595b0b0bc920fb0722', '9778397bd097c36b0b6fc9274c91aa',\n      '97b6b7f0e47f531b0723b0787b0721', '7f0e27f0e47f531b0b0bb0b6fb0722', '7f0e397bd07f595b0b0bc920fb0722',\n      '9778397bd097c36b0b6fc9210c91aa', '97b6b7f0e47f149b0723b0787b0721', '7f0e27f0e47f531b0723b0b6fb0722',\n      '7f0e397bd07f595b0b0bc920fb0722', '9778397bd097c36b0b6fc9210c8dc2', '977837f0e37f149b0723b0787b0721',\n      '7f07e7f0e47f531b0723b0b6fb0722', '7f0e37f5307f595b0b0bc920fb0722', '7f0e397bd097c35b0b6fc9210c8dc2',\n      '977837f0e37f14998082b0787b0721', '7f07e7f0e47f531b0723b0b6fb0721', '7f0e37f1487f595b0b0bb0b6fb0722',\n      '7f0e397bd097c35b0b6fc9210c8dc2', '977837f0e37f14998082b0787b06bd', '7f07e7f0e47f531b0723b0b6fb0721',\n      '7f0e27f1487f531b0b0bb0b6fb0722', '7f0e397bd097c35b0b6fc920fb0722', '977837f0e37f14998082b0787b06bd',\n      '7f07e7f0e47f531b0723b0b6fb0721', '7f0e27f1487f531b0b0bb0b6fb0722', '7f0e397bd097c35b0b6fc920fb0722',\n      '977837f0e37f14998082b0787b06bd', '7f07e7f0e47f531b0723b0b6fb0721', '7f0e27f1487f531b0b0bb0b6fb0722',\n      '7f0e397bd07f595b0b0bc920fb0722', '977837f0e37f14998082b0787b06bd', '7f07e7f0e47f531b0723b0b6fb0721',\n      '7f0e27f1487f531b0b0bb0b6fb0722', '7f0e397bd07f595b0b0bc920fb0722', '977837f0e37f14998082b0787b06bd',\n      '7f07e7f0e47f149b0723b0787b0721', '7f0e27f0e47f531b0b0bb0b6fb0722', '7f0e397bd07f595b0b0bc920fb0722',\n      '977837f0e37f14998082b0723b06bd', '7f07e7f0e37f149b0723b0787b0721', '7f0e27f0e47f531b0723b0b6fb0722',\n      '7f0e397bd07f595b0b0bc920fb0722', '977837f0e37f14898082b0723b02d5', '7ec967f0e37f14998082b0787b0721',\n      '7f07e7f0e47f531b0723b0b6fb0722', '7f0e37f1487f595b0b0bb0b6fb0722', '7f0e37f0e37f14898082b0723b02d5',\n      '7ec967f0e37f14998082b0787b0721', '7f07e7f0e47f531b0723b0b6fb0722', '7f0e37f1487f531b0b0bb0b6fb0722',\n      '7f0e37f0e37f14898082b0723b02d5', '7ec967f0e37f14998082b0787b06bd', '7f07e7f0e47f531b0723b0b6fb0721',\n      '7f0e37f1487f531b0b0bb0b6fb0722', '7f0e37f0e37f14898082b072297c35', '7ec967f0e37f14998082b0787b06bd',\n      '7f07e7f0e47f531b0723b0b6fb0721', '7f0e27f1487f531b0b0bb0b6fb0722', '7f0e37f0e37f14898082b072297c35',\n      '7ec967f0e37f14998082b0787b06bd', '7f07e7f0e47f531b0723b0b6fb0721', '7f0e27f1487f531b0b0bb0b6fb0722',\n      '7f0e37f0e366aa89801eb072297c35', '7ec967f0e37f14998082b0787b06bd', '7f07e7f0e47f149b0723b0787b0721',\n      '7f0e27f1487f531b0b0bb0b6fb0722', '7f0e37f0e366aa89801eb072297c35', '7ec967f0e37f14998082b0723b06bd',\n      '7f07e7f0e47f149b0723b0787b0721', '7f0e27f0e47f531b0723b0b6fb0722', '7f0e37f0e366aa89801eb072297c35',\n      '7ec967f0e37f14998082b0723b06bd', '7f07e7f0e37f14998083b0787b0721', '7f0e27f0e47f531b0723b0b6fb0722',\n      '7f0e37f0e366aa89801eb072297c35', '7ec967f0e37f14898082b0723b02d5', '7f07e7f0e37f14998082b0787b0721',\n      '7f07e7f0e47f531b0723b0b6fb0722', '7f0e36665b66aa89801e9808297c35', '665f67f0e37f14898082b0723b02d5',\n      '7ec967f0e37f14998082b0787b0721', '7f07e7f0e47f531b0723b0b6fb0722', '7f0e36665b66a449801e9808297c35',\n      '665f67f0e37f14898082b0723b02d5', '7ec967f0e37f14998082b0787b06bd', '7f07e7f0e47f531b0723b0b6fb0721',\n      '7f0e36665b66a449801e9808297c35', '665f67f0e37f14898082b072297c35', '7ec967f0e37f14998082b0787b06bd',\n      '7f07e7f0e47f531b0723b0b6fb0721', '7f0e26665b66a449801e9808297c35', '665f67f0e37f1489801eb072297c35',\n      '7ec967f0e37f14998082b0787b06bd', '7f07e7f0e47f531b0723b0b6fb0721', '7f0e27f1487f531b0b0bb0b6fb0722'],\n\n  /**\n   * 数字转中文速查表\n   * @Array Of Property\n   * @trans ['日','一','二','三','四','五','六','七','八','九','十']\n   * @return Cn string\n   */\n  nStr1: [\"\\u65e5\", \"\\u4e00\", \"\\u4e8c\", \"\\u4e09\", \"\\u56db\", \"\\u4e94\", \"\\u516d\", \"\\u4e03\", \"\\u516b\", \"\\u4e5d\", \"\\u5341\"],\n\n  /**\n   * 日期转农历称呼速查表\n   * @Array Of Property\n   * @trans ['初','十','廿','卅']\n   * @return Cn string\n   */\n  nStr2: [\"\\u521d\", \"\\u5341\", \"\\u5eff\", \"\\u5345\"],\n\n  /**\n   * 月份转农历称呼速查表\n   * @Array Of Property\n   * @trans ['正','一','二','三','四','五','六','七','八','九','十','冬','腊']\n   * @return Cn string\n   */\n  nStr3: [\"\\u6b63\", \"\\u4e8c\", \"\\u4e09\", \"\\u56db\", \"\\u4e94\", \"\\u516d\", \"\\u4e03\", \"\\u516b\", \"\\u4e5d\", \"\\u5341\", \"\\u51ac\", \"\\u814a\"],\n\n  /**\n   * 返回农历y年一整年的总天数\n   * @param y lunar Year\n   * @return Number\n   * @eg:var count = calendar.lYearDays(1987) ;//count=387\n   */\n  lYearDays: function (y) {\n      let i, sum = 348;\n      for (i = 0x8000; i > 0x8; i >>= 1) {\n          sum += (this.lunarInfo[y - 1900] & i) ? 1 : 0;\n      }\n      return (sum + this.leapDays(y));\n  },\n\n  /**\n   * 返回农历y年闰月是哪个月；若y年没有闰月 则返回0\n   * @param y lunar Year\n   * @return Number (0-12)\n   * @eg:var leapMonth = calendar.leapMonth(1987) ;//leapMonth=6\n   */\n  leapMonth: function (y) { //闰字编码 \\u95f0\n      return (this.lunarInfo[y - 1900] & 0xf);\n  },\n\n  /**\n   * 返回农历y年闰月的天数 若该年没有闰月则返回0\n   * @param y lunar Year\n   * @return Number (0、29、30)\n   * @eg:var leapMonthDay = calendar.leapDays(1987) ;//leapMonthDay=29\n   */\n  leapDays: function (y) {\n      if (this.leapMonth(y)) {\n          return ((this.lunarInfo[y - 1900] & 0x10000) ? 30 : 29);\n      }\n      return (0);\n  },\n\n  /**\n   * 返回农历y年m月（非闰月）的总天数，计算m为闰月时的天数请使用leapDays方法\n   * @param y lunar Year\n   * @param m lunar Month\n   * @return Number (-1、29、30)\n   * @eg:var MonthDay = calendar.monthDays(1987,9) ;//MonthDay=29\n   */\n  monthDays: function (y, m) {\n      if (m > 12 || m < 1) {\n          return -1\n      }//月份参数从1至12，参数错误返回-1\n      return ((this.lunarInfo[y - 1900] & (0x10000 >> m)) ? 30 : 29);\n  },\n\n  /**\n   * 返回公历(!)y年m月的天数\n   * @param y solar Year\n   * @param m solar Month\n   * @return Number (-1、28、29、30、31)\n   * @eg:var solarMonthDay = calendar.leapDays(1987) ;//solarMonthDay=30\n   */\n  solarDays: function (y, m) {\n      if (m > 12 || m < 1) {\n          return -1\n      } //若参数错误 返回-1\n      const ms = m - 1;\n      if (ms === 1) { //2月份的闰平规律测算后确认返回28或29\n          return (((y % 4 === 0) && (y % 100 !== 0) || (y % 400 === 0)) ? 29 : 28);\n      } else {\n          return (this.solarMonth[ms]);\n      }\n  },\n\n  /**\n   * 农历年份转换为干支纪年\n   * @param  lYear 农历年的年份数\n   * @return Cn string\n   */\n  toGanZhiYear: function (lYear) {\n      var ganKey = (lYear - 3) % 10;\n      var zhiKey = (lYear - 3) % 12;\n      if (ganKey === 0) ganKey = 10;//如果余数为0则为最后一个天干\n      if (zhiKey === 0) zhiKey = 12;//如果余数为0则为最后一个地支\n      return this.Gan[ganKey - 1] + this.Zhi[zhiKey - 1];\n\n  },\n\n  /**\n   * 公历月、日判断所属星座\n   * @param  cMonth [description]\n   * @param  cDay [description]\n   * @return Cn string\n   */\n  toAstro: function (cMonth, cDay) {\n      const s = \"\\u9b54\\u7faf\\u6c34\\u74f6\\u53cc\\u9c7c\\u767d\\u7f8a\\u91d1\\u725b\\u53cc\\u5b50\\u5de8\\u87f9\\u72ee\\u5b50\\u5904\\u5973\\u5929\\u79e4\\u5929\\u874e\\u5c04\\u624b\\u9b54\\u7faf\";\n      const arr = [20, 19, 21, 21, 21, 22, 23, 23, 23, 23, 22, 22];\n      return s.substr(cMonth * 2 - (cDay < arr[cMonth - 1] ? 2 : 0), 2) + \"\\u5ea7\";//座\n  },\n\n  /**\n   * 传入offset偏移量返回干支\n   * @param offset 相对甲子的偏移量\n   * @return Cn string\n   */\n  toGanZhi: function (offset) {\n      return this.Gan[offset % 10] + this.Zhi[offset % 12];\n  },\n\n  /**\n   * 传入公历(!)y年获得该年第n个节气的公历日期\n   * @param y y公历年(1900-2100)\n   * @param n n二十四节气中的第几个节气(1~24)；从n=1(小寒)算起\n   * @return day Number\n   * @eg:var _24 = calendar.getTerm(1987,3) ;//_24=4;意即1987年2月4日立春\n   */\n  getTerm: function (y, n) {\n      if( y < 1900 || y > 2100 || n < 1 || n > 24) {\n          return -1;\n      }\n      const _table = this.sTermInfo[y - 1900];\n      const _calcDay = []\n      for (let index = 0; index < _table.length; index += 5) {\n          const chunk = parseInt('0x' + _table.substr(index, 5)).toString()\n          _calcDay.push(\n            chunk[0],\n            chunk.substr(1, 2),\n            chunk[3],\n            chunk.substr(4, 2)\n          )\n      }\n      return parseInt(_calcDay[n - 1]);\n  },\n\n  /**\n   * 传入农历数字月份返回汉语通俗表示法\n   * @param m lunar month\n   * @return Cn string\n   * @eg:var cnMonth = calendar.toChinaMonth(12) ;//cnMonth='腊月'\n   */\n  toChinaMonth: function (m) { // 月 => \\u6708\n      if (m > 12 || m < 1) {\n          return -1\n      } //若参数错误 返回-1\n      let s = this.nStr3[m - 1];\n      s += \"\\u6708\";//加上月字\n      return s;\n  },\n\n  /**\n   * 传入农历日期数字返回汉字表示法\n   * @param d lunar day\n   * @return Cn string\n   * @eg:var cnDay = calendar.toChinaDay(21) ;//cnMonth='廿一'\n   */\n  toChinaDay: function (d) { //日 => \\u65e5\n      let s;\n      switch (d) {\n          case 10:\n              s = '\\u521d\\u5341';\n              break;\n          case 20:\n              s = '\\u4e8c\\u5341';\n              break;\n          case 30:\n              s = '\\u4e09\\u5341';\n              break;\n          default :\n              s = this.nStr2[Math.floor(d / 10)];\n              s += this.nStr1[d % 10];\n      }\n      return (s);\n  },\n\n  /**\n   * 年份转生肖[!仅能大致转换] => 精确划分生肖分界线是“立春”\n   * @param y year\n   * @return Cn string\n   * @eg:var animal = calendar.getAnimal(1987) ;//animal='兔'\n   */\n  getAnimal: function (y) {\n      return this.Animals[(y - 4) % 12]\n  },\n\n  /**\n   * 传入阳历年月日获得详细的公历、农历object信息 <=>JSON\n   * !important! 公历参数区间1900.1.31~2100.12.31\n   * @param yPara  solar year\n   * @param mPara  solar month\n   * @param dPara  solar day\n   * @return JSON object\n   * @eg:console.log(calendar.solar2lunar(1987,11,01));\n   */\n  solar2lunar: function (yPara, mPara, dPara) {\n      let y = parseInt(yPara);\n      let m = parseInt(mPara);\n      let d = parseInt(dPara);\n      //年份限定、上限\n      if (y < 1900 || y > 2100) {\n          return -1;// undefined转换为数字变为NaN\n      }\n      //公历传参最下限\n      if (y === 1900 && m === 1 && d < 31) {\n          return -1;\n      }\n\n      //未传参  获得当天\n      let objDate;\n      if (!y) {\n          objDate = new Date();\n      } else {\n          objDate = new Date(y, parseInt(m) - 1, d);\n      }\n      let i, leap = 0, temp = 0;\n      //修正ymd参数\n      y = objDate.getFullYear();\n      m = objDate.getMonth() + 1;\n      d = objDate.getDate();\n      let offset = (Date.UTC(objDate.getFullYear(), objDate.getMonth(), objDate.getDate()) - Date.UTC(1900, 0, 31)) / 86400000;\n      for (i = 1900; i < 2101 && offset > 0; i++) {\n          temp = this.lYearDays(i);\n          offset -= temp;\n      }\n      if (offset < 0) {\n          offset += temp;\n          i--;\n      }\n\n      //是否今天\n      let isTodayObj = new Date(),\n          isToday = false;\n      if (isTodayObj.getFullYear() === y && isTodayObj.getMonth() + 1 === m && isTodayObj.getDate() === d) {\n          isToday = true;\n      }\n      //星期几\n      let nWeek = objDate.getDay(),\n          cWeek = this.nStr1[nWeek];\n      //数字表示周几顺应天朝周一开始的惯例\n      if (nWeek === 0) {\n          nWeek = 7;\n      }\n      //农历年\n      const year = i;\n      leap = this.leapMonth(i); //闰哪个月\n      let isLeap = false;\n\n      //效验闰月\n      for (i = 1; i < 13 && offset > 0; i++) {\n          //闰月\n          if (leap > 0 && i === (leap + 1) && isLeap === false) {\n              --i;\n              isLeap = true;\n              temp = this.leapDays(year); //计算农历闰月天数\n          } else {\n              temp = this.monthDays(year, i);//计算农历普通月天数\n          }\n          //解除闰月\n          if (isLeap === true && i === (leap + 1)) {\n              isLeap = false;\n          }\n          offset -= temp;\n      }\n      // 闰月导致数组下标重叠取反\n      if (offset === 0 && leap > 0 && i === leap + 1) {\n          if (isLeap) {\n              isLeap = false;\n          } else {\n              isLeap = true;\n              --i;\n          }\n      }\n      if (offset < 0) {\n          offset += temp;\n          --i;\n      }\n      //农历月\n      const month = i;\n      //农历日\n      const day = offset + 1;\n      //天干地支处理\n      const sm = m - 1;\n      const gzY = this.toGanZhiYear(year);\n\n      // 当月的两个节气\n      // bugfix-2017-7-24 11:03:38 use lunar Year Param `y` Not `year`\n      const firstNode = this.getTerm(y, (m * 2 - 1));//返回当月「节」为几日开始\n      const secondNode = this.getTerm(y, (m * 2));//返回当月「节」为几日开始\n\n      // 依据12节气修正干支月\n      let gzM = this.toGanZhi((y - 1900) * 12 + m + 11);\n      if (d >= firstNode) {\n          gzM = this.toGanZhi((y - 1900) * 12 + m + 12);\n      }\n\n      //传入的日期的节气与否\n      let isTerm = false;\n      let Term = null;\n      if (firstNode === d) {\n          isTerm = true;\n          Term = this.solarTerm[m * 2 - 2];\n      }\n      if (secondNode === d) {\n          isTerm = true;\n          Term = this.solarTerm[m * 2 - 1];\n      }\n      //日柱 当月一日与 1900/1/1 相差天数\n      const dayCyclical = Date.UTC(y, sm, 1, 0, 0, 0, 0) / 86400000 + 25567 + 10;\n      const gzD = this.toGanZhi(dayCyclical + d - 1);\n      //该日期所属的星座\n      const astro = this.toAstro(m, d);\n\n      const solarDate = y + '-' + m + '-' + d;\n      const lunarDate = year + '-' + month + '-' + day;\n\n      const festival = this.festival;\n      const lFestival = this.lFestival;\n\n      const festivalDate = m + '-' + d;\n      let lunarFestivalDate = month + '-' + day;\n\n      // bugfix https://github.com/jjonline/calendar.js/issues/29\n      // 农历节日修正：农历12月小月则29号除夕，大月则30号除夕\n      // 此处取巧修正：当前为农历12月29号时增加一次判断并且把lunarFestivalDate设置为12-30以正确取得除夕\n      // 天朝农历节日遇闰月过前不过后的原则，此处取农历12月天数不考虑闰月\n      // 农历润12月在本工具支持的200年区间内仅1574年出现\n      if (month === 12 && day === 29 && this.monthDays(year, month) === 29) {\n          lunarFestivalDate = '12-30';\n      }\n      return {\n          date: solarDate,\n          lunarDate: lunarDate,\n          festival: festival[festivalDate] ? festival[festivalDate].title : null,\n          lunarFestival: lFestival[lunarFestivalDate] ? lFestival[lunarFestivalDate].title : null,\n          'lYear': year,\n          'lMonth': month,\n          'lDay': day,\n          'Animal': this.getAnimal(year),\n          'IMonthCn': (isLeap ? \"\\u95f0\" : '') + this.toChinaMonth(month),\n          'IDayCn': this.toChinaDay(day),\n          'cYear': y,\n          'cMonth': m,\n          'cDay': d,\n          'gzYear': gzY,\n          'gzMonth': gzM,\n          'gzDay': gzD,\n          'isToday': isToday,\n          'isLeap': isLeap,\n          'nWeek': nWeek,\n          'ncWeek': \"\\u661f\\u671f\" + cWeek,\n          'isTerm': isTerm,\n          'Term': Term,\n          'astro': astro\n      };\n  },\n\n  /**\n   * 传入农历年月日以及传入的月份是否闰月获得详细的公历、农历object信息 <=>JSON\n   * !important! 参数区间1900.1.31~2100.12.1\n   * @param y  lunar year\n   * @param m  lunar month\n   * @param d  lunar day\n   * @param isLeapMonth  lunar month is leap or not.[如果是农历闰月第四个参数赋值true即可]\n   * @return JSON object\n   * @eg:console.log(calendar.lunar2solar(1987,9,10));\n   */\n  lunar2solar: function (y, m, d, isLeapMonth) {\n      y = parseInt(y)\n      m = parseInt(m)\n      d = parseInt(d)\n      isLeapMonth = !!isLeapMonth;\n      const leapOffset = 0;\n      const leapMonth = this.leapMonth(y);\n      const leapDay = this.leapDays(y);\n      if (isLeapMonth && (leapMonth !== m)) {\n          return -1;\n      }//传参要求计算该闰月公历 但该年得出的闰月与传参的月份并不同\n      if (y === 2100 && m === 12 && d > 1 || y === 1900 && m === 1 && d < 31) {\n          return -1;\n      }//超出了最大极限值\n      const day = this.monthDays(y, m);\n      let _day = day;\n      //bugFix 2016-9-25\n      //if month is leap, _day use leapDays method\n      if (isLeapMonth) {\n          _day = this.leapDays(y, m);\n      }\n      if (y < 1900 || y > 2100 || d > _day) {\n          return -1;\n      }//参数合法性效验\n\n      //计算农历的时间差\n      let offset = 0;\n      let i;\n      for (i = 1900; i < y; i++) {\n          offset += this.lYearDays(i);\n      }\n      let leap = 0, isAdd = false;\n      for (i = 1; i < m; i++) {\n          leap = this.leapMonth(y);\n          if (!isAdd) {//处理闰月\n              if (leap <= i && leap > 0) {\n                  offset += this.leapDays(y);\n                  isAdd = true;\n              }\n          }\n          offset += this.monthDays(y, i);\n      }\n      //转换闰月农历 需补充该年闰月的前一个月的时差\n      if (isLeapMonth) {\n          offset += day;\n      }\n      //1900年农历正月一日的公历时间为1900年1月30日0时0分0秒(该时间也是本农历的最开始起始点)\n      const strap = Date.UTC(1900, 1, 30, 0, 0, 0);\n      const calObj = new Date((offset + d - 31) * 86400000 + strap);\n      const cY = calObj.getUTCFullYear();\n      const cM = calObj.getUTCMonth() + 1;\n      const cD = calObj.getUTCDate();\n\n      return this.solar2lunar(cY, cM, cD);\n  }\n};\n","import { overrideTailwindClasses } from 'tailwind-override';\nimport classnames from 'classnames';\nimport type { Argument } from 'classnames';\n\nexport const cx = (...rest: Argument[]) => {\n  return overrideTailwindClasses(classnames(rest));\n};\n","const MONTHS = '一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月'.split('_');\nexport const OneDayMillisecond = 24 * 60 * 60 * 1000;\n/**\n * 该方法根据给定的基准时间计算一个时间范围\n * @param base 计算时间范围的基准时间\n * @param length 时间范围的大小\n * @param isBackward 是否基于基准时间向后取时间\n * @param includeBase 是否包含基准时间\n * @returns\n */\nexport enum DateDir {\n  PREV = 'prev',\n  NEXT = 'next',\n}\n\nexport enum ShowType {\n  MONTH = 'month',\n  YEAR = 'year',\n}\n\ninterface DatesParams {\n  base?: number;\n  dir?: DateDir;\n  length?: number;\n  includeBase?: boolean;\n  showType?: ShowType;\n}\nexport const getDateRange = ({\n  base = Date.now(),\n  dir = DateDir.NEXT,\n  length = 100,\n  includeBase = false,\n  showType = ShowType.MONTH,\n}: DatesParams): number[] => {\n  const dates: number[] = [];\n  const isNext = dir === DateDir.NEXT;\n\n  let baseDate = getDateTimeStamp(base);\n  let dateStep = OneDayMillisecond;\n  if (showType === ShowType.YEAR) {\n    const weekDay = new Date(baseDate).getDay() || 7;\n    baseDate = baseDate + (7 - weekDay) * OneDayMillisecond;\n    dateStep = OneDayMillisecond * 7;\n  }\n\n  const newLength = includeBase ? length : length + 1;\n  for (let i = 0; i < newLength; i++) {\n    if (!includeBase && i === 0) continue;\n\n    if (isNext) {\n      const time = baseDate + i * dateStep;\n      dates.push(time);\n    } else {\n      const time = baseDate - i * dateStep;\n      dates.unshift(time);\n    }\n  }\n\n  return dates;\n};\n\nexport const getTimelineDateRange = ({ showType, length, base }: DatesParams) => {\n  return [\n    ...getDateRange({ base, dir: DateDir.PREV, showType, length }),\n    ...getDateRange({ base, dir: DateDir.NEXT, showType, length, includeBase: true }),\n  ];\n};\n\nexport const getDateTimeStamp = (time: number) => {\n  return new Date(new Date(time).toDateString()).getTime();\n};\n\nexport const formatDate = (time: number) => {\n  const date = new Date(time);\n  return {\n    year: date.getFullYear(),\n    month: date.getMonth() + 1,\n    date: date.getDate(),\n    day: date.getDay() + 1,\n    monthDesc: MONTHS[date.getMonth()],\n    time,\n  };\n};\n\nexport const isToday = (time: number) => time === getDateTimeStamp(Date.now());\n","interface Rectangle {\n  left: number;\n  top: number;\n  width: number;\n  height: number;\n}\n\nexport const getIntersectionRatio = (entry: Rectangle, target: Rectangle): number => {\n  const top = Math.max(target.top, entry.top);\n  const left = Math.max(target.left, entry.left);\n  const right = Math.min(target.left + target.width, entry.left + entry.width);\n  const bottom = Math.min(target.top + target.height, entry.top + entry.height);\n  const width = right - left;\n  const height = bottom - top;\n\n  if (left < right && top < bottom) {\n    const targetArea = target.width * target.height;\n    const intersectionArea = width * height;\n    const intersectionRatio = intersectionArea / targetArea;\n\n    return Number(intersectionRatio.toFixed(4));\n  }\n\n  return 0;\n};\n\ninterface Point {\n  x: number;\n  y: number;\n}\nexport const centerOfRectangle = (rect: DOMRect): Point => {\n  return {\n    x: rect.left + rect.width * 0.5,\n    y: rect.top + rect.height * 0.5,\n  };\n};\n\nexport function distanceBetween(p1: Point, p2: Point) {\n  return Math.sqrt(Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2));\n}\n","export const numberToPercent = (value: number) => String((value * 100).toFixed(2)).concat('%');\n","import { createContext, useContext } from 'react';\nimport { getDateTimeStamp } from '../utils/dates';\n\nexport const TodayContext = createContext<number>(getDateTimeStamp(Date.now()));\n\nexport const useToday = () => {\n  const context = useContext(TodayContext);\n  return context;\n};\n","import { arrayMove } from '@dnd-kit/sortable';\nimport dayjs from 'dayjs';\nimport { debounce, isEqual, last, throttle } from 'lodash-es';\nimport React, {\n  createContext,\n  FC,\n  forwardRef,\n  memo,\n  useCallback,\n  useContext,\n  useEffect,\n  useLayoutEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport { BsArrowLeftShort, BsArrowRightShort } from 'react-icons/bs';\nimport { MdKeyboardArrowLeft, MdKeyboardArrowRight } from 'react-icons/md';\nimport { v4 } from 'uuid';\nimport { useToday } from '../main/context';\nimport { autoScrollX, autoScrollY, rafX, rafY } from '../utils/auto-scroll';\nimport { cx } from '../utils/classnames';\nimport {\n  DateDir,\n  formatDate,\n  getDateRange,\n  getDateTimeStamp,\n  getTimelineDateRange,\n  ShowType,\n} from '../utils/dates';\nimport { getIntersectionRatio } from '../utils/intersection-ratio';\n\nexport const DATE_TIME_FORMAT = 'YYYY/MM/DD HH:mm';\nexport const DATE_FORMAT = 'YYYY/MM/DD';\nexport const NewCardPlaceholderId = 'NewRecordPlaceholderId';\nexport const IS_IPHONE = typeof navigator !== 'undefined' && /iPhone/i.test(navigator.userAgent);\nexport const DateSteppingLength = 100;\nexport const OneDayMillisecond = 24 * 60 * 60 * 1000;\nexport const DateElementWidth = 40;\nexport const RecordLineHeight = 40;\nconst ScrollBufferLength = 300;\n\ninterface RecordDataContext {\n  records: RecordData[];\n  setRecords: React.Dispatch<React.SetStateAction<RecordData[]>>;\n}\nconst RecordDataContext = createContext<RecordDataContext | undefined>(undefined);\nconst useRecordData = () => {\n  const context = useContext(RecordDataContext);\n  if (!context) {\n    throw new Error('RecordDataContext 不存在');\n  }\n  return context;\n};\n\ninterface TimelineContext {\n  showType: ShowType;\n  setShowType: React.Dispatch<React.SetStateAction<ShowType>>;\n  timelineDates: number[];\n  setTimelineDates: React.Dispatch<React.SetStateAction<number[]>>;\n  dateStepLength: React.MutableRefObject<number>;\n  timelineDatesRef: React.MutableRefObject<number[]>;\n  container: React.MutableRefObject<HTMLDivElement | null>;\n  scrollContainer: React.MutableRefObject<HTMLDivElement | null>;\n  containerScrollLeft: React.MutableRefObject<number | undefined>;\n  draggingRecordId: React.MutableRefObject<string | undefined>;\n  datesContainer: React.MutableRefObject<HTMLDivElement | null>;\n  timelineHeader: React.MutableRefObject<HTMLDivElement | null>;\n  monthContainer: React.MutableRefObject<HTMLDivElement | null>;\n  listRef: React.MutableRefObject<HTMLDivElement | null>;\n}\n\nexport const TimelineContext = createContext<TimelineContext | undefined>(undefined);\n\nexport const useTimeline = () => {\n  const context = useContext(TimelineContext);\n  if (!context) {\n    throw new Error('useBitable');\n  }\n  return context;\n};\n\nexport const useRecord = (uuid: string) => {\n  const { records } = useRecordData();\n  return records.find((record) => record.id === uuid);\n};\n\nexport const TimeLineView: FC = () => {\n  const [showType, setShowType] = useState(ShowType.MONTH);\n  const [timelineDates, setTimelineDates] = useState<number[]>(getTimelineDateRange({ showType }));\n  const container = useRef<HTMLDivElement | null>(null);\n  const scrollContainer = useRef<HTMLDivElement | null>(null);\n  const containerScrollLeft = useRef<number | undefined>();\n  const dateStepLength = useRef<number>(100);\n  const timelineDatesRef = useRef<number[]>(timelineDates);\n  const draggingRecordId = useRef<string | undefined>();\n  const datesContainer = useRef<HTMLDivElement>(null);\n  const timelineHeader = useRef<HTMLDivElement>(null);\n  const monthContainer = useRef<HTMLDivElement>(null);\n  const listRef = useRef<HTMLDivElement>(null);\n  const [records, setRecords] = useState<RecordData[]>(\n    new Array(10).fill(1).map((_, index) => {\n      return {\n        id: String(index + 1),\n        recordStartTime: getDateTimeStamp(Date.now()) + OneDayMillisecond,\n        recordEndTime: getDateTimeStamp(Date.now()) + OneDayMillisecond * 10,\n      };\n    })\n  );\n\n  const context = useMemo(() => {\n    return {\n      showType,\n      setShowType,\n      timelineDatesRef,\n      dateStepLength,\n      timelineDates,\n      setTimelineDates,\n      container,\n      scrollContainer,\n      containerScrollLeft,\n      datesContainer,\n      timelineHeader,\n      monthContainer,\n      listRef,\n      draggingRecordId,\n    };\n  }, [showType, timelineDates]);\n\n  const recordData = useMemo(() => {\n    return {\n      records,\n      setRecords,\n    };\n  }, [records]);\n  // react dependency eslint\n  timelineDatesRef.current = timelineDates;\n  return (\n    <TimelineContext.Provider value={context}>\n      <RecordDataContext.Provider value={recordData}>\n        <TimeLine />\n      </RecordDataContext.Provider>\n    </TimelineContext.Provider>\n  );\n};\n\nexport const TimeLine: FC = () => {\n  const {\n    showType,\n    timelineDates,\n    setTimelineDates,\n    container,\n    scrollContainer,\n    datesContainer,\n    timelineHeader,\n    monthContainer,\n    containerScrollLeft,\n    listRef,\n    dateStepLength,\n  } = useTimeline();\n  const { records } = useRecordData();\n  const [range, setRange] = useState([\n    0,\n    Math.min(window.innerHeight / RecordLineHeight, records.length),\n  ]);\n\n  useLayoutEffect(() => {\n    if (!container.current) return;\n    container.current.scrollLeft =\n      DateElementWidth * dateStepLength.current - container.current.clientWidth / 2;\n  }, [container, dateStepLength]);\n\n  useLayoutEffect(() => {\n    if (!container.current || !containerScrollLeft.current) return;\n\n    container.current.scrollLeft = containerScrollLeft.current;\n    containerScrollLeft.current = undefined;\n  }, [timelineDates, container, containerScrollLeft]);\n\n  useEffect(() => {\n    if (!container.current) return;\n\n    // 处理当前屏幕超宽导致 range 的展示长度不够,需要修改步进长度\n    if (container.current.scrollWidth < container.current.clientWidth * 2) {\n      dateStepLength.current = Math.ceil((container.current.clientWidth * 2) / DateElementWidth);\n      setTimelineDates(\n        getTimelineDateRange({\n          showType,\n          length: dateStepLength.current,\n        })\n      );\n      containerScrollLeft.current =\n        DateElementWidth * dateStepLength.current - container.current.clientWidth / 2;\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [container.current?.clientWidth]);\n\n  useEffect(() => {\n    if (!container.current || !datesContainer.current) return;\n    const containerNode = container.current;\n\n    const handleScroll = () => {\n      if (typeof containerScrollLeft.current !== 'undefined' || !container.current) return;\n\n      if (\n        containerNode.scrollWidth - containerNode.scrollLeft - containerNode.clientWidth <\n        ScrollBufferLength\n      ) {\n        containerScrollLeft.current =\n          container.current.scrollLeft - dateStepLength.current * DateElementWidth;\n        setTimelineDates((dates) => {\n          const lastDay = last(dates) as number;\n          const appendDates = getDateRange({\n            showType,\n            base: lastDay,\n            length: dateStepLength.current,\n            dir: DateDir.NEXT,\n          });\n          const newDates = [...dates.slice(dateStepLength.current), ...appendDates];\n          return newDates;\n        });\n      }\n\n      if (containerNode.scrollLeft < ScrollBufferLength) {\n        containerScrollLeft.current =\n          container.current.scrollLeft + dateStepLength.current * DateElementWidth;\n        setTimelineDates((dates) => {\n          const firstDay = dates[0] as number;\n          const appendDates = getDateRange({\n            showType,\n            base: firstDay,\n            length: dateStepLength.current,\n            dir: DateDir.PREV,\n          });\n          const newDates = [\n            ...appendDates,\n            ...dates.slice(0, dates.length - dateStepLength.current),\n          ];\n          return newDates;\n        });\n      }\n    };\n\n    const scrollFn = IS_IPHONE ? debounce(handleScroll) : throttle(handleScroll, 60);\n    containerNode.addEventListener('scroll', scrollFn);\n    return () => containerNode.removeEventListener('scroll', scrollFn);\n  }, [container, containerScrollLeft, dateStepLength, datesContainer, setTimelineDates, showType]);\n\n  useEffect(() => {\n    const containerNode = container.current;\n    const datesContainerNode = datesContainer.current;\n    const timelineHeaderNode = timelineHeader.current;\n    const monthContainerNode = monthContainer.current;\n    const scrollContainerNode = scrollContainer.current;\n    if (\n      !containerNode ||\n      !datesContainerNode ||\n      !timelineHeaderNode ||\n      !monthContainerNode ||\n      !scrollContainerNode\n    ) {\n      return;\n    }\n\n    const handleScroll = () => {\n      const containerRect = containerNode.getBoundingClientRect();\n      const scrollContainerRect = scrollContainerNode.getBoundingClientRect();\n\n      const translateY = Math.abs(scrollContainerRect.top - containerRect.top);\n      if (translateY > 0) {\n        timelineHeaderNode.style.transform = `translate3d(0,${Math.round(translateY)}px,0)`;\n        monthContainerNode.style.transform = `translate3d(0,${Math.round(translateY)}px,0)`;\n        datesContainerNode.style.transform = `translate3d(0,${Math.round(translateY)}px,0)`;\n      } else {\n        timelineHeaderNode.style.transform = 'none';\n        monthContainerNode.style.transform = 'none';\n        datesContainerNode.style.transform = 'none';\n      }\n    };\n\n    scrollContainerNode.addEventListener('scroll', handleScroll);\n    window.addEventListener('resize', handleScroll);\n    return () => {\n      scrollContainerNode.removeEventListener('scroll', handleScroll);\n      window.removeEventListener('resize', handleScroll);\n    };\n  }, [container, datesContainer, monthContainer, scrollContainer, timelineHeader]);\n\n  useEffect(() => {\n    const scrollContainerNode = scrollContainer.current;\n    const listNode = listRef.current;\n    if (!scrollContainerNode || !listNode) return;\n\n    const handleScroll = () => {\n      const listRect = listNode.getBoundingClientRect();\n      const containerRect = scrollContainerNode.getBoundingClientRect();\n      const visibleLength = Math.ceil(scrollContainerNode.clientHeight / RecordLineHeight) + 10;\n      const hiddenLength = containerRect.top - listRect.top;\n      const startIndex = Math.max(Math.floor(hiddenLength / RecordLineHeight) - 5, 0);\n      setRange([startIndex, startIndex + visibleLength]);\n    };\n\n    handleScroll();\n    scrollContainerNode.addEventListener('scroll', handleScroll);\n    return () => {\n      scrollContainerNode.removeEventListener('scroll', handleScroll);\n    };\n  }, [listRef, scrollContainer]);\n\n  return (\n    <div\n      className='relative w-full timeline-page overflow-scroll'\n      style={{ height: 'calc(100% - 40px)' }}\n      ref={scrollContainer}\n    >\n      <Header ref={timelineHeader} />\n\n      <div className='w-full overflow-auto relative pb-[40px]' ref={container}>\n        <TimelineMonths ref={monthContainer} />\n        <TimelineDates />\n        <TimelineWeekend />\n\n        <div\n          className='record-line-container relative'\n          ref={listRef}\n          style={{\n            width: timelineDates.length * DateElementWidth,\n            height: records.length * RecordLineHeight + RecordLineHeight,\n          }}\n        >\n          {records.slice(range[0], range[1]).map((record, index) => (\n            <RecordLine key={record.id} recordIndex={range[0] + index} {...record} />\n          ))}\n\n          <RecordLine id={NewCardPlaceholderId} recordIndex={records.length} />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst Header = memo(\n  forwardRef<HTMLDivElement>((_, ref) => {\n    const {\n      timelineDates,\n      container,\n      setTimelineDates,\n      dateStepLength,\n      containerScrollLeft,\n      showType,\n      setShowType,\n    } = useTimeline();\n    const [currentMonth, setCurrentMonth] = useState<number>();\n\n    useEffect(() => {\n      const containerNode = container.current;\n      if (!containerNode) return;\n\n      const handleScroll = () => {\n        if (!container.current) return;\n        const dateLength = Math.ceil(container.current.scrollLeft / DateElementWidth);\n        const date = timelineDates[dateLength - 1];\n\n        if (date) {\n          setCurrentMonth((currentMonth) => {\n            const newMonth = new Date(date).setDate(1);\n            if (newMonth !== currentMonth) {\n              return newMonth;\n            }\n            return currentMonth;\n          });\n        }\n      };\n      handleScroll();\n      containerNode.addEventListener('scroll', handleScroll);\n      return () => containerNode.removeEventListener('scroll', handleScroll);\n    }, [container, timelineDates]);\n\n    return (\n      <div className='absolute left-0 right-0 flex items-center z-50 h-8 top-1' ref={ref}>\n        <div className='h-full flex'>\n          {currentMonth && (\n            <span className='bg-white h-full inline-flex items-center'>\n              {formatDate(currentMonth).year}年{formatDate(currentMonth).month}月\n            </span>\n          )}\n\n          <span\n            className='w-10 h-full'\n            style={{\n              backgroundImage: 'linear-gradient(to right, white 20%, rgba(255, 255, 255, 0) 100%)',\n            }}\n          />\n        </div>\n        <div className='ml-auto flex items-center'>\n          <span\n            className='w-10 h-8 inline-block'\n            style={{\n              backgroundImage: 'linear-gradient(to left, white 20%, rgba(255, 255, 255, 0) 100%)',\n            }}\n          />\n\n          <div className='bg-white flex items-center'>\n            <button\n              onClick={() => {\n                if (!container.current) return;\n\n                setShowType(ShowType.YEAR);\n                setTimelineDates(\n                  getTimelineDateRange({\n                    showType: ShowType.YEAR,\n                  })\n                );\n\n                containerScrollLeft.current =\n                  DateElementWidth * dateStepLength.current - container.current.clientWidth / 2;\n              }}\n            >\n              年\n            </button>\n\n            <button\n              onClick={() => {\n                if (!container.current) return;\n\n                setShowType(ShowType.MONTH);\n                setTimelineDates(\n                  getTimelineDateRange({\n                    showType: ShowType.MONTH,\n                  })\n                );\n                containerScrollLeft.current =\n                  DateElementWidth * dateStepLength.current - container.current.clientWidth / 2;\n              }}\n            >\n              月\n            </button>\n            <button\n              onClick={() => {\n                if (container.current) {\n                  container.current.scrollLeft -= 15 * DateElementWidth;\n                }\n              }}\n            >\n              <MdKeyboardArrowLeft className='w-5 h-5' />\n            </button>\n            <button\n              className='bg-white px-2 cursor-pointer'\n              onClick={() => {\n                if (!container.current) return;\n\n                setTimelineDates(\n                  getTimelineDateRange({\n                    showType,\n                    length: dateStepLength.current,\n                  })\n                );\n                containerScrollLeft.current =\n                  DateElementWidth * dateStepLength.current - container.current.clientWidth / 2;\n              }}\n            >\n              今天\n            </button>\n            <button\n              onClick={() => {\n                if (container.current) {\n                  container.current.scrollLeft += 15 * DateElementWidth;\n                }\n              }}\n            >\n              <MdKeyboardArrowRight className='w-5 h-5' />\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }),\n  isEqual\n);\n\nexport interface RecordData {\n  id: string;\n  recordStartTime?: number;\n  recordEndTime?: number;\n}\n\n// #region 三个基础组件\nexport const TimelineMonths = memo(\n  forwardRef<HTMLDivElement>((_, ref) => {\n    const { timelineDates, showType } = useTimeline();\n    return (\n      <div\n        className='timeline-month relative z-10 h-[38px] bg-white text-t2-medium border-t'\n        style={{ width: timelineDates.length * DateElementWidth }}\n        ref={ref}\n      >\n        {timelineDates.map((date, index) => {\n          let shouldRender = false;\n          if (showType === ShowType.MONTH) {\n            shouldRender = new Date(date).getDate() === 1;\n          } else if (showType === ShowType.YEAR) {\n            const monthFirstDate = new Date(new Date(date).setDate(1));\n            const monthFirstSunday =\n              monthFirstDate.getTime() + (7 - monthFirstDate.getDay() || 7) * OneDayMillisecond;\n            shouldRender = monthFirstSunday === date;\n          }\n\n          if (shouldRender) {\n            return (\n              <div\n                key={date}\n                style={{ left: index * DateElementWidth }}\n                className='absolute h-full inline-flex items-center justify-center flex-shrink-0'\n              >\n                {new Date(date).getMonth() + 1}月\n              </div>\n            );\n          }\n\n          return null;\n        })}\n      </div>\n    );\n  }),\n  isEqual\n);\n\nexport const TimelineDates = memo(() => {\n  const { timelineDates, datesContainer, container, showType } = useTimeline();\n  const today = useToday();\n  const [range, setRange] = useState([\n    0,\n    Math.max(Math.ceil(window.innerWidth / DateElementWidth), timelineDates.length),\n  ]);\n\n  useEffect(() => {\n    const scrollContainerNode = container.current;\n    const datesContainerNode = datesContainer.current;\n    if (!scrollContainerNode || !datesContainerNode) return;\n\n    const handleScroll = () => {\n      const containerRect = scrollContainerNode.getBoundingClientRect();\n      const listRect = datesContainerNode.getBoundingClientRect();\n      const visibleLength = Math.ceil(scrollContainerNode.clientWidth / DateElementWidth) + 10;\n      const hiddenLength = containerRect.left - listRect.left;\n      const startIndex = Math.max(Math.floor(hiddenLength / DateElementWidth) - 5, 0);\n      setRange([startIndex, startIndex + visibleLength]);\n    };\n\n    handleScroll();\n    scrollContainerNode.addEventListener('scroll', handleScroll);\n    return () => scrollContainerNode.removeEventListener('scroll', handleScroll);\n  }, [datesContainer, container]);\n\n  const renderToday = () => {\n    const firstDate = timelineDates[0];\n    const dateStep = showType === ShowType.MONTH ? OneDayMillisecond : OneDayMillisecond * 7;\n    const offset = (today - firstDate) / dateStep;\n\n    return (\n      <div\n        className='w-6 h-6 absolute inline-flex justify-center items-center rounded-full bg-green-400 text-white'\n        style={{\n          left: offset * DateElementWidth + 8,\n        }}\n      >\n        {new Date().getDate()}\n        <span className='absolute top-[20px] left-3 h-screen w-[1px] bg-green-400' />\n      </div>\n    );\n  };\n\n  const rangeStart = range[0];\n  const rangeEnd = range[1];\n  const notRenderDates = [today];\n  if (showType === ShowType.YEAR) {\n    const weekday = new Date().getDay();\n    const nextSunday = today + (7 - (weekday || 7)) * OneDayMillisecond;\n    const prevSunday = today - weekday * OneDayMillisecond;\n    notRenderDates.push(prevSunday, nextSunday);\n  }\n  return (\n    <div\n      ref={datesContainer}\n      className='timeline-weekdate relative z-10 h-[38px] py-1.5 bg-white border-b font-medium text-grey4 text-t2-medium'\n      style={{ width: timelineDates.length * DateElementWidth }}\n    >\n      {timelineDates.slice(rangeStart, rangeEnd).map((date, index) => {\n        if (notRenderDates.includes(date)) return null;\n\n        return (\n          <div\n            key={date}\n            className='w-10 h-6  border inline-flex items-center justify-center absolute'\n            style={{\n              left: (rangeStart + index) * DateElementWidth,\n            }}\n          >\n            {formatDate(date).date}\n          </div>\n        );\n      })}\n\n      {renderToday()}\n    </div>\n  );\n}, isEqual);\n\nexport const TimelineWeekend = memo(() => {\n  const { timelineDates, showType } = useTimeline();\n\n  if (showType === ShowType.MONTH) {\n    let backgroundLeft = 0;\n    const firstDate = timelineDates[0] as number;\n    const firstDay = new Date(firstDate).getDay();\n    if (firstDay === 0) {\n      backgroundLeft = -DateElementWidth;\n    } else if (firstDay) {\n      backgroundLeft = (6 - firstDay) * DateElementWidth;\n    }\n    return (\n      <div\n        className='timeline-weekend absolute top-0 h-full'\n        style={{\n          width: timelineDates.length * DateElementWidth,\n          background: `repeating-linear-gradient(90deg, rgb(229,231,235) 0px,rgb(229,231,235) ${\n            DateElementWidth * 2\n          }px, transparent ${DateElementWidth * 2}px,  transparent ${DateElementWidth * 7}px)`,\n          backgroundPositionX: `${backgroundLeft}px`,\n        }}\n      />\n    );\n  } else {\n    return (\n      <div\n        className='timeline-weekend absolute top-0 h-full'\n        style={{\n          width: timelineDates.length * DateElementWidth,\n        }}\n      >\n        {timelineDates.map((date) => {\n          const monthFirstDate = new Date(new Date(date).setDate(1));\n          const monthFirstSunday =\n            monthFirstDate.getTime() + (7 - monthFirstDate.getDay() || 7) * OneDayMillisecond;\n          const shouldRender = monthFirstSunday === date;\n\n          if (shouldRender) {\n            const firstDate = timelineDates[0];\n            const dateStep = OneDayMillisecond * 7;\n            const offset = (monthFirstDate.getTime() - firstDate) / dateStep;\n\n            return (\n              <div\n                key={date}\n                style={{ left: offset * DateElementWidth + DateElementWidth / 2 }}\n                className='absolute h-full bg-gray-400 w-[1px]'\n              />\n            );\n          }\n\n          return null;\n        })}\n      </div>\n    );\n  }\n}, isEqual);\n// #endregion\n\nexport const RecordLine: FC<RecordData & { recordIndex: number }> = memo((props) => {\n  const { id, recordEndTime, recordStartTime, recordIndex } = props;\n  const { setRecords } = useRecordData();\n  const { timelineDates, container, datesContainer, draggingRecordId } = useTimeline();\n  const cardRef = useRef<HTMLDivElement | null>(null);\n  const [movingStartDateIndex, setMovingStartDateIndex] = useState<number>();\n  const initDateRangeLength = 5;\n\n  const handleMouseMove = useCallback(\n    (event: React.MouseEvent) => {\n      if (recordStartTime && recordEndTime) return;\n\n      if (draggingRecordId.current) return;\n      if (!container.current) return;\n\n      const rect = container.current.getBoundingClientRect();\n      const leftDistance = container.current.scrollLeft + event.clientX - rect.x;\n      const dateLength = Math.floor(leftDistance / DateElementWidth);\n      setMovingStartDateIndex(dateLength);\n\n      removeWeekdateHightlight(container.current);\n      addWeekdateHightlight(dateLength, initDateRangeLength, datesContainer.current);\n    },\n    [container, datesContainer, draggingRecordId, recordEndTime, recordStartTime]\n  );\n\n  const handleMouseLeave = useCallback(() => {\n    setMovingStartDateIndex(undefined);\n    removeWeekdateHightlight(container.current);\n  }, [container]);\n\n  const handleMouseClick = useCallback(() => {\n    if (movingStartDateIndex) {\n      const startTime = timelineDates[movingStartDateIndex] as number;\n      const endTime = startTime + (initDateRangeLength - 1) * OneDayMillisecond;\n\n      if (id === NewCardPlaceholderId) {\n        setRecords((records) => records.concat({ id: v4() }));\n      } else {\n        setRecords((records) => {\n          return records.map((record) => {\n            if (record.id === id) {\n              return {\n                id,\n                recordStartTime: startTime,\n                recordEndTime: endTime,\n              };\n            }\n\n            return record;\n          });\n        });\n      }\n\n      setMovingStartDateIndex(undefined);\n      removeWeekdateHightlight(container.current);\n    }\n  }, [container, id, movingStartDateIndex, setRecords, timelineDates]);\n\n  const hasValidDateRange = recordStartTime && recordEndTime;\n\n  return useMemo(() => {\n    return (\n      <div\n        data-disable-select\n        data-record-id={id}\n        onMouseMove={handleMouseMove}\n        onMouseLeave={handleMouseLeave}\n        onClick={handleMouseClick}\n        className={cx('absolute w-full flex h-10', !hasValidDateRange && 'cursor-pointer')}\n        style={{ top: recordIndex * RecordLineHeight }}\n      >\n        {movingStartDateIndex && (\n          <PlaceholderCard\n            recordId={id}\n            initDateRangeLength={initDateRangeLength}\n            movingStartDateIndex={movingStartDateIndex}\n          />\n        )}\n\n        {hasValidDateRange && (\n          <>\n            <IndicatorArrow recordId={id} card={cardRef} />\n            <RecordCard\n              id={id}\n              recordEndTime={recordEndTime}\n              recordStartTime={recordStartTime}\n              card={cardRef}\n            />\n          </>\n        )}\n      </div>\n    );\n  }, [\n    id,\n    handleMouseMove,\n    handleMouseLeave,\n    handleMouseClick,\n    hasValidDateRange,\n    recordIndex,\n    movingStartDateIndex,\n    recordEndTime,\n    recordStartTime,\n  ]);\n}, isEqual);\n\n//#region IndicatorArrow PlaceholderCard RecordCard 三个组件\nexport interface ArrowShowStatus {\n  left: boolean;\n  right: boolean;\n}\nexport enum Direction {\n  left = 'left',\n  right = 'right',\n}\nexport const DirectionMap = [Direction.left, Direction.right];\ninterface IndicatorArrowProps {\n  recordId: string;\n  card: React.MutableRefObject<HTMLDivElement | null>;\n}\n\nexport const IndicatorArrow: FC<IndicatorArrowProps> = memo(({ recordId, card }) => {\n  const { records } = useRecordData();\n  const { showType, setTimelineDates, container, containerScrollLeft, dateStepLength } =\n    useTimeline();\n  const [indicatorArrow, setIndicatorArrow] = useState<ArrowShowStatus>({\n    left: false,\n    right: false,\n  });\n  const recordData = records.find((record) => record.id === recordId);\n\n  const handleScroll = useCallback(() => {\n    if (!container.current || !card.current) return;\n\n    const cardRect = card.current.getBoundingClientRect();\n    const containerRect = container.current.getBoundingClientRect();\n\n    if (\n      indicatorArrow.left !== cardRect.left < containerRect.left ||\n      indicatorArrow.right !== cardRect.right > containerRect.right\n    ) {\n      setIndicatorArrow({\n        left: cardRect.left < containerRect.left,\n        right: cardRect.right > containerRect.right,\n      });\n    }\n  }, [card, container, indicatorArrow.left, indicatorArrow.right]);\n\n  useEffect(() => {\n    if (!container.current) return;\n    const containerNode = container.current;\n\n    containerNode.addEventListener('scroll', handleScroll);\n    return () => containerNode.removeEventListener('scroll', handleScroll);\n  }, [container, handleScroll]);\n\n  useEffect(() => {\n    handleScroll();\n  }, [handleScroll, container.current?.clientWidth]);\n\n  if (!recordData) return null;\n\n  const { recordStartTime, recordEndTime } = recordData;\n  if (!recordStartTime || !recordEndTime) return null;\n\n  const handleClick = (direction: Direction) => {\n    if (!container.current) return;\n\n    const edgeOffset = 100;\n    const isLeftDirection = direction === Direction.left;\n\n    if (isLeftDirection) {\n      containerScrollLeft.current = dateStepLength.current * DateElementWidth - edgeOffset;\n    } else {\n      containerScrollLeft.current =\n        (dateStepLength.current + 1) * DateElementWidth -\n        (container.current.clientWidth - edgeOffset);\n    }\n\n    setTimelineDates(\n      getTimelineDateRange({\n        showType,\n        base: isLeftDirection ? recordStartTime : recordEndTime,\n        length: dateStepLength.current,\n      })\n    );\n    setIndicatorArrow({\n      left: isLeftDirection ? false : indicatorArrow.left,\n      right: isLeftDirection ? indicatorArrow.right : false,\n    });\n  };\n\n  return (\n    <>\n      {DirectionMap.map((direction) => {\n        if (!container.current) return null;\n\n        const isRightDirection = direction === Direction.right;\n        const isShow = isRightDirection ? indicatorArrow.right : indicatorArrow.left;\n\n        return (\n          <button\n            key={direction}\n            onClick={() => handleClick(direction)}\n            className='sticky h-full rounded cursor-pointer duration-200 transition-all flex items-center group z-[5]'\n            style={{\n              left: isRightDirection ? container.current.clientWidth - 32 : 0,\n              opacity: isShow ? 1 : 0,\n              transform: isShow ? 'scale(1)' : 'scale(0)',\n            }}\n          >\n            <BsArrowLeftShort\n              className={cx('text-white bg-black/30 rounded', isRightDirection && 'rotate-180')}\n            />\n\n            <span\n              className={cx(\n                'absolute px-1 flex items-center text-black bg-white border rounded text-t4 opacity-0 group-hover:opacity-100 pointer-events-none',\n                isRightDirection ? 'right-6' : 'left-6'\n              )}\n            >\n              {dayjs(recordStartTime).format(DATE_FORMAT)}\n              <BsArrowRightShort />\n              {dayjs(Math.max(recordStartTime, recordEndTime)).format(DATE_FORMAT)}\n            </span>\n          </button>\n        );\n      })}\n    </>\n  );\n}, isEqual);\n\ninterface PlaceholderCardProps {\n  recordId: string;\n  initDateRangeLength: number;\n  movingStartDateIndex: number;\n}\nexport const PlaceholderCard: FC<PlaceholderCardProps> = ({\n  initDateRangeLength,\n  movingStartDateIndex,\n  recordId,\n}) => {\n  return (\n    <div\n      className='absolute h-[34px] top-0.5 bg-green-100 rounded pointer-events-none px-1.5 flex items-center whitespace-nowrap'\n      style={{\n        width: DateElementWidth * initDateRangeLength,\n        left: movingStartDateIndex * DateElementWidth,\n      }}\n    >\n      <span>+</span>\n      <span className='text-t2 ml-2'>\n        {recordId === NewCardPlaceholderId ? '新建' : '新建事项'}\n      </span>\n    </div>\n  );\n};\n\ninterface RecordCardProps {\n  id: string;\n  recordEndTime: number;\n  recordStartTime: number;\n  card: React.MutableRefObject<HTMLDivElement | null>;\n}\n\nexport const RecordCard: FC<RecordCardProps> = memo(\n  ({ id, recordEndTime, recordStartTime, card }) => {\n    const {\n      showType,\n      container,\n      datesContainer,\n      timelineDates,\n      timelineDatesRef,\n      draggingRecordId,\n      scrollContainer,\n    } = useTimeline();\n    const { setRecords } = useRecordData();\n    const [draggingNewDate, setDraggingNewDate] = useState<number>();\n    const [draggingDirection, setDraggingDirection] = useState<Direction>();\n    const mouseDownPos = useRef({ x: 0, y: 0 });\n\n    useLayoutEffect(() => {\n      if (draggingNewDate && card.current) {\n        const cardStyle = getComputedStyle(card.current);\n        const left = parseInt(cardStyle.getPropertyValue('left'), 10);\n        const width = parseInt(cardStyle.getPropertyValue('width'), 10);\n        const dateIndex = Math.floor(left / DateElementWidth);\n\n        removeWeekdateHightlight(container.current);\n        addWeekdateHightlight(dateIndex, width / DateElementWidth, datesContainer.current);\n      }\n    }, [card, container, datesContainer, draggingNewDate]);\n\n    if (!recordStartTime || !recordEndTime) return null;\n\n    const handleTranslate = (event: React.MouseEvent) => {\n      event.preventDefault();\n      mouseDownPos.current = {\n        x: event.clientX,\n        y: event.clientY,\n      };\n\n      const containerNode = container.current;\n      const cardNode = card.current;\n      const timelinePage = scrollContainer.current;\n      if (!containerNode || !cardNode || !timelinePage) return;\n      const cardStyle = getComputedStyle(cardNode);\n      const cardWidth = parseInt(cardStyle.getPropertyValue('width'), 10);\n      const cardRect = (event.currentTarget as HTMLDivElement).getBoundingClientRect();\n      const deltaCardX = event.clientX - cardRect.left;\n      let lastCursorPos = { x: event.clientX, y: event.clientY };\n      let dragStartDate: number;\n      let isMoving = false;\n      let overlayContainer: HTMLDivElement | undefined;\n      let target: HTMLElement | undefined = undefined;\n\n      const handleMouseMove = (event: MouseEvent) => {\n        lastCursorPos = { x: event.clientX, y: event.clientY };\n        if (!isMoving) {\n          if (\n            Math.abs(event.clientX - mouseDownPos.current.x) < 5 &&\n            Math.abs(event.clientY - mouseDownPos.current.y) < 5\n          ) {\n            return;\n          }\n          isMoving = true;\n          draggingRecordId.current = id;\n          overlayContainer = createOverlay(cardNode);\n        }\n\n        autoScrollX(event.clientX, containerNode);\n        autoScrollY({ y: event.clientY, container: timelinePage });\n\n        const containerRect = containerNode.getBoundingClientRect();\n        const leftDistance =\n          containerNode.scrollLeft + event.clientX - containerRect.x - deltaCardX; // 计算 card 起始时间距离最左端的距离\n        const dateIndex = Math.round(leftDistance / DateElementWidth);\n        const newDate = timelineDatesRef.current[dateIndex] as number;\n        dragStartDate = newDate;\n\n        removeWeekdateHightlight(container.current);\n        addWeekdateHightlight(dateIndex, cardWidth / DateElementWidth, datesContainer.current);\n\n        if (!overlayContainer) return;\n        overlayContainer.style.transform = `translate(${\n          event.clientX - mouseDownPos.current.x\n        }px, ${event.clientY - mouseDownPos.current.y}px)`;\n\n        // 添加拖拽指示线\n        const timelineRecordNodes = containerNode.querySelectorAll(\n          '.record-line-container [data-record-id]'\n        ) as NodeListOf<HTMLElement>;\n        target = addIndicator(overlayContainer, timelineRecordNodes, id);\n      };\n\n      const handleMouseUp = () => {\n        timelinePage.removeEventListener('scroll', handleScroll);\n        document.removeEventListener('mousemove', handleMouseMove);\n        document.removeEventListener('mouseup', handleMouseUp);\n        cancelAnimationFrame(rafX);\n        cancelAnimationFrame(rafY);\n        removeWeekdateHightlight(containerNode);\n        overlayContainer?.remove();\n        draggingRecordId.current = undefined;\n        if (target && target.lastElementChild?.classList.contains('indicator')) {\n          target.lastElementChild.remove();\n        }\n        if (!isMoving) return;\n\n        setRecords((records) => {\n          const oldIndex = records.findIndex((record) => record.id === id);\n          const newIndex = records.findIndex((record) => record.id === target?.dataset.recordId);\n          const newRecords = records.map((record) => {\n            if (record.id === id) {\n              return {\n                id,\n                recordStartTime: dragStartDate,\n                recordEndTime:\n                  dragStartDate + (cardWidth / DateElementWidth - 1) * OneDayMillisecond,\n              };\n            }\n\n            return record;\n          });\n\n          return arrayMove(newRecords, oldIndex, newIndex);\n        });\n      };\n\n      const handleScroll = () => {\n        const containerRect = containerNode.getBoundingClientRect();\n        const leftDistance =\n          containerNode.scrollLeft + lastCursorPos.x - containerRect.x - deltaCardX; // 计算 card 起始时间距离最左端的距离\n        const dateIndex = Math.round(leftDistance / DateElementWidth);\n        const newDate = timelineDatesRef.current[dateIndex] as number;\n        dragStartDate = newDate;\n\n        removeWeekdateHightlight(container.current);\n        addWeekdateHightlight(dateIndex, width / DateElementWidth, datesContainer.current);\n\n        if (!overlayContainer) return;\n        overlayContainer.style.transform = `translate(${\n          lastCursorPos.x - mouseDownPos.current.x\n        }px, ${lastCursorPos.y - mouseDownPos.current.y}px)`;\n\n        // 添加拖拽指示线\n        const timelineRecordNodes = containerNode.querySelectorAll(\n          '.record-line-container [data-record-id]'\n        ) as NodeListOf<HTMLElement>;\n        target = addIndicator(overlayContainer, timelineRecordNodes, id);\n      };\n\n      timelinePage.addEventListener('scroll', handleScroll);\n      document.addEventListener('mousemove', handleMouseMove);\n      document.addEventListener('mouseup', handleMouseUp);\n    };\n\n    const handleMouseDown = (event: React.MouseEvent, direction: Direction) => {\n      event.preventDefault();\n      event.stopPropagation();\n\n      const containerNode = container.current;\n      if (!containerNode) return;\n      setDraggingDirection(direction);\n      const isLeftDirection = direction === Direction.left;\n      let dragEndDate: number;\n      let lastCursorX = event.clientX;\n\n      const updateDraggingNewDate = (clientX: number) => {\n        const rect = containerNode.getBoundingClientRect();\n        const leftDistance = containerNode.scrollLeft + clientX - rect.x;\n        const dateIndex = isLeftDirection\n          ? Math.round(leftDistance / DateElementWidth)\n          : Math.round(leftDistance / DateElementWidth) - 1;\n        const newDate = timelineDatesRef.current[dateIndex] as number;\n        if (!newDate) return;\n\n        if (\n          (isLeftDirection && newDate <= recordEndTime) ||\n          (!isLeftDirection && newDate >= recordStartTime)\n        ) {\n          dragEndDate = newDate;\n          setDraggingNewDate(newDate);\n        }\n      };\n\n      const handleMouseMove = (event: MouseEvent) => {\n        if (!recordEndTime || !recordStartTime) return;\n        lastCursorX = event.clientX;\n        draggingRecordId.current = id;\n\n        autoScrollX(event.clientX, containerNode);\n        updateDraggingNewDate(event.clientX);\n      };\n\n      const handleMouseUp = () => {\n        cancelAnimationFrame(rafX);\n        setDraggingDirection(undefined);\n        setDraggingNewDate(undefined);\n        removeWeekdateHightlight(containerNode);\n        draggingRecordId.current = undefined;\n\n        if (!dragEndDate) return;\n        setRecords((records) => {\n          return records.map((record) => {\n            if (record.id === id) {\n              return {\n                id,\n                recordStartTime: !isLeftDirection ? record.recordStartTime : dragEndDate,\n                recordEndTime: isLeftDirection ? record.recordEndTime : dragEndDate,\n              };\n            }\n\n            return record;\n          });\n        });\n\n        containerNode.removeEventListener('scroll', handleScroll);\n        document.removeEventListener('mousemove', handleMouseMove);\n        document.removeEventListener('mouseup', handleMouseUp);\n      };\n\n      const handleScroll = () => updateDraggingNewDate(lastCursorX);\n\n      containerNode.addEventListener('scroll', handleScroll);\n      document.addEventListener('mousemove', handleMouseMove);\n      document.addEventListener('mouseup', handleMouseUp);\n    };\n\n    // const dateStep = showType === ShowType.MONTH ? OneDayMillisecond : OneDayMillisecond * 7;\n    const oneDateWidth = showType === ShowType.MONTH ? DateElementWidth : DateElementWidth / 7;\n    let left = 0;\n    let width = 0;\n    if (recordStartTime && recordEndTime) {\n      const dayLength =\n        Math.max(getDateTimeStamp(recordEndTime) - getDateTimeStamp(recordStartTime), 0) /\n        OneDayMillisecond;\n      width = (dayLength + 1) * oneDateWidth;\n      left =\n        ((getDateTimeStamp(recordStartTime) - (timelineDates[0] as number)) / OneDayMillisecond) *\n        oneDateWidth;\n\n      // 左右拖拽缩放 block date range 过程中，dates 更新时保持 block 的显示\n      if (draggingDirection && draggingNewDate) {\n        if (draggingDirection === Direction.left && draggingNewDate <= recordEndTime) {\n          const dayLength =\n            Math.max(getDateTimeStamp(recordEndTime) - getDateTimeStamp(draggingNewDate), 0) /\n            OneDayMillisecond;\n          width = (dayLength + 1) * oneDateWidth;\n\n          const newDayIndex = timelineDates.findIndex((date) => date === draggingNewDate);\n          left = newDayIndex * oneDateWidth;\n        }\n\n        if (draggingDirection === Direction.right && draggingNewDate >= recordStartTime) {\n          const dayLength =\n            Math.max(getDateTimeStamp(draggingNewDate) - getDateTimeStamp(recordStartTime), 0) /\n            OneDayMillisecond;\n\n          width = (dayLength + 1) * oneDateWidth;\n        }\n      }\n    }\n\n    return (\n      <div className='absolute overflow-hidden left-0 top-0 w-full h-full flex items-center'>\n        <div\n          ref={card}\n          onMouseDown={handleTranslate}\n          className='absolute h-[34px] border border-black/10 rounded cursor-pointer flex items-center whitespace-nowrap bg-white'\n          style={{\n            left,\n            width,\n            boxShadow: '0px 1px 3px rgba(0, 0, 0, 0.06)',\n          }}\n        >\n          {id}\n          {DirectionMap.map((direction) => {\n            return (\n              <div\n                key={direction}\n                className={cx(\n                  'absolute h-full w-[9px] px-[3px] py-1.5 rounded-full group hover:cursor-col-resize z-10',\n                  draggingDirection && draggingDirection !== direction && 'pointer-events-none',\n                  direction === 'left' ? '-left-1' : '-right-1'\n                )}\n                onMouseDown={(event) => handleMouseDown(event, direction)}\n              >\n                <span\n                  className={cx(\n                    'inline-block w-[3px] h-full rounded-full group-hover:bg-black',\n                    draggingDirection === direction && 'bg-black'\n                  )}\n                />\n                {draggingDirection === direction && draggingNewDate && (\n                  <div\n                    className={cx(\n                      'absolute top-1.5 bg-white text-black rounded px-1 flex items-center text-t4',\n                      direction === 'left' ? 'right-3' : 'left-3'\n                    )}\n                  >\n                    {dayjs(draggingNewDate).format('MM/DD')}\n                  </div>\n                )}\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    );\n  },\n  isEqual\n);\n\n//#endregion\n\n//#region dom\nexport const addWeekdateHightlight = (\n  startIndex: number,\n  length: number,\n  datesContainer: HTMLDivElement | null\n) => {\n  if (!datesContainer) return;\n\n  const allDatesNode = datesContainer.children;\n  let i = 0;\n  while (i < length) {\n    const classNames = ['weekdate-hightlight'];\n    if (i === 0) {\n      classNames.push('weekdate-hightlight-startDate');\n    }\n    if (i === length - 1) {\n      classNames.push('weekdate-hightlight-endDate');\n    }\n\n    const node = allDatesNode[startIndex + i];\n    if (node) {\n      node.classList.add(...classNames);\n    }\n    i++;\n  }\n};\n\nexport const removeWeekdateHightlight = (container: HTMLDivElement | null) => {\n  if (!container) return;\n\n  const nodes = container.querySelectorAll('.weekdate-hightlight');\n  nodes.forEach((node) =>\n    node.classList.remove(\n      'weekdate-hightlight',\n      'weekdate-hightlight-startDate',\n      'weekdate-hightlight-endDate'\n    )\n  );\n};\n\nconst createOverlay = (target: HTMLElement) => {\n  const cardRect = target.getBoundingClientRect();\n  const node = target.cloneNode(true) as HTMLElement;\n  node.style.inset = '0';\n  const overlayContainer = document.createElement('div');\n  overlayContainer.style.position = 'fixed';\n  overlayContainer.style.width = `${cardRect.width}px`;\n  overlayContainer.style.height = `${cardRect.height}px`;\n  overlayContainer.style.top = `${cardRect.top}px`;\n  overlayContainer.style.left = `${cardRect.left}px`;\n  overlayContainer.style.opacity = '0.5';\n  overlayContainer.style.zIndex = '100';\n  overlayContainer.appendChild(node);\n  document.body.appendChild(overlayContainer);\n  return overlayContainer;\n};\n\nconst addIndicator = (\n  overlay: HTMLElement,\n  allNodes: NodeListOf<HTMLElement>,\n  currentId: string\n) => {\n  let target: HTMLElement | undefined;\n  let maxIntersectionRatio = 0;\n\n  const overlayRect = overlay.getBoundingClientRect();\n  allNodes.forEach((node) => {\n    if (node.dataset.recordId === NewCardPlaceholderId) return;\n    const rect = node.getBoundingClientRect();\n    if (node.lastElementChild?.classList.contains('indicator')) {\n      node.lastElementChild.remove();\n    }\n\n    const intersectionRatio = getIntersectionRatio(overlayRect, rect);\n    if (intersectionRatio > maxIntersectionRatio) {\n      maxIntersectionRatio = intersectionRatio;\n      target = node;\n    }\n  });\n\n  const indicator = document.createElement('div');\n  indicator.classList.add('indicator');\n  indicator.style.position = 'absolute';\n  indicator.style.zIndex = '10';\n  indicator.style.width = '100%';\n  indicator.style.height = '4px';\n  indicator.style.backgroundColor = 'rgba(0, 0, 0, 0.3)';\n  if (target && target.dataset.recordId !== currentId) {\n    target.appendChild(indicator);\n  }\n\n  return target;\n};\n\n//#endregion\n\n/**\n * 总结几个难点\n * 1. 无限滚动怎么实现： scrollLeft + 固定大小的时间范围\n * 2. 拖拽的时候拖到边界怎么自动滚动：到达边界时不断设置 scrollLeft 和 scrollTop，使用 requestAnimationFrame 进行更新\n * 3. 怎么实现左右拖拽和上下排序，左右平移：cloneNode 之后，随鼠标移动 transform 改变 node 位置\n * 4. dom 结构怎么组织\n * 5. 月份怎么随着滚动变化: 通过 scrollLeft 大小计算日期 index，通过 index 的到时间值\n */\n\n/**\n * react 性能优化常见方式\n * 1. memo(component)：避免父组件的更新引起子组件不必要的更新\n * 2. 常量可以放到 context 中，不过注意使用 useMemo 包裹一下，避免常量所在的对象每次重新创建导致消费该 context 的组件更新\n * 3. item 子组件如果需要所有 items 数据，可以使用 itemsRef，items 只在组件顶层 render 使用，item 中使用 itemsRef\n * 4. 固定高度的长列表可以使用虚拟列表，节点复用\n */\n\n/**\n * 关于 overflow\n * overlfow 默认是 visible，元素会显示在盒子外面，不会出现滚动条，此时会撑开盒子的\n * 父元素的 scrollHeight。\n * 如果想要让盒子成为一个滚动容器，那么必须设置 overflow。\n */\n\n//  React 会在组件挂载时给 current 属性传入 DOM 元素\n\n/**\n * 节点复用： list container hiddenLength = (container.top - list.top)\n */\n","import { isEqual, sortBy } from 'lodash-es';\nimport React, {\n  createContext,\n  FC,\n  memo,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport { MdKeyboardArrowLeft, MdKeyboardArrowRight } from 'react-icons/md';\nimport { v4 } from 'uuid';\nimport { autoScrollY, rafY } from '../utils/auto-scroll';\nimport { calendarUtil } from '../utils/calender';\nimport { cx } from '../utils/classnames';\nimport { getDateTimeStamp, isToday } from '../utils/dates';\nimport { centerOfRectangle, distanceBetween } from '../utils/intersection-ratio';\nimport { numberToPercent } from '../utils/number';\nimport { OneDayMillisecond } from './timeline';\n\n//#region context 和 interface 部分\nexport enum Direction {\n  left = 'left',\n  right = 'right',\n}\nexport const DirectionMap = [Direction.left, Direction.right];\n\nenum ShowType {\n  SINGLE = 'SINGLE',\n  MULTIPLE = 'MULTIPLE',\n}\ninterface Todo {\n  id: string;\n  startTime?: number;\n  endTime?: number;\n  title?: number;\n}\n\ninterface CalenderContext {\n  showType: ShowType;\n  setShowType: React.Dispatch<React.SetStateAction<ShowType>>;\n  calenderDates: number[];\n  calenderDatesRef: React.MutableRefObject<number[]>;\n  setCalenderDates: React.Dispatch<React.SetStateAction<number[]>>;\n  container: React.MutableRefObject<HTMLDivElement | null>;\n  calenderHeader: React.MutableRefObject<HTMLDivElement | null>;\n}\n\ninterface TodoContext {\n  todoList: Todo[];\n  todoListRef: React.MutableRefObject<Todo[]>;\n  setTodoList: React.Dispatch<React.SetStateAction<Todo[]>>;\n}\nexport const CalenderContext = createContext<CalenderContext | undefined>(undefined);\nexport const TodoContext = createContext<TodoContext | undefined>(undefined);\nexport const useCalender = () => {\n  const context = useContext(CalenderContext);\n  if (!context) {\n    throw new Error('useBitable');\n  }\n  return context;\n};\nexport const useTodoList = () => {\n  const context = useContext(TodoContext);\n  if (!context) {\n    throw new Error('useBitable');\n  }\n  return context;\n};\n\ninterface RenderTodo {\n  id: string;\n  rawStartTime: number;\n  rawEndTime: number;\n  renderStartDate: number;\n  renderEndDate: number;\n  weekStartDate: number;\n  weekEndDate: number;\n  isStartDate: boolean;\n  isEndDate: boolean;\n  order: number;\n}\n\nconst useSelectTodo = (firstDay: number, lastDay: number) => {\n  const { todoList } = useTodoList();\n  const renderTodo: RenderTodo[] = [];\n\n  todoList.forEach(({ startTime: rawStartTime, endTime: rawEndTime, id }) => {\n    if (!rawStartTime || !rawEndTime) return;\n\n    const renderStartDate = rawStartTime || rawEndTime;\n    const renderEndDate = rawEndTime || rawStartTime;\n    if (!renderStartDate || !renderEndDate) return;\n\n    const startDate = getDateTimeStamp(renderStartDate);\n    const endDate = getDateTimeStamp(renderEndDate);\n    if (endDate < firstDay || startDate > lastDay) return;\n\n    const weekStartDate = startDate >= firstDay && startDate <= lastDay ? startDate : firstDay;\n    const weekEndDate = endDate >= firstDay && endDate <= lastDay ? endDate : lastDay;\n\n    renderTodo.push({\n      id,\n      rawStartTime,\n      rawEndTime,\n      renderStartDate,\n      renderEndDate,\n      weekStartDate,\n      weekEndDate,\n      isStartDate: weekStartDate === startDate,\n      isEndDate: weekEndDate === endDate,\n      order: 0,\n    });\n  });\n\n  const sortedTodo = sortBy(renderTodo, (item) => item.weekStartDate);\n  const dateSet: Record<string, number[]> = {};\n  sortedTodo.forEach((card) => {\n    let order = 0;\n    const orderList = dateSet[card.weekStartDate];\n    if (orderList) {\n      order = Object.entries(sortBy(orderList)).findIndex(([key, value]) => Number(key) !== value);\n      order = order === -1 ? orderList.length : order;\n    }\n\n    let nextWeekDay = card.weekStartDate;\n    while (nextWeekDay <= card.weekEndDate) {\n      dateSet[nextWeekDay] = dateSet[nextWeekDay] ?? [];\n      dateSet[nextWeekDay]?.push(order);\n      nextWeekDay += OneDayMillisecond;\n    }\n\n    card.order = order;\n  });\n\n  return sortedTodo;\n};\n\n// #endregion\nexport const CARD_PADDING = 4;\nexport const CARD_GAP = 4;\nexport const PROPERTY_HEIGHT = 22;\nexport const PROPERTY_TOP = 36;\n\nexport const getCardHeight = (length = 1) => {\n  return CARD_PADDING * 2 + PROPERTY_HEIGHT * length + CARD_GAP;\n};\n\nexport const CalenderView: FC = () => {\n  const [showType, setShowType] = useState<ShowType>(ShowType.SINGLE);\n  const [calenderDates, setCalenderDates] = useState<number[]>(\n    showType === ShowType.SINGLE ? getOneMonthDates() : getCalenderDates()\n  );\n  const calenderDatesRef = useRef<number[]>([]);\n  const todoListRef = useRef<Todo[]>([]);\n  const container = useRef<HTMLDivElement | null>(null);\n  const calenderHeader = useRef<HTMLDivElement | null>(null);\n  const [todoList, setTodoList] = useState<Todo[]>([\n    {\n      id: v4(),\n      title: 1,\n      startTime: getDateTimeStamp(Date.now()) + 3 * OneDayMillisecond,\n      endTime: getDateTimeStamp(Date.now()) + 4 * OneDayMillisecond,\n    },\n    {\n      id: v4(),\n      title: 2,\n      startTime: getDateTimeStamp(Date.now()) + 5 * OneDayMillisecond,\n      endTime: getDateTimeStamp(Date.now()) + 6 * OneDayMillisecond,\n    },\n  ]);\n\n  // useMemo 用来优化，避免 todoContextData 变换时产生新的引用引起子组件的 render\n  const calenderContextData = useMemo(() => {\n    return {\n      container,\n      showType,\n      setShowType,\n      calenderDates,\n      setCalenderDates,\n      calenderDatesRef,\n      calenderHeader,\n    };\n  }, [showType, calenderDates]);\n\n  const todoContextData = useMemo(() => {\n    return {\n      todoList,\n      setTodoList,\n      todoListRef,\n    };\n  }, [todoList, setTodoList, todoListRef]);\n\n  todoListRef.current = todoList;\n  calenderDatesRef.current = calenderDates;\n  return (\n    <CalenderContext.Provider value={calenderContextData}>\n      <TodoContext.Provider value={todoContextData}>\n        <Calender />\n      </TodoContext.Provider>\n    </CalenderContext.Provider>\n  );\n};\n\nexport const Calender = () => {\n  const { setTodoList } = useTodoList();\n  const { container, calenderDates, setCalenderDates, showType } = useCalender();\n  const loading = useRef<boolean>(false);\n  const showTypeRef = useRef(showType);\n  showTypeRef.current = showType;\n  const [currentMonth, setCurrentMonth] = useState<number>(getDateTimeStamp(new Date().setDate(1)));\n\n  useEffect(() => {\n    const containerNode = container.current;\n    if (!containerNode) return;\n\n    const handleScroll = () => {\n      if (showTypeRef.current === ShowType.SINGLE) return;\n\n      const containerNode = container.current;\n      if (!containerNode) return;\n\n      if (\n        containerNode.scrollHeight < containerNode.scrollTop + containerNode.clientHeight + 200 &&\n        !loading.current\n      ) {\n        loading.current = true;\n        setCalenderDates((calenderDates) => {\n          return calenderDates.concat(\n            getCalenderDates(\n              'append',\n              (calenderDates[calenderDates.length - 1] as number) + OneDayMillisecond\n            )\n          );\n        });\n      }\n    };\n\n    containerNode.addEventListener('scroll', handleScroll);\n    return () => containerNode.removeEventListener('scroll', handleScroll);\n  }, [container, setCalenderDates, showType]);\n\n  useEffect(() => {\n    if (showType === ShowType.SINGLE) return;\n    loading.current = false;\n\n    const containerNode = container.current;\n    if (!containerNode) return;\n    if (containerNode.scrollHeight <= containerNode.clientHeight) {\n      setCalenderDates((calenderDates) => {\n        return calenderDates.concat(\n          getCalenderDates(\n            'append',\n            (calenderDates[calenderDates.length - 1] as number) + OneDayMillisecond\n          )\n        );\n      });\n    }\n  }, [calenderDates.length, container, setCalenderDates, showType]);\n\n  return (\n    <div\n      className='max-h-full w-full mx-auto flex items-center flex-col overflow-auto relative'\n      style={{\n        background:\n          'linear-gradient(90deg, #f5f5f5 14.285714285%, transparent 14.285714285%, transparent 85.714285714%, #f5f5f5 85.714285714%)',\n      }}\n      ref={container}\n    >\n      <Header currentMonth={currentMonth} setCurrentMonth={setCurrentMonth} />\n      <div className='w-full border-l min-w-max'>\n        {calenderDates.map((value, index) => {\n          if (index % 7 === 0) {\n            return (\n              <Week\n                key={value}\n                dates={calenderDates.slice(index, index + 7)}\n                setCurrentMonth={setCurrentMonth}\n                setTodoList={setTodoList}\n              />\n            );\n          }\n          return null;\n        })}\n      </div>\n    </div>\n  );\n};\n\nconst Header: FC<{\n  currentMonth: number;\n  setCurrentMonth: React.Dispatch<React.SetStateAction<number>>;\n}> = ({ currentMonth, setCurrentMonth }) => {\n  const { calenderHeader, setCalenderDates, container, calenderDates, showType, setShowType } =\n    useCalender();\n\n  useEffect(() => {\n    const containerNode = container.current;\n    if (!containerNode) return;\n\n    highlightCurrentDate(currentMonth, calenderDates, containerNode);\n  }, [calenderDates, container, currentMonth]);\n\n  const handleJump = (target: 'pre' | 'next' | 'today') => {\n    let firstDate = Date.now();\n    if (target === 'today') {\n      const today = new Date();\n      firstDate = today.setDate(1); // 当月第一天\n    } else {\n      const currentMonthObj = new Date(currentMonth);\n      const month = currentMonthObj.getMonth();\n      const newMonth = target === 'pre' ? month - 1 : month + 1;\n      firstDate = currentMonthObj.setMonth(newMonth, 1);\n    }\n\n    setCurrentMonth(firstDate);\n    if (showType === ShowType.SINGLE) {\n      setCalenderDates(getOneMonthDates(firstDate));\n    } else {\n      const containerNode = container.current;\n      if (!containerNode) return;\n\n      setCalenderDates(getCalenderDates('init', firstDate));\n      containerNode.scrollTop = 0;\n    }\n  };\n\n  const dateObj = new Date(currentMonth);\n\n  return (\n    <div\n      className='flex flex-col sticky py-2 top-0 border w-full bg-white z-10 justify-between px-2'\n      ref={calenderHeader}\n    >\n      <div className='flex items-center h-8'>\n        <div className='h-full flex bg-white'>\n          {currentMonth && (\n            <span className='h-full inline-flex items-center'>\n              {dateObj.getFullYear()}年{dateObj.getMonth() + 1}月\n            </span>\n          )}\n        </div>\n        <div className='ml-auto bg-white flex items-center'>\n          <button\n            onClick={() => {\n              const firstDate = Date.now();\n              setCurrentMonth(firstDate);\n              setShowType(ShowType.SINGLE);\n              console.log(getOneMonthDates(firstDate));\n\n              setCalenderDates(getOneMonthDates(firstDate));\n            }}\n            className={cx(showType === ShowType.SINGLE && 'bg-gray-200')}\n          >\n            单月\n          </button>\n          <button\n            onClick={() => {\n              const firstDate = Date.now();\n              setCurrentMonth(firstDate);\n              setShowType(ShowType.MULTIPLE);\n              setCalenderDates(getCalenderDates('init', firstDate));\n            }}\n            className={cx(showType === ShowType.MULTIPLE && 'bg-gray-200')}\n          >\n            多月\n          </button>\n\n          <button onClick={() => handleJump('pre')}>\n            <MdKeyboardArrowLeft className='w-5 h-5' />\n          </button>\n          <button className='bg-white px-2 cursor-pointer' onClick={() => handleJump('today')}>\n            今天\n          </button>\n          <button onClick={() => handleJump('next')}>\n            <MdKeyboardArrowRight className='w-5 h-5' />\n          </button>\n        </div>\n      </div>\n      <div className='flex mt-2'>\n        {'日_一_二_三_四_五_六'.split('_').map((week) => (\n          <div key={week} className='flex-1 text-center'>\n            周{week}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nconst Week: FC<{\n  dates: number[];\n  setCurrentMonth: React.Dispatch<React.SetStateAction<number>>;\n  setTodoList: React.Dispatch<React.SetStateAction<Todo[]>>;\n}> = memo(({ dates, setCurrentMonth, setTodoList }) => {\n  const { container, calenderHeader, showType } = useCalender();\n  const weekRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (showType === ShowType.SINGLE) return;\n\n    const containerNode = container.current;\n    if (!containerNode) return;\n\n    const handleScroll = () => {\n      if (!weekRef.current || !calenderHeader.current) return;\n      const weekRect = weekRef.current?.getBoundingClientRect();\n      const headerRect = calenderHeader.current.getBoundingClientRect();\n      if (headerRect.bottom > weekRect.top && headerRect.bottom < weekRect.bottom) {\n        setCurrentMonth((oldMonth) => {\n          const newMonth = dates[dates.length - 1] + OneDayMillisecond;\n          if (newMonth !== oldMonth) {\n            return getDateTimeStamp(new Date(newMonth).setDate(1));\n          }\n          return oldMonth;\n        });\n      }\n    };\n\n    containerNode.addEventListener('scroll', handleScroll);\n    return () => containerNode.removeEventListener('scroll', handleScroll);\n  }, [calenderHeader, container, dates, setCurrentMonth, showType]);\n\n  return (\n    <div className='flex w-full relative calender-week min-h-[96px]' ref={weekRef}>\n      {dates.map((date) => {\n        return <DateNode key={date} date={date} setTodoList={setTodoList} />;\n      })}\n      <WeekCards firstDay={dates[0]} lastDay={dates[dates.length - 1]} weekRef={weekRef} />\n    </div>\n  );\n}, isEqual);\n\nconst WeekCards: FC<{\n  firstDay: number;\n  lastDay: number;\n  weekRef: React.RefObject<HTMLDivElement>;\n}> = memo(({ firstDay, lastDay, weekRef }) => {\n  const renderTodo = useSelectTodo(firstDay, lastDay);\n\n  useEffect(() => {\n    const weekNodes = weekRef.current;\n    if (!weekNodes) return;\n\n    const minHight = 124;\n    if (renderTodo.length === 0) {\n      weekNodes.style.height = `${minHight}px`;\n    } else {\n      const sum: Record<string, number> = {};\n      renderTodo.forEach((item) => {\n        let time = item.weekStartDate;\n        while (time <= item.weekEndDate) {\n          sum[time] = (sum[time] || 0) + 1;\n          time = time + OneDayMillisecond;\n        }\n      });\n\n      const maxCardNum = Math.max(...Object.values(sum));\n      const height = maxCardNum * getCardHeight() + PROPERTY_TOP;\n      weekNodes.style.height = `${Math.max(height, minHight)}px`;\n    }\n  }, [renderTodo, weekRef]);\n\n  if (renderTodo.length === 0) return null;\n\n  return (\n    <>\n      {renderTodo.map((todo) => (\n        <Card {...todo} weekFirstDay={firstDay} key={todo.id} />\n      ))}\n    </>\n  );\n});\n\nconst Card: FC<RenderTodo & { weekFirstDay: number }> = memo(\n  ({\n    id,\n    renderStartDate,\n    weekStartDate,\n    weekEndDate,\n    weekFirstDay,\n    isStartDate,\n    isEndDate,\n    order,\n  }) => {\n    const { container, calenderDatesRef } = useCalender();\n    const { todoListRef, setTodoList } = useTodoList();\n    const mouseDownPos = useRef({ x: 0, y: 0 });\n\n    const handleStretch = (event: React.MouseEvent, direction: Direction) => {\n      event.preventDefault();\n      event.stopPropagation();\n\n      const containerNode = container.current;\n      if (!containerNode) return;\n      const isLeftDirection = direction === Direction.left;\n      let targetIndex: number | undefined;\n      let lastCursorPos = {\n        x: event.clientX,\n        y: event.clientY,\n      };\n\n      const handleMouseMove = (event: MouseEvent) => {\n        lastCursorPos = {\n          x: event.clientX,\n          y: event.clientY,\n        };\n\n        autoScrollY({ y: event.clientY, container: containerNode });\n\n        // 中心碰撞检测当前 hover 在哪个日期上\n        updateTodo(event.clientX, event.clientY);\n      };\n\n      const handleMouseUp = () => {\n        containerNode.removeEventListener('scroll', handleScroll);\n        document.removeEventListener('mousemove', handleMouseMove);\n        document.removeEventListener('mouseup', handleMouseUp);\n        cancelAnimationFrame(rafY);\n      };\n\n      const handleScroll = () => updateTodo(lastCursorPos.x, lastCursorPos.y);\n\n      const updateTodo = (x: number, y: number) => {\n        let minDistanceToCenter = Infinity;\n        const calenderTodoNodes = containerNode.querySelectorAll(\n          '.calender-date'\n        ) as NodeListOf<HTMLElement>;\n        calenderTodoNodes.forEach((node, index) => {\n          const rect = node.getBoundingClientRect();\n          const distBetween = distanceBetween(centerOfRectangle(rect), { x, y });\n          if (distBetween < minDistanceToCenter) {\n            minDistanceToCenter = distBetween;\n            targetIndex = index;\n          }\n        });\n\n        // 判断条件更新 todoList\n        if (typeof targetIndex === 'undefined') return;\n        const newDate = calenderDatesRef.current[targetIndex];\n        const currentTodo = todoListRef.current.find((todo) => todo.id === id);\n        if (!currentTodo) return;\n\n        if (\n          (isLeftDirection && currentTodo.startTime !== newDate) ||\n          (!isLeftDirection && currentTodo.endTime !== newDate)\n        ) {\n          setTodoList((todoList) => {\n            return todoList.map((todo) => {\n              if (todo.id === id && todo.endTime && todo.startTime) {\n                return {\n                  ...todo,\n                  startTime: isLeftDirection && newDate <= todo.endTime ? newDate : todo.startTime,\n                  endTime: !isLeftDirection && newDate >= todo.startTime ? newDate : todo.endTime,\n                };\n              }\n              return todo;\n            });\n          });\n        }\n      };\n\n      containerNode.addEventListener('scroll', handleScroll);\n      document.addEventListener('mousemove', handleMouseMove);\n      document.addEventListener('mouseup', handleMouseUp);\n    };\n\n    const handleTranslate = (event: React.MouseEvent) => {\n      event.preventDefault();\n      mouseDownPos.current = {\n        x: event.clientX,\n        y: event.clientY,\n      };\n\n      const containerNode = container.current;\n      if (!containerNode) return;\n      // 计算当前落点是第几个日期\n      const sourceTodoNode = event.currentTarget as HTMLElement;\n      const sourceTodoNodeRect = sourceTodoNode.getBoundingClientRect();\n      const dateNodeWidth =\n        sourceTodoNodeRect.width / (parseFloat(sourceTodoNode.style.width) / 100) / 7;\n      const dragStartDate =\n        renderStartDate +\n        Math.floor((event.clientX - sourceTodoNodeRect.left) / dateNodeWidth) * OneDayMillisecond;\n      let isMoving = false;\n      let overlayContainer: HTMLDivElement | undefined;\n      let targetIndex: number | undefined;\n      let lastCursorPos = {\n        x: event.clientX,\n        y: event.clientY,\n      };\n\n      const handleMouseMove = (event: MouseEvent) => {\n        lastCursorPos = {\n          x: event.clientX,\n          y: event.clientY,\n        };\n\n        if (\n          !isMoving &&\n          Math.abs(event.clientX - mouseDownPos.current.x) < 5 &&\n          Math.abs(event.clientY - mouseDownPos.current.y) < 5\n        ) {\n          return;\n        }\n\n        if (!isMoving) {\n          isMoving = true;\n\n          overlayContainer = document.createElement('div');\n          overlayContainer.style.position = 'fixed';\n          overlayContainer.style.inset = '0';\n          overlayContainer.style.zIndex = '100';\n          const currentTodoNodes = containerNode.querySelectorAll(`[data-todo-id=\"${id}\"]`);\n          currentTodoNodes.forEach((node) => {\n            const nodeRect = node.getBoundingClientRect();\n            const clonedNode = node.cloneNode(true) as HTMLElement;\n            clonedNode.style.position = 'absolute';\n            clonedNode.style.width = `${nodeRect.width}px`;\n            clonedNode.style.height = `${nodeRect.height}px`;\n            clonedNode.style.top = `${nodeRect.top}px`;\n            clonedNode.style.left = `${nodeRect.left}px`;\n            overlayContainer?.appendChild(clonedNode);\n          });\n          document.body.appendChild(overlayContainer);\n        }\n\n        autoScrollY({ y: event.clientY, container: containerNode });\n        updatePosition(event.clientX, event.clientY);\n      };\n\n      const updatePosition = (x: number, y: number) => {\n        if (!overlayContainer) return;\n        overlayContainer.style.transform = `translate(${x - mouseDownPos.current.x}px, ${\n          y - mouseDownPos.current.y\n        }px)`;\n\n        // 添加背景色\n        const currentHoverDate = containerNode.querySelector('.calender-date.drag-hover-highlight');\n        currentHoverDate?.classList.remove('drag-hover-highlight');\n        const calenderTodoNodes = containerNode.querySelectorAll(\n          '.calender-date'\n        ) as NodeListOf<HTMLElement>;\n        Array.from(calenderTodoNodes).find((node, index) => {\n          const rect = node.getBoundingClientRect();\n          const isTarget = x >= rect.left && x <= rect.right && y >= rect.top && y <= rect.bottom;\n\n          if (isTarget) {\n            targetIndex = index;\n            node.classList.add('drag-hover-highlight');\n          }\n\n          return isTarget;\n        });\n      };\n\n      const handleMouseUp = () => {\n        containerNode.removeEventListener('scroll', handleScroll);\n        document.removeEventListener('mousemove', handleMouseMove);\n        document.removeEventListener('mouseup', handleMouseUp);\n        cancelAnimationFrame(rafY);\n        overlayContainer?.remove();\n        const currentHoverDate = containerNode.querySelector('.calender-date.drag-hover-highlight');\n        currentHoverDate?.classList.remove('drag-hover-highlight');\n        if (!isMoving) return;\n\n        if (typeof targetIndex === 'undefined') return;\n        const todo = todoListRef.current.find((todo) => todo.id === id);\n        if (!todo || !todo.startTime || !todo.endTime) return;\n\n        const newDropDate = calenderDatesRef.current[targetIndex];\n        if (newDropDate === dragStartDate) return;\n\n        const newStartDate = newDropDate - (dragStartDate - todo.startTime);\n        const newEndTime = newStartDate + todo.endTime - todo.startTime;\n\n        setTodoList((todoList) =>\n          todoList.map((todo) => {\n            if (todo.id === id) {\n              return {\n                ...todo,\n                startTime: newStartDate,\n                endTime: newEndTime,\n              };\n            }\n            return todo;\n          })\n        );\n      };\n\n      const handleScroll = () => {\n        updatePosition(lastCursorPos.x, lastCursorPos.y);\n      };\n\n      containerNode.addEventListener('scroll', handleScroll);\n      document.addEventListener('mousemove', handleMouseMove);\n      document.addEventListener('mouseup', handleMouseUp);\n    };\n\n    const style = {\n      top: order * getCardHeight() + PROPERTY_TOP,\n      left: numberToPercent((weekStartDate - weekFirstDay) / OneDayMillisecond / 7),\n      width: numberToPercent(((weekEndDate - weekStartDate) / OneDayMillisecond + 1) / 7),\n      height: getCardHeight(),\n    };\n    return (\n      <div\n        key={id}\n        data-todo-id={id}\n        className={cx('absolute cursor-pointer pb-1', {\n          'pl-1': isStartDate,\n          'pr-1': isEndDate,\n        })}\n        style={style}\n        onMouseDown={handleTranslate}\n      >\n        <div\n          className={cx('bg-green-300 border h-full relative p-1', {\n            'rounded-l': isStartDate,\n            'rounded-r': isEndDate,\n          })}\n        >\n          <span>{todoListRef.current.find((todo) => todo.id === id)?.title}</span>\n          {DirectionMap.map((direction) => {\n            if (direction === Direction.left && isStartDate) {\n              return (\n                <div\n                  key={direction}\n                  className='absolute h-full top-0 py-0.5 w-[4px] rounded-full hover:bg-black hover:cursor-col-resize z-10 -left-0.5'\n                  onMouseDown={(event) => handleStretch(event, direction)}\n                />\n              );\n            }\n\n            if (direction === Direction.right && isEndDate) {\n              return (\n                <div\n                  key={direction}\n                  className='absolute h-full top-0 py-0.5 w-[4px] rounded-full hover:bg-black hover:cursor-col-resize z-10 -right-0.5'\n                  onMouseDown={(event) => handleStretch(event, direction)}\n                />\n              );\n            }\n          })}\n        </div>\n      </div>\n    );\n  }\n);\n\nconst DateNode: FC<{ date: number; setTodoList: React.Dispatch<React.SetStateAction<Todo[]>> }> =\n  memo(({ date, setTodoList }) => {\n    const today = isToday(date);\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    const dateObj = new Date(date);\n    const result = calendarUtil.solar2lunar(\n      dateObj.getFullYear(),\n      dateObj.getMonth() + 1,\n      dateObj.getDate()\n    );\n\n    return useMemo(() => {\n      return (\n        <div\n          className={\n            'border-r border-b px-2 calender-date flex-1 text-gray-200 text-right flex justify-between group relative'\n          }\n        >\n          <button\n            className='absolute top-0.5 left-10 opacity-0 group-hover:opacity-100 cursor-pointer text-black text-sm w-5 h-5 bg-white border rounded flex items-center text-center'\n            onClick={() => {\n              setTodoList((todoList) => {\n                return todoList.concat({\n                  id: v4(),\n                  title: (todoList[todoList.length - 1].title ?? 0) + 1,\n                  startTime: date,\n                  endTime: date,\n                });\n              });\n            }}\n          >\n            +\n          </button>\n          <span\n            className={cx(\n              today &&\n                'bg-red-500 font-bold inline-block w-6 text-center text-white rounded-full h-6'\n            )}\n          >\n            {dateObj.getDate()}\n          </span>\n          {result !== -1 && (\n            <span className={cx('ml-1 ', (result.lunarFestival || result.Term) && 'text-red-400')}>\n              {result.lunarFestival || result.Term\n                ? result.lunarFestival || result.Term\n                : result.lDay === 1\n                ? result.IMonthCn\n                : result.IDayCn}\n            </span>\n          )}\n        </div>\n      );\n    }, [date, dateObj, result, setTodoList, today]);\n  });\n\nexport const getCalenderDates = (type: 'init' | 'append' = 'init', time?: number) => {\n  let firstSunday = 0,\n    lastSaturday = 0;\n\n  if (type === 'init') {\n    const date = time ? new Date(time) : new Date();\n    const month = date.getMonth(); // 当天所在月\n    const firstDate = date.setMonth(month, 1); // 当月第一天\n    const endDate = date.setMonth(month + 2, 0); // 下个月最后一天\n\n    const firstMonday = getDateTimeStamp(\n      firstDate - ((new Date(firstDate).getDay() || 7) - 1) * OneDayMillisecond\n    );\n    firstSunday = firstMonday - OneDayMillisecond;\n    const lastMonday = getDateTimeStamp(\n      endDate - ((new Date(endDate).getDay() || 7) - 1) * OneDayMillisecond\n    );\n    lastSaturday = lastMonday + OneDayMillisecond * 5;\n  }\n\n  if (type === 'append' && time) {\n    const startDate = new Date(time);\n    const endDate = startDate.setMonth(startDate.getMonth() + 2, 0);\n\n    firstSunday = time;\n    const lastMonday = getDateTimeStamp(\n      endDate - ((new Date(endDate).getDay() || 7) - 1) * OneDayMillisecond\n    );\n    lastSaturday = lastMonday + OneDayMillisecond * 5;\n  }\n\n  const dates = [];\n  let currentDate = firstSunday;\n  while (currentDate <= lastSaturday) {\n    dates.push(currentDate);\n    currentDate += OneDayMillisecond;\n  }\n\n  return dates;\n};\n\nexport const getOneMonthDates = (time: number = Date.now()) => {\n  const date = new Date(time);\n  const month = date.getMonth(); // 当天所在月\n  const firstDate = date.setMonth(month, 1); // 当月第一天\n  const endDate = date.setMonth(month + 1, 0); // 当月最后一天\n  const firstMonday = getDateTimeStamp(\n    firstDate - ((new Date(firstDate).getDay() || 7) - 1) * OneDayMillisecond\n  );\n  const firstSunday = firstMonday - OneDayMillisecond;\n  const lastMonday = getDateTimeStamp(\n    endDate - ((new Date(endDate).getDay() || 7) - 1) * OneDayMillisecond\n  );\n  const lastSaturday = lastMonday + OneDayMillisecond * 5;\n\n  const dates = [];\n  let currentDate = firstSunday;\n  while (currentDate <= lastSaturday) {\n    dates.push(currentDate);\n    currentDate += OneDayMillisecond;\n  }\n\n  return dates;\n};\n\n/**\n * 为当前月的日期数字改颜色，dom 操作用来优化。每个 DateNode 都监听 currentMonth 会导致性能太差\n * @param currentMonth\n * @param calenderDates\n * @param containerNode\n */\nconst highlightCurrentDate = (\n  currentMonth: number,\n  calenderDates: number[],\n  containerNode: HTMLDivElement\n) => {\n  const newMonthFirstDate = getDateTimeStamp(new Date(currentMonth).setDate(1));\n  const newMonthLastDate = getDateTimeStamp(\n    new Date(currentMonth).setMonth(new Date(currentMonth).getMonth() + 1, 0)\n  );\n  const firstDateIndex = calenderDates.indexOf(newMonthFirstDate);\n  const monthLength = (newMonthLastDate - newMonthFirstDate) / OneDayMillisecond + 1;\n  const currentMonthNodes = containerNode.querySelectorAll(\n    '.calender-date.current-month'\n  ) as NodeListOf<HTMLElement>;\n  currentMonthNodes.forEach((node) => {\n    node.classList.remove('current-month');\n  });\n  const calenderTodoNodes = containerNode.querySelectorAll(\n    '.calender-date'\n  ) as NodeListOf<HTMLElement>;\n  Array.from(calenderTodoNodes)\n    .slice(firstDateIndex, firstDateIndex + monthLength)\n    .forEach((node) => {\n      node.classList.add('current-month');\n    });\n};\n\n/**\n * 难点\n * 1. 日历数据计算？ getCalenderDates\n * 2. todo 的 render? useSelectTodo\n * 3. 拉伸过程中性能问题如何解决？ memo + WeekCards\n * 4. context 拆分，避免 todo 数据的变化导致日历的 render 或者使用 useMemo 包裹组件\n */\n\n/**\n * useContext 导致的 render 怎么办？\n * context 拆分只能解决不相干部分不影响。相关两部分，AB两个值，一个组件只依赖 B，但是 A 变的时候依赖B的组件也会render怎么办()\n * 比如：const [currentMonth, setCurrentMonth] = useState<number>(getDateTimeStamp(new Date().setDate(1)));\n * 文章：https://github.com/facebook/react/issues/15156\n */\n\n/**\n * 如何由公历计算得到农历？？\n * 农历没有一个固定的算法可以计算出来，只能通过天文测量提供\n */\n","import { useEffect, useRef } from 'react';\n\nexport const Canvas = () => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  useEffect(() => {\n    if (!canvasRef.current) return;\n\n    // init canvas\n    const canvas = canvasRef.current;\n    const radio = getDeviceRadio();\n    const canvasStyle = getComputedStyle(canvas);\n    canvas.width = Math.floor(parseInt(canvasStyle.getPropertyValue('width')) * radio);\n    canvas.height = Math.floor(parseInt(canvasStyle.getPropertyValue('height')) * radio);\n\n    const ctx = canvasRef.current.getContext('2d');\n    if (!ctx) return;\n    ctx.scale(radio, radio);\n    // 在 canvas 中一个单位实际上就是一个 canvas 像素。这里是在改变单位对应的 canvas 像素，比如 radio 是 2，那么一个单位就会对应两个 canvas 像素\n    ctx.font =\n      '20px -apple-system, BlinkMacSystemFont, \"Segoe UI\", \"Roboto\", \"Oxygen\", \"Ubuntu\", \"Cantarell\", \"Fira Sans\", \"Droid Sans\", \"Helvetica Neue\", sans-serif, PingFang SC';\n\n    // 1. 绘制房子\n    // Set line width\n    ctx.lineWidth = 10;\n\n    // Wall 绘制矩形，只需要知道一个点坐标和矩形的宽高。描边绘制\n    ctx.strokeRect(75, 140, 150, 110);\n\n    // Door 填充绘制\n    ctx.fillRect(130, 190, 40, 60);\n\n    // Roof 开始走路径，跳到某个点，然后开始绘制\n    ctx.beginPath();\n    ctx.moveTo(50, 140);\n    ctx.lineTo(150, 60);\n    ctx.lineTo(250, 140);\n    ctx.closePath();\n    ctx.stroke();\n\n    // 2. 清除某部分区域\n    const newStartPoint = translate({ x: 75, y: 140 }, 250, 0);\n    ctx.clearRect(newStartPoint.x, newStartPoint.y, 150, 110);\n\n    // 3. 写入文字\n    ctx.fillText('this is a house', 80, 300);\n\n    // const gridSize = 50;\n    // const canvasWidth = ctx.canvas.width;\n    // const canvasHeight = ctx.canvas.height;\n    // const row = Math.floor(canvasWidth / gridSize);\n    // const col = Math.floor(canvasWidth / gridSize);\n    // for (let i = 0; i < row; i++) {\n    //   ctx.beginPath();\n    //   ctx.moveTo(0, i * gridSize - 0.5);\n    //   ctx.lineTo(canvasWidth, i * gridSize - 0.5);\n    //   ctx.strokeStyle = \"#ccc\";\n    //   ctx.stroke();\n    // }\n    // for (let i = 0; i < col; i++) {\n    //   ctx.beginPath();\n    //   ctx.moveTo(i * gridSize - 0.5, 0);\n    //   ctx.lineTo(i * gridSize - 0.5, canvasHeight);\n    //   ctx.strokeStyle = \"#ccc\";\n    //   ctx.stroke();\n    // }\n  }, []);\n\n  return (\n    <div className='border'>\n      <canvas ref={canvasRef} style={{ width: 600, height: 600 }}></canvas>\n    </div>\n  );\n};\n\n/**\n * canvas 可用于 绘制形状，文字，图像。使用了 canvas 的产品：石墨文档，腾讯文档，维格表\n *\n * canvas 元素的宽高：https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement\n * 默认是为画布设置的，如果没有显示设置 CSS 宽高，那么将会画布宽高也会作为 CSS 宽高。\n * If no [separate] CSS width is assigned to the <canvas>, then this value will also be used as the width of the\n *  canvas in the length-unit CSS Pixel.\n *\n * CanvasRenderingContext2D：CanvasRenderingContext2D\n *\n * 画笔样式：strokeStyle lineWidth lineJoin lineCap(线端点)\n * 字体样式：font(和CSS相同，大小 颜色 字体族)\n * 添加阴影：shadowXXX\n * 填充样式：fillStyle\n */\n\ninterface Point {\n  x: number;\n  y: number;\n}\n\nconst translate = (point: Point, disX = 0, disY = 0) => {\n  return {\n    x: point.x + disX,\n    y: point.y + disY,\n  };\n};\n\nconst getDeviceRadio = () => {\n  return window.devicePixelRatio;\n};\n","import { useRef, useState } from 'react';\n\nconst mementos: string[] = [];\n\nexport const History = () => {\n  const inputRef = useRef<HTMLInputElement>(null);\n  const [value, setValue] = useState<string>('hello world');\n\n  const handleChange = () => {\n    if (!inputRef.current) return;\n\n    mementos.push(value);\n    setValue(inputRef.current.value);\n  };\n\n  const handleClick = () => {\n    if (!inputRef.current) return;\n\n    const lastMemento = mementos.pop();\n    setValue(lastMemento ? lastMemento : inputRef.current.value);\n  };\n\n  return (\n    <div>\n      <h4> Type some characters and hit Undo </h4>\n      <input value={value} ref={inputRef} onChange={handleChange} />\n      <button onClick={handleClick}>Undo</button>\n    </div>\n  );\n};\n\n// refer: https://stackoverflow.com/questions/54416318/how-to-make-a-undo-redo-function?answertab=modifieddesc#tab-top\n","/* eslint-disable */\nimport { FC } from 'react';\n\nexport const ArrowForward: FC<JSX.IntrinsicElements['svg']> = ({ ...props }) => {\n  return (\n    <svg\n      stroke='currentColor'\n      fill='currentColor'\n      viewBox='0 0 20 20'\n      width='1em'\n      height='1em'\n      xmlns='http://www.w3.org/2000/svg'\n      {...props}\n    >\n      <path\n        fillRule='evenodd'\n        clipRule='evenodd'\n        d='M4.99992 9.99998L14.9999 9.99998V8.99998L4.99992 8.99998V9.99998Z'\n        fill='black'\n      />\n      <path\n        fillRule='evenodd'\n        clipRule='evenodd'\n        d='M14.2929 9.65684L9.6967 5.06064L10.4038 4.35354L15.3536 9.30328C15.5488 9.49855 15.5488 9.81513 15.3536 10.0104L10.4038 14.9601L9.6967 14.253L14.2929 9.65684Z'\n        fill='black'\n      />\n    </svg>\n  );\n};\n\nexport const MenuCopy: FC<JSX.IntrinsicElements['svg']> = ({ ...props }) => {\n  return (\n    <svg\n      stroke='currentColor'\n      fill='currentColor'\n      viewBox='0 0 20 20'\n      width='1em'\n      height='1em'\n      xmlns='http://www.w3.org/2000/svg'\n      {...props}\n    >\n      <path\n        fillRule='evenodd'\n        clipRule='evenodd'\n        d='M11.6762 6.83169V3.06812H12.6762V6.33169H15.9398V7.33169H12.1762C11.9 7.33169 11.6762 7.10784 11.6762 6.83169Z'\n        fill='black'\n      />\n      <path\n        fillRule='evenodd'\n        clipRule='evenodd'\n        d='M16.2933 6.42383C16.387 6.5176 16.4397 6.64477 16.4397 6.77738L16.4397 14.5558C16.4397 14.832 16.2158 15.0558 15.9397 15.0558H12.7804C12.5042 15.0558 12.2804 14.832 12.2804 14.5558C12.2804 14.2797 12.5042 14.0558 12.7804 14.0558H15.4397L15.4397 6.98449L12.0233 3.56812L7.9194 3.56813V5.26249C7.9194 5.53863 7.69554 5.76249 7.4194 5.76249C7.14326 5.76249 6.9194 5.53863 6.9194 5.26249V3.06813C6.9194 2.79199 7.14326 2.56813 7.4194 2.56813L12.2304 2.56812C12.363 2.56811 12.4902 2.62079 12.584 2.71456L16.2933 6.42383Z'\n        fill='black'\n      />\n      <path\n        fillRule='evenodd'\n        clipRule='evenodd'\n        d='M8.27229 9.25275V5.44434H9.27229V8.75275H12.5807V9.75275H8.77229C8.49615 9.75275 8.27229 9.5289 8.27229 9.25275Z'\n        fill='black'\n      />\n      <path\n        fillRule='evenodd'\n        clipRule='evenodd'\n        d='M12.9342 8.79999C13.0279 8.89375 13.0806 9.02093 13.0806 9.15354L13.0806 16.932C13.0806 17.2081 12.8567 17.432 12.5806 17.432H4.0603C3.78416 17.432 3.5603 17.2081 3.5603 16.932L3.5603 5.44429C3.5603 5.16815 3.78415 4.94429 4.0603 4.94429L8.87133 4.94427C9.00394 4.94427 9.13112 4.99695 9.22489 5.09072L12.9342 8.79999ZM12.0806 9.36065L8.66423 5.94428L4.5603 5.94429L4.5603 16.432H12.0806L12.0806 9.36065Z'\n        fill='black'\n      />\n    </svg>\n  );\n};\n\nexport const MenuInsertRight: FC<JSX.IntrinsicElements['svg']> = ({ ...props }) => {\n  return (\n    <svg\n      stroke='currentColor'\n      fill='currentColor'\n      viewBox='0 0 20 20'\n      width='1em'\n      height='1em'\n      xmlns='http://www.w3.org/2000/svg'\n      {...props}\n    >\n      <path\n        fillRule='evenodd'\n        clipRule='evenodd'\n        d='M12.1464 5.35356L12.8535 4.64645L18.2071 10L12.8535 15.3536L12.1464 14.6465L16.2929 10.5H2.50005V9.49997H16.2928L12.1464 5.35356Z'\n        fill='black'\n      />\n    </svg>\n  );\n};\n\nexport const MenuItemHide: FC<JSX.IntrinsicElements['svg']> = ({ ...props }) => {\n  return (\n    <svg\n      stroke='currentColor'\n      fill='currentColor'\n      viewBox='0 0 20 20'\n      width='1em'\n      height='1em'\n      xmlns='http://www.w3.org/2000/svg'\n      {...props}\n    >\n      <path\n        fillRule='evenodd'\n        clipRule='evenodd'\n        d='M17.8064 9.6114C17.9377 9.85672 17.9377 10.1434 17.8064 10.3887C17.1353 11.6426 14.6898 15.5 10 15.5C5.31018 15.5 2.86468 11.6426 2.19363 10.3887C2.06235 10.1434 2.06235 9.85672 2.19363 9.6114C2.86469 8.35749 5.31018 4.50005 10 4.50005C14.6898 4.50005 17.1353 8.35749 17.8064 9.6114ZM13.3809 10.0001C13.3809 11.8673 11.8672 13.3809 10 13.3809C8.13281 13.3809 6.61914 11.8673 6.61914 10.0001C6.61914 8.13285 8.13281 6.61919 10 6.61919C11.8672 6.61919 13.3809 8.13285 13.3809 10.0001ZM10.0002 11.251C10.6911 11.251 11.2511 10.6909 11.2511 10C11.2511 9.30914 10.6911 8.74907 10.0002 8.74907C9.3093 8.74907 8.74922 9.30914 8.74922 10C8.74922 10.6909 9.3093 11.251 10.0002 11.251Z'\n        fill='#828282'\n      />\n    </svg>\n  );\n};\n\nexport const MenuItemShow: FC<JSX.IntrinsicElements['svg']> = ({ ...props }) => {\n  return (\n    <svg\n      stroke='currentColor'\n      fill='currentColor'\n      viewBox='0 0 20 20'\n      width='1em'\n      height='1em'\n      xmlns='http://www.w3.org/2000/svg'\n      {...props}\n    >\n      <path\n        fillRule='evenodd'\n        clipRule='evenodd'\n        d='M16.0103 3.28247L3.28235 16.0104L3.98946 16.7175L6.17723 14.5297C6.17724 14.5297 6.17725 14.5297 6.17725 14.5297L7.98894 12.718C7.98894 12.718 7.98893 12.718 7.98892 12.718L12.7179 7.98902C12.7179 7.98902 12.7179 7.98903 12.7179 7.98903L14.6912 6.01582C14.6912 6.01581 14.6912 6.01581 14.6911 6.01581L16.7174 3.98958L16.0103 3.28247ZM9.99992 4.50002C11.0662 4.50002 12.0165 4.69942 12.8563 5.0223L11.0824 6.79616C10.7426 6.68138 10.3785 6.61916 9.99993 6.61916C8.13273 6.61916 6.61906 8.13282 6.61906 10C6.61906 10.3786 6.68129 10.7426 6.79607 11.0825L4.52294 13.3556C3.28111 12.249 2.52322 11.0047 2.19356 10.3887C2.06227 10.1433 2.06227 9.85669 2.19356 9.61137C2.86461 8.35746 5.3101 4.50002 9.99992 4.50002ZM9.99993 13.3809C9.62131 13.3809 9.25723 13.3186 8.91735 13.2038L7.1435 14.9777C7.98329 15.3006 8.9336 15.5 9.99992 15.5C14.6897 15.5 17.1352 11.6426 17.8063 10.3887C17.9376 10.1433 17.9376 9.85669 17.8063 9.61137C17.4766 8.99537 16.7187 7.75102 15.4768 6.64436L13.2038 8.91744C13.3186 9.25732 13.3808 9.6214 13.3808 10C13.3808 11.8672 11.8671 13.3809 9.99993 13.3809Z'\n        fill='#BDBDBD'\n      />\n    </svg>\n  );\n};\n\nexport const NaviDot: FC<JSX.IntrinsicElements['svg']> = ({ ...props }) => {\n  return (\n    <svg\n      stroke='currentColor'\n      fill='currentColor'\n      viewBox='0 0 20 20'\n      width='1em'\n      height='1em'\n      xmlns='http://www.w3.org/2000/svg'\n      {...props}\n    >\n      <path\n        d='M9.08333 8C8.51256 8 8.0274 8.19977 7.62785 8.59931C7.19977 8.99886 7 9.51256 7 10.0833C7 10.6541 7.19977 11.1393 7.62785 11.5388C8.0274 11.9384 8.51256 12.1381 9.08333 12.1381C9.65411 12.1381 10.1393 11.9384 10.5388 11.5388C10.9384 11.1393 11.1667 10.6541 11.1667 10.0833C11.1667 9.51256 10.9384 8.99886 10.5388 8.59931C10.1393 8.19977 9.65411 8 9.08333 8Z'\n        fill='#828282'\n      />\n    </svg>\n  );\n};\n\nexport const NaviFold: FC<JSX.IntrinsicElements['svg']> = ({ ...props }) => {\n  return (\n    <svg\n      stroke='currentColor'\n      fill='currentColor'\n      viewBox='0 0 20 20'\n      width='1em'\n      height='1em'\n      xmlns='http://www.w3.org/2000/svg'\n      {...props}\n    >\n      <path\n        d='M6.89709 6.88417C6.89709 6.63089 7.19157 6.49159 7.38738 6.65224L11.3644 9.91517C11.5107 10.0352 11.5107 10.259 11.3644 10.379L7.38738 13.642C7.19157 13.8026 6.89709 13.6633 6.89709 13.41L6.89709 6.88417Z'\n        fill='#828282'\n      />\n    </svg>\n  );\n};\n\nexport const NaviUnfold: FC<JSX.IntrinsicElements['svg']> = ({ ...props }) => {\n  return (\n    <svg\n      stroke='currentColor'\n      fill='currentColor'\n      viewBox='0 0 20 20'\n      width='1em'\n      height='1em'\n      xmlns='http://www.w3.org/2000/svg'\n      {...props}\n    >\n      <path\n        d='M11.1601 8.66833C11.4134 8.66833 11.5527 8.96281 11.392 9.15862L8.12908 13.1356C8.00906 13.2819 7.78524 13.2819 7.66522 13.1356L4.40228 9.15862C4.24163 8.96281 4.38094 8.66833 4.63421 8.66834L11.1601 8.66833Z'\n        fill='#828282'\n      />\n    </svg>\n  );\n};\n","import { useEffect } from 'react';\n\nlet permission: NotificationPermission;\n\n/**\n * 1. Notification 仅在 https 下生效\n * 2. 有些浏览器需要用户手动触发通知(firefox)，比如放在 onClick 事件里面，所以在发送通知前最好统一检测\n * 3. 发送通知后浏览器无显示，此时查看系统设置，是否开启 浏览器 的通知[banner 和 alert 的区别就是 banner 是否自动消失]\n * @param title\n * @param desc\n */\nconst sendNotification = async (title: string, desc: string) => {\n  await checkPermission();\n  if (permission === 'granted') {\n    new Notification(title, { dir: 'ltr', body: desc });\n  }\n};\n\nconst checkPermission = async () => {\n  switch (Notification.permission) {\n    case 'default': {\n      permission = await Notification.requestPermission();\n      break;\n    }\n    case 'granted':\n      permission = 'granted';\n      break;\n    case 'denied':\n      permission = 'denied';\n      break;\n  }\n};\n\nexport const NotificationDemo = () => {\n  useEffect(() => {\n    checkPermission();\n  }, []);\n\n  const handleClick = () => {\n    sendNotification('通知标题', '通知描述');\n  };\n  return (\n    <div>\n      <button onClick={handleClick}>点击发送通知</button>\n    </div>\n  );\n};\n","import { clamp } from 'lodash-es';\nimport { FC, useEffect, useRef } from 'react';\nimport { cx } from '../../utils/classnames';\nimport './scroll.css';\n\n/**\n * 对滚动条的设置仅仅在 webkit 内核的浏览器上支持。在 Firefox 和 IE 上面不支持!!!\n * @returns\n */\nexport const Scrollbar = () => {\n  return (\n    <div>\n      <h1 className='mt-4'>系统滚动条</h1>\n      <div className='h-[200px] mt-4 border overflow-auto scrollbar-optimise'>\n        <NumberList />\n      </div>\n\n      <h1 className='mt-4'>自定义滚动条(firefox 和 webkit内核浏览器支持)</h1>\n      <CustomScroll className='mt-4'>\n        <div className='h-[200px] border overflow-auto scrollbar-hidden'>\n          <NumberList />\n        </div>\n      </CustomScroll>\n\n      <h1 className='mt-4'>hover 显示滚动条</h1>\n      <div className='h-[200px] border mt-4 overflow-auto scroll-hover-visible'>\n        <NumberList />\n      </div>\n    </div>\n  );\n};\n\nconst NumberList = () => {\n  return (\n    <div className='w-[10000px] px-4'>\n      {new Array(100).fill(1).map((_, index) => {\n        return (\n          <div className='h-10 border-b flex items-center' key={index}>\n            {index + 1}\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\ntype Props = {\n  className?: string;\n  children: JSX.Element;\n};\n\nconst CustomScroll: FC<Props> = ({ children, className }) => {\n  const container = useRef<HTMLDivElement>(null);\n  const scrollTrack = useRef<HTMLDivElement>(null);\n  const hScrollTrack = useRef<HTMLDivElement>(null);\n  const scrollThumb = useRef<HTMLDivElement>(null);\n  const hScrollThumb = useRef<HTMLDivElement>(null);\n  const raf = useRef(0);\n  const hRaf = useRef(0);\n  const mouseDownPos = useRef({\n    x: 0,\n    y: 0,\n    top: 0,\n    left: 0,\n  });\n\n  useEffect(() => {\n    const scrollThumbNode = scrollThumb.current;\n    const hScrollThumbNode = hScrollThumb.current;\n    const scrollTrackNode = scrollTrack.current;\n    const hScrollTrackNode = hScrollTrack.current;\n    const containerNode = container.current?.firstElementChild as HTMLElement | null;\n    if (\n      !scrollThumbNode ||\n      !hScrollThumbNode ||\n      !scrollTrackNode ||\n      !hScrollTrackNode ||\n      !containerNode\n    ) {\n      return;\n    }\n\n    containerNode.classList.add('scrollbar-hidden');\n\n    const handleScroll = () => {\n      const hasVerticalScroll = containerNode.scrollHeight > containerNode.clientHeight;\n      const hasHorizontalScroll = containerNode.scrollWidth > containerNode.clientWidth;\n\n      console.log(hasVerticalScroll, hasHorizontalScroll);\n\n      /**\n       * 设置滚动条 track 尺寸和位置\n       */\n      const style = getComputedStyle(containerNode);\n      const borderLeftWidth = parseInt(style.borderLeftWidth) || 0;\n      const borderTopWidth = parseInt(style.borderTopWidth) || 0;\n      scrollTrackNode.style.top = `${borderTopWidth}px`;\n      hScrollTrackNode.style.left = `${borderLeftWidth}px`;\n      if (hasVerticalScroll && hasHorizontalScroll) {\n        scrollTrackNode.style.height = 'calc(100% - 12px)';\n        hScrollTrackNode.style.width = 'calc(100% - 12px)';\n      } else {\n        scrollTrackNode.style.height = `${containerNode.clientHeight}px`;\n        hScrollTrackNode.style.width = `${containerNode.clientWidth}px`;\n      }\n\n      /**\n       * 设置滑块尺寸和位置\n       */\n      if (hasVerticalScroll) {\n        const thumbHeight =\n          scrollTrackNode.clientHeight *\n          (scrollTrackNode.clientHeight / containerNode.scrollHeight);\n        const realThumbHeight = Math.max(thumbHeight, 16);\n        const hiddenHeight = containerNode.scrollHeight - containerNode.clientHeight;\n        const blankTrackHeight = scrollTrackNode.clientHeight - realThumbHeight;\n        const thumbTop = blankTrackHeight * (containerNode.scrollTop / hiddenHeight);\n\n        raf.current = requestAnimationFrame(() => {\n          if (raf.current) {\n            cancelAnimationFrame(raf.current);\n          }\n          scrollThumbNode.style.display = 'block';\n          scrollThumbNode.style.height = `${realThumbHeight}px`;\n          scrollThumbNode.style.top = `${thumbTop}px`;\n        });\n      } else {\n        scrollThumbNode.style.display = 'none';\n      }\n\n      if (hasHorizontalScroll) {\n        const thumbWidth =\n          hScrollTrackNode.clientWidth * (hScrollTrackNode.clientWidth / containerNode.scrollWidth);\n        const realThumbWidth = Math.max(thumbWidth, 16);\n        const hiddenWidth = containerNode.scrollWidth - containerNode.clientWidth;\n        const blankTrackWidth = hScrollTrackNode.clientWidth - realThumbWidth;\n        const thumbLeft = blankTrackWidth * (containerNode.scrollLeft / hiddenWidth);\n\n        hRaf.current = requestAnimationFrame(() => {\n          if (hRaf.current) {\n            cancelAnimationFrame(hRaf.current);\n          }\n          hScrollThumbNode.style.display = 'block';\n          hScrollThumbNode.style.width = `${realThumbWidth}px`;\n          hScrollThumbNode.style.left = `${thumbLeft}px`;\n        });\n      } else {\n        hScrollThumbNode.style.display = 'none';\n      }\n    };\n\n    const resizeObserver = new ResizeObserver(handleScroll);\n\n    handleScroll();\n    containerNode.addEventListener('scroll', handleScroll);\n    resizeObserver.observe(containerNode);\n    return () => {\n      containerNode.removeEventListener('scroll', handleScroll);\n      resizeObserver.unobserve(containerNode);\n    };\n  }, []);\n\n  const handleDrag = (event: React.MouseEvent, dir: 'x' | 'y') => {\n    event.preventDefault();\n    const scrollThumbNode = scrollThumb.current;\n    const hScrollThumbNode = hScrollThumb.current;\n    const scrollTrackNode = scrollTrack.current;\n    const hScrollTrackNode = hScrollTrack.current;\n    const containerNode = container.current?.firstElementChild as HTMLElement | null;\n    if (\n      !scrollThumbNode ||\n      !hScrollThumbNode ||\n      !scrollTrackNode ||\n      !hScrollTrackNode ||\n      !containerNode\n    ) {\n      return;\n    }\n\n    mouseDownPos.current = {\n      x: event.clientX,\n      y: event.clientY,\n      top: parseInt(scrollThumbNode.style.top),\n      left: parseInt(hScrollThumbNode.style.left),\n    };\n\n    const handleMouseMove = (event: MouseEvent) => {\n      if (dir === 'y') {\n        const hiddenHeight = containerNode.scrollHeight - containerNode.clientHeight;\n        const blankTrackHeight = scrollTrackNode.clientHeight - scrollThumbNode.offsetWidth;\n        const moveY = event.clientY - mouseDownPos.current.y;\n        const newY = moveY + mouseDownPos.current.top;\n        const top = clamp(newY, 0, blankTrackHeight);\n\n        scrollThumbNode.style.top = `${top}px`;\n        containerNode.scrollTop = hiddenHeight * (top / blankTrackHeight);\n      }\n\n      if (dir === 'x') {\n        const hiddenWidth = containerNode.scrollWidth - containerNode.clientWidth;\n        const blankTrackWidth = hScrollTrackNode.clientWidth - hScrollThumbNode.offsetWidth;\n        const moveX = event.clientX - mouseDownPos.current.x;\n        const newX = moveX + mouseDownPos.current.left;\n        const left = clamp(newX, 0, blankTrackWidth);\n\n        hScrollThumbNode.style.left = `${left}px`;\n        containerNode.scrollLeft = hiddenWidth * (left / blankTrackWidth);\n      }\n    };\n\n    const handleMouseUp = () => {\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n    };\n\n    document.addEventListener('mousemove', handleMouseMove);\n    document.addEventListener('mouseup', handleMouseUp);\n  };\n\n  return (\n    <div className={cx(className, 'relative overflow-hidden')} ref={container}>\n      {children}\n      <div className='absolute top-0 right-0 w-3 h-full' ref={scrollTrack}>\n        <div\n          className='absolute w-2 bg-[#7f7f7f99] rounded-full'\n          ref={scrollThumb}\n          onMouseDown={(event) => handleDrag(event, 'y')}\n        ></div>\n      </div>\n      <div className='absolute left-0 bottom-0 h-3 w-full' ref={hScrollTrack}>\n        <div\n          className='absolute h-2 bg-[#7f7f7f99] rounded-full'\n          ref={hScrollThumb}\n          onMouseDown={(event) => handleDrag(event, 'x')}\n        ></div>\n      </div>\n    </div>\n  );\n};\n\n/**\n * 滚动条固定存在的时候是会占据空间的。所以有了 overlay\n * overlay: 行为与auto相同，但滚动条绘制在内容之上而不是占用空间。 仅在基于WebKit（例如，Safari）和基于Blink的（例如，Chrome或Opera）浏览器中受支持。\n *\n * 滚动条常驻：mdn\n */\n","import { clamp, sum, throttle } from 'lodash-es';\nimport React, { createContext, FC, useContext, useMemo, useRef, useState } from 'react';\nimport { createPortal } from 'react-dom';\nimport { BsArrowDownRight } from 'react-icons/bs';\nimport { v4 } from 'uuid';\nimport { cx } from '../utils/classnames';\nimport { getIntersectionRatio } from '../utils/intersection-ratio';\n\nconst MaxColWidth = 400;\nconst MinColWidth = 80;\nconst MaxRowHeight = 400;\nconst MinRowHeight = 80;\nconst DefaultCellWidth = 80;\nconst DefaultCellHeight = 80;\nconst AreaPrecisionOffset = 100;\n\ninterface Point {\n  x: number;\n  y: number;\n}\ninterface CellData {\n  content: string;\n  colSpan: number;\n  rowSpan: number;\n  isMerged: boolean;\n  colId: string;\n  rowId: string;\n  id: string;\n}\n\ninterface TableCol {\n  width: number;\n  id: string;\n}\n\ninterface TableRow {\n  height: number;\n  id: string;\n}\n\ninterface TableData {\n  tableCol: TableCol[];\n  tableRow: TableRow[];\n  tableContent: CellData[][];\n}\n\ninterface SelectedCellContext {\n  selectedCell: string[];\n  setSelectedCell: React.Dispatch<React.SetStateAction<string[]>>;\n}\nconst SelectedCellContext = createContext<SelectedCellContext | undefined>(undefined);\nconst useSelectedCell = () => {\n  const context = useContext(SelectedCellContext);\n  if (!context) {\n    throw new Error('SelectedCellContext 不存在');\n  }\n\n  return context;\n};\n\ninterface TableDataContext {\n  tableData: TableData;\n  setTableData: React.Dispatch<React.SetStateAction<TableData>>;\n  tableRef: React.MutableRefObject<HTMLTableElement | null>;\n}\nconst TableDataContext = createContext<TableDataContext | undefined>(undefined);\nconst useTableData = () => {\n  const context = useContext(TableDataContext);\n  if (!context) {\n    throw new Error('TableDataContext 不存在');\n  }\n\n  return context;\n};\n\nexport const SimpleTable = () => {\n  const [selectedCell, setSelectedCell] = useState<string[]>([]);\n  const [tableData, setTableData] = useState(initTable());\n  const tableRef = useRef<HTMLTableElement | null>(null);\n\n  const selectedCellContextValue = useMemo(() => {\n    return {\n      selectedCell,\n      setSelectedCell,\n    };\n  }, [selectedCell]);\n\n  const tableDataContextValue = useMemo(() => {\n    return {\n      tableData,\n      setTableData,\n      tableRef,\n    };\n  }, [tableData]);\n\n  return (\n    <SelectedCellContext.Provider value={selectedCellContextValue}>\n      <TableDataContext.Provider value={tableDataContextValue}>\n        <Table />\n      </TableDataContext.Provider>\n    </SelectedCellContext.Provider>\n  );\n};\n\nconst Table = () => {\n  const {\n    tableData: { tableCol, tableRow, tableContent },\n    setTableData,\n    tableRef,\n  } = useTableData();\n  const mouseDownPos = useRef<Point>({ x: 0, y: 0 });\n\n  const handleMouseDown = (event: React.MouseEvent) => {\n    event.preventDefault();\n    mouseDownPos.current = {\n      x: event.clientX,\n      y: event.clientY,\n    };\n\n    let currentNewCol = 0;\n    let currentNewRow = 0;\n    const handleMouseMove = (event: MouseEvent) => {\n      const offsetX = event.clientX - mouseDownPos.current.x;\n      const offsetY = event.clientY - mouseDownPos.current.y;\n\n      let allNewRow = 0,\n        allNewCol = 0,\n        addOrDeleteRow = 0,\n        addOrDeleteCol = 0;\n      if (offsetY > 0) {\n        allNewRow = Math.floor(offsetY / DefaultCellHeight);\n        addOrDeleteRow = allNewRow - currentNewRow;\n        currentNewRow = allNewRow;\n      }\n\n      if (offsetX > 0) {\n        allNewCol = Math.floor(offsetX / DefaultCellWidth);\n        addOrDeleteCol = allNewCol - currentNewCol;\n        currentNewCol = allNewCol;\n      }\n\n      console.log(addOrDeleteRow, addOrDeleteCol);\n\n      if (addOrDeleteRow === 0 && addOrDeleteCol === 0) {\n        return;\n      }\n      setTableData((tableData) => {\n        const { tableCol, tableContent, tableRow } = tableData;\n        let newTableContent = [...tableContent];\n        const newTableRow = [...tableRow];\n        const newTableCol = [...tableCol];\n\n        if (addOrDeleteRow !== 0) {\n          if (addOrDeleteRow > 0) {\n            const newRowId = v4();\n            const newRowContent = newTableCol.map((col) => ({\n              id: v4(),\n              colId: col.id,\n              rowId: newRowId,\n              content: String(allNewRow),\n              colSpan: 1,\n              rowSpan: 1,\n              isMerged: false,\n            }));\n\n            newTableRow.push({ id: newRowId, height: DefaultCellHeight });\n            newTableContent.push(newRowContent);\n          } else {\n            newTableRow.pop();\n            newTableContent.pop();\n          }\n        }\n\n        if (addOrDeleteCol !== 0) {\n          const newColId = v4();\n          newTableContent = newTableContent.map((rowData, index) => {\n            const newRowData = [...rowData];\n            if (addOrDeleteCol > 0) {\n              newRowData.push({\n                id: v4(),\n                colId: newColId,\n                rowId: newTableRow[index].id,\n                content: String(allNewCol),\n                colSpan: 1,\n                rowSpan: 1,\n                isMerged: false,\n              });\n            } else {\n              newRowData.pop();\n            }\n\n            return newRowData;\n          });\n\n          if (addOrDeleteCol > 0) {\n            newTableCol.push({ id: newColId, width: DefaultCellWidth });\n          } else {\n            newTableCol.pop();\n          }\n        }\n\n        return {\n          tableCol: newTableCol,\n          tableRow: newTableRow,\n          tableContent: newTableContent,\n        };\n      });\n    };\n\n    const move = throttle(handleMouseMove, 100);\n    const handleMouseUp = () => {\n      document.removeEventListener('mousemove', move);\n      document.removeEventListener('mouseup', handleMouseUp);\n    };\n\n    document.addEventListener('mousemove', move);\n    document.addEventListener('mouseup', handleMouseUp);\n  };\n\n  return (\n    <div className='relative'>\n      <div className='inline-block relative'>\n        <table className='border-t border-l' ref={tableRef}>\n          <colgroup>\n            {tableCol.map((col) => (\n              <col width={col.width} data-col-id={col.id} key={col.id} />\n            ))}\n          </colgroup>\n\n          <tbody>\n            {tableContent.map((row, index) => (\n              <Row row={tableRow[index]} key={tableRow[index].id} rowData={row} />\n            ))}\n          </tbody>\n        </table>\n\n        <div\n          onMouseDown={handleMouseDown}\n          className='absolute -right-4 hover:bg-gray-200 hover:cursor-move'\n        >\n          <BsArrowDownRight />\n        </div>\n      </div>\n\n      <div>\n        {tableCol.map((col, index) => {\n          return (\n            <ColResize\n              key={col.id}\n              col={col}\n              left={sum(tableCol.slice(0, index + 1).map((col) => col.width)) - 2}\n              tableRef={tableRef}\n              setTableData={setTableData}\n            />\n          );\n        })}\n        {tableRow.map((row, index) => {\n          return (\n            <RowResize\n              key={index}\n              row={row}\n              top={sum(tableRow.slice(0, index + 1).map((row) => row.height)) - 2}\n              width={sum(tableCol.map((col) => col.width))}\n              tableRef={tableRef}\n              setTableData={setTableData}\n            />\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nconst Row: FC<{\n  rowData: CellData[];\n  row: TableRow;\n}> = ({ rowData, row }) => {\n  return (\n    <tr style={{ height: row.height }} data-row-id={row.id}>\n      {rowData.map((cell) => (\n        <Cell key={cell.id} cell={cell} />\n      ))}\n    </tr>\n  );\n};\n\nconst Cell: FC<{ cell: CellData }> = ({ cell }) => {\n  const { tableRef, setTableData } = useTableData();\n  const mouseDownPos = useRef<Point>({ x: 0, y: 0 });\n  const [menuPos, setMenuPos] = useState<Point>();\n  const tdRef = useRef<HTMLTableCellElement | null>(null);\n  const { selectedCell, setSelectedCell } = useSelectedCell();\n  const isSelected = selectedCell.find((id) => id === cell.id);\n\n  if (cell.isMerged) return null;\n\n  const findAllCell = (\n    selectedCellNode: HTMLTableCellElement[],\n    allTableCellNode: NodeListOf<HTMLTableCellElement>,\n    allTableCellNodeRect: Map<HTMLTableCellElement, DOMRect>\n  ): HTMLTableCellElement[] => {\n    if (selectedCellNode.length === 0) return [];\n    if (selectedCellNode.length === 1) {\n      const cellNode = selectedCellNode[0];\n      if (cellNode.colSpan > 1 || cellNode.rowSpan > 1) {\n        return selectedCellNode;\n      }\n\n      return [];\n    }\n\n    let left = Infinity,\n      top = Infinity,\n      right = -Infinity,\n      bottom = -Infinity,\n      sumCellArea = 0;\n    selectedCellNode.forEach((node) => {\n      const rect = allTableCellNodeRect.get(node);\n      if (!rect) return;\n\n      sumCellArea += rect.width * rect.height;\n      left = Math.min(rect.left, left);\n      top = Math.min(rect.top, top);\n      right = Math.max(rect.right, right);\n      bottom = Math.max(rect.bottom, bottom);\n    });\n\n    if (Math.abs((bottom - top) * (right - left) - sumCellArea) > AreaPrecisionOffset) {\n      const newSelectArea = {\n        left,\n        top,\n        width: right - left,\n        height: bottom - top,\n      } as DOMRect;\n\n      const tempNewSelectedCell: HTMLTableCellElement[] = [];\n      allTableCellNode.forEach((node) => {\n        const rect = allTableCellNodeRect.get(node);\n        if (!rect) return;\n\n        const radio = getIntersectionRatio(newSelectArea, rect);\n        if (radio > 0) tempNewSelectedCell.push(node);\n      });\n\n      return findAllCell(tempNewSelectedCell, allTableCellNode, allTableCellNodeRect);\n    }\n\n    return selectedCellNode;\n  };\n\n  const handleMouseDown = (event: React.MouseEvent) => {\n    event.preventDefault();\n\n    if ((event.button === 0 || (event.button === 2 && !isSelected)) && selectedCell.length > 0) {\n      setSelectedCell([]);\n    }\n\n    mouseDownPos.current = {\n      x: event.clientX,\n      y: event.clientY,\n    };\n    let isMoving = false;\n    let tempSelectedCell: HTMLTableCellElement[] = [];\n\n    const handleMouseMove = (event: MouseEvent) => {\n      if (!tableRef.current) return;\n\n      if (!isMoving) {\n        if (\n          Math.abs(event.clientX - mouseDownPos.current.x) < 5 &&\n          Math.abs(event.clientY - mouseDownPos.current.y) < 5\n        ) {\n          return;\n        }\n        isMoving = true;\n      }\n\n      // 碰撞检测 td，给碰撞到的 td 着色\n      // 碰撞完成后需要检测当前选中的 cell 是否能组成一个矩形，如果不能，那么需要修正！！！！\n      const selectArea = {\n        left: Math.min(mouseDownPos.current.x, event.clientX),\n        top: Math.min(mouseDownPos.current.y, event.clientY),\n        width: Math.abs(mouseDownPos.current.x - event.clientX) || 1,\n        height: Math.abs(mouseDownPos.current.y - event.clientY) || 1,\n      } as DOMRect;\n      let newSelectedCell: HTMLTableCellElement[] = [];\n      const allTableCellNode = tableRef.current.querySelectorAll('td');\n      const allTableCellNodeRect = new Map<HTMLTableCellElement, DOMRect>();\n      // 为避免 mousemove 的过程中不断 setState 导致太多的 render, 所以 move 过程中通过 js 添加高亮，mouseup 之后再 setState\n      allTableCellNode.forEach((node) => {\n        const rect = node.getBoundingClientRect();\n        allTableCellNodeRect.set(node, rect);\n        if (node.classList.contains('cell-hover-highlight')) {\n          node.classList.remove('cell-hover-highlight');\n        }\n\n        if (getIntersectionRatio(selectArea, rect) > 0) {\n          newSelectedCell.push(node);\n        }\n      });\n\n      newSelectedCell = findAllCell(newSelectedCell, allTableCellNode, allTableCellNodeRect);\n      newSelectedCell.forEach((node) => node.classList.add('cell-hover-highlight'));\n      tempSelectedCell = newSelectedCell;\n    };\n\n    const handleMouseUp = () => {\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n\n      if (!isMoving) return;\n\n      if (event.button === 0 && tempSelectedCell.length > 0) {\n        const newSelectedCell = tempSelectedCell\n          .map((node) => node.dataset.cellId ?? '')\n          .filter((item): item is string => !!item);\n        setSelectedCell(newSelectedCell);\n      }\n    };\n\n    document.addEventListener('mousemove', handleMouseMove);\n    document.addEventListener('mouseup', handleMouseUp);\n  };\n\n  const handleContextMenu = (event: React.MouseEvent) => {\n    event.preventDefault();\n    if (!tdRef.current) return;\n\n    if (isSelected) {\n      setMenuPos({\n        x: event.clientX,\n        y: event.clientY,\n      });\n    }\n  };\n\n  return (\n    <>\n      <td\n        ref={tdRef}\n        onMouseDown={handleMouseDown}\n        onContextMenu={handleContextMenu}\n        className={cx(\n          'border-r border-b',\n          isSelected && 'cell-hover-highlight',\n          (cell.colSpan > 1 || cell.rowSpan > 1) && 'relative z-50'\n        )}\n        data-cell-id={cell.id}\n        colSpan={cell.colSpan > 1 ? cell.colSpan : undefined}\n        rowSpan={cell.rowSpan > 1 ? cell.rowSpan : undefined}\n      >\n        {cell.content}\n      </td>\n      {menuPos &&\n        createPortal(\n          <TableRightMenu\n            top={menuPos.y}\n            left={menuPos.x}\n            closeModal={() => setMenuPos(undefined)}\n            setTableData={setTableData}\n          />,\n          document.body\n        )}\n    </>\n  );\n};\n\nconst ColResize: FC<{\n  col: TableCol;\n  left: number;\n  tableRef: React.MutableRefObject<HTMLTableElement | null>;\n  setTableData: React.Dispatch<React.SetStateAction<TableData>>;\n}> = ({ col, left, tableRef, setTableData }) => {\n  const resizeRef = useRef<HTMLDivElement | null>(null);\n  const mouseDownPos = useRef<Point>({ x: 0, y: 0 });\n  const handleMouseDown = (event: React.MouseEvent) => {\n    event.preventDefault();\n    mouseDownPos.current = {\n      x: event.clientX,\n      y: event.clientY,\n    };\n\n    let newWidth = 0;\n    const handleMouseMove = (event: MouseEvent) => {\n      if (!resizeRef.current) return;\n      const colgroup = tableRef.current?.querySelector('colgroup');\n      if (!colgroup) return;\n      const colNode = colgroup.querySelector(\n        `col[data-col-id=\"${col.id}\"]`\n      ) as HTMLTableColElement | null;\n      if (!colNode) return;\n\n      let offsetX = event.clientX - mouseDownPos.current.x;\n      offsetX = clamp(offsetX, -(col.width - MinColWidth), MaxColWidth - col.width);\n      newWidth = col.width + offsetX;\n      colNode.style.width = `${newWidth}px`;\n      resizeRef.current.style.opacity = '1';\n      resizeRef.current.style.zIndex = '100';\n      resizeRef.current.style.left = `${left + offsetX}px`;\n    };\n    const handleMouseUp = () => {\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n      if (resizeRef.current) {\n        resizeRef.current.style.opacity = '0';\n        resizeRef.current.style.zIndex = 'unset';\n      }\n\n      setTableData((tableData) => {\n        const newTableCol = tableData.tableCol.map((item) => {\n          if (item.id === col.id) {\n            return {\n              ...item,\n              width: newWidth,\n            };\n          }\n          return item;\n        });\n\n        return {\n          ...tableData,\n          tableCol: newTableCol,\n        };\n      });\n    };\n\n    document.addEventListener('mousemove', handleMouseMove);\n    document.addEventListener('mouseup', handleMouseUp);\n  };\n\n  return (\n    <div\n      ref={resizeRef}\n      onMouseDown={handleMouseDown}\n      className='absolute top-0 w-1 bg-black h-full cursor-[col-resize]'\n      style={{ left, opacity: 0 }}\n    />\n  );\n};\n\nconst RowResize: FC<{\n  row: TableRow;\n  top: number;\n  width: number;\n  tableRef: React.MutableRefObject<HTMLTableElement | null>;\n  setTableData: React.Dispatch<React.SetStateAction<TableData>>;\n}> = ({ row, top, width, tableRef, setTableData }) => {\n  const resizeRef = useRef<HTMLDivElement | null>(null);\n  const mouseDownPos = useRef<Point>({ x: 0, y: 0 });\n  const handleMouseDown = (event: React.MouseEvent) => {\n    event.preventDefault();\n    mouseDownPos.current = {\n      x: event.clientX,\n      y: event.clientY,\n    };\n\n    let newHeight = 0;\n    const handleMouseMove = (event: MouseEvent) => {\n      if (!tableRef.current || !resizeRef.current) return;\n      const tr = tableRef.current.querySelector(\n        `tbody tr[data-row-id=\"${row.id}\"]`\n      ) as HTMLElement | null;\n      if (!tr) return;\n\n      let offsetY = event.clientY - mouseDownPos.current.y;\n      offsetY = clamp(offsetY, -(row.height - MinRowHeight), MaxRowHeight - row.height);\n      newHeight = row.height + offsetY;\n      tr.style.height = `${newHeight}px`;\n      resizeRef.current.style.opacity = '1';\n      resizeRef.current.style.zIndex = '100';\n      resizeRef.current.style.top = `${top + offsetY}px`;\n    };\n    const handleMouseUp = () => {\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n      if (resizeRef.current) {\n        resizeRef.current.style.opacity = '0';\n        resizeRef.current.style.zIndex = 'unset';\n      }\n\n      setTableData((tableData) => {\n        const newTableRow = tableData.tableRow.map((item) => {\n          if (item.id === row.id) {\n            return {\n              id: item.id,\n              height: newHeight,\n            };\n          }\n          return item;\n        });\n\n        return {\n          ...tableData,\n          tableRow: newTableRow,\n        };\n      });\n    };\n\n    document.addEventListener('mousemove', handleMouseMove);\n    document.addEventListener('mouseup', handleMouseUp);\n  };\n\n  return (\n    <div\n      ref={resizeRef}\n      onMouseDown={handleMouseDown}\n      className='absolute left-0 h-1 bg-black w-full cursor-[row-resize]'\n      style={{\n        top,\n        width,\n        opacity: 0,\n      }}\n    />\n  );\n};\n\nconst TableRightMenu: FC<{\n  left: number;\n  top: number;\n  closeModal: () => void;\n  setTableData: React.Dispatch<React.SetStateAction<TableData>>;\n}> = ({ left, top, closeModal, setTableData }) => {\n  const { selectedCell, setSelectedCell } = useSelectedCell();\n\n  const menuItems = [\n    {\n      title: '向上插入一行',\n      type: 'inset_top',\n    },\n    {\n      title: '向下插入一行',\n      type: 'inset_bottom',\n    },\n    {\n      title: '向左插入一行',\n      type: 'insert_left',\n    },\n    {\n      title: '向右插入一列',\n      type: 'insert_right',\n    },\n    {\n      title: selectedCell.length > 1 ? '合并单元格' : '取消合并单元格',\n      type: selectedCell.length > 1 ? 'merge' : 'split',\n    },\n    {\n      title: '删除列',\n      type: 'delete_col',\n    },\n    {\n      title: '删除行',\n      type: 'delete_row',\n    },\n  ];\n\n  const handleClick = ({ type }: { type: string }) => {\n    setTableData((tableData) => {\n      const { tableCol, tableContent, tableRow } = tableData;\n      const firstCellId = selectedCell[0];\n      let rightColIndex = 0;\n      let lastRowIndex = 0;\n      let topRowIndex = 0;\n      let leftColIndex = 0;\n      tableContent.forEach((rowData, rowIndex) => {\n        rowData.forEach((cell, colIndex) => {\n          if (cell.id === selectedCell[0]) {\n            topRowIndex = rowIndex;\n            leftColIndex = colIndex;\n          }\n          if (selectedCell.includes(cell.id)) {\n            rightColIndex = Math.max(cell.colSpan + colIndex - 1, rightColIndex);\n            lastRowIndex = Math.max(cell.rowSpan + rowIndex - 1, lastRowIndex);\n          }\n        });\n      });\n\n      switch (type) {\n        case 'inset_top':\n        case 'inset_bottom': {\n          const isInsertTop = type === 'inset_top';\n          const newRowId = v4();\n          const newTableRow = tableRow.slice(0);\n          const newTableContent = tableContent.slice();\n          const newRowContent = tableCol.map((col) => ({\n            id: v4(),\n            colId: col.id,\n            rowId: newRowId,\n            content: '2',\n            colSpan: 1,\n            rowSpan: 1,\n            isMerged: false,\n          }));\n\n          newTableRow.splice(isInsertTop ? topRowIndex : lastRowIndex + 1, 0, {\n            id: newRowId,\n            height: 100,\n          });\n          newTableContent.splice(isInsertTop ? topRowIndex : lastRowIndex + 1, 0, newRowContent);\n          return {\n            tableCol,\n            tableRow: newTableRow,\n            tableContent: newTableContent,\n          };\n        }\n        case 'insert_left':\n        case 'insert_right': {\n          const isInsertLeft = type === 'insert_left';\n\n          const newColId = v4();\n          const newTableCol = tableCol.slice(0);\n          const newTableContent = tableContent.map((rowData, index) => {\n            const newRowData = [...rowData];\n            newRowData.splice(isInsertLeft ? leftColIndex : rightColIndex + 1, 0, {\n              id: v4(),\n              colId: newColId,\n              rowId: tableRow[index].id,\n              content: '3',\n              colSpan: 1,\n              rowSpan: 1,\n              isMerged: false,\n            });\n\n            return newRowData;\n          });\n\n          newTableCol.splice(isInsertLeft ? leftColIndex : rightColIndex + 1, 0, {\n            id: newColId,\n            width: DefaultCellWidth,\n          });\n          return {\n            tableCol: newTableCol,\n            tableRow,\n            tableContent: newTableContent,\n          };\n        }\n        case 'merge': {\n          const newTableContent = tableContent.map((rowData) => {\n            return rowData.map((cell) => {\n              if (firstCellId === cell.id) {\n                return {\n                  ...cell,\n                  colSpan: rightColIndex - leftColIndex + 1,\n                  rowSpan: lastRowIndex - topRowIndex + 1,\n                };\n              }\n\n              if (selectedCell.includes(cell.id)) {\n                return {\n                  ...cell,\n                  isMerged: true,\n                };\n              }\n\n              return cell;\n            });\n          });\n          setSelectedCell([firstCellId]);\n          return {\n            tableCol,\n            tableRow,\n            tableContent: newTableContent,\n          };\n        }\n        case 'split': {\n          const newSelectedCell: string[] = [];\n          const newTableContent = tableContent.map((rowData, rowIndex) => {\n            if (rowIndex >= topRowIndex && rowIndex <= lastRowIndex) {\n              return rowData.map((cell, colIndex) => {\n                if (colIndex >= leftColIndex && colIndex <= rightColIndex) {\n                  newSelectedCell.push(cell.id);\n                  return {\n                    ...cell,\n                    colSpan: 1,\n                    rowSpan: 1,\n                    isMerged: false,\n                  };\n                }\n\n                return cell;\n              });\n            }\n            return rowData;\n          });\n\n          setSelectedCell(newSelectedCell);\n          return {\n            tableCol,\n            tableRow,\n            tableContent: newTableContent,\n          };\n        }\n        case 'delete_col': {\n          const newTableCol = tableCol.filter(\n            (_, index) => index < leftColIndex || index > rightColIndex\n          );\n          const newTableContent = tableContent.map((rowData) =>\n            rowData.filter((_, index) => index < leftColIndex || index > rightColIndex)\n          );\n\n          if (newTableCol.length === 0) {\n            // TODO：删除表格\n          }\n\n          return {\n            tableCol: newTableCol,\n            tableRow,\n            tableContent: newTableContent,\n          };\n        }\n        case 'delete_row': {\n          const newTableRow = tableRow.filter(\n            (_, index) => index < topRowIndex || index > lastRowIndex\n          );\n          const newTableContent = tableContent.filter(\n            (_, index) => index < topRowIndex || index > lastRowIndex\n          );\n\n          return {\n            tableCol,\n            tableRow: newTableRow,\n            tableContent: newTableContent,\n          };\n        }\n        default:\n          return tableData;\n      }\n    });\n    closeModal();\n  };\n  return (\n    <div className='fixed w-full h-full top-0 left-0 z-[1000]' onClick={closeModal}>\n      <div\n        className='absolute py-2 bg-white shadow-lg rounded-md w-[120px]'\n        style={{ left: left + 8, top: top + 8 }}\n        onClick={(event) => event.stopPropagation()}\n      >\n        {menuItems.map((item) => {\n          return (\n            <div\n              key={item.type}\n              className='text-sm h-10 flex items-center hover:bg-red-100 px-2 cursor-pointer'\n              onClick={() => handleClick(item)}\n            >\n              {item.title}\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nconst initTable = (): TableData => {\n  const tableCol = [\n    { width: DefaultCellWidth, id: v4() },\n    { width: DefaultCellWidth, id: v4() },\n    { width: DefaultCellWidth, id: v4() },\n  ];\n  const tableRow = [\n    { height: DefaultCellHeight, id: v4() },\n    { height: DefaultCellHeight, id: v4() },\n  ];\n  const tableContent = [\n    [\n      {\n        id: v4(),\n        colId: tableCol[0].id,\n        rowId: tableRow[0].id,\n        content: '1',\n        colSpan: 1,\n        rowSpan: 1,\n        isMerged: false,\n      },\n      {\n        id: v4(),\n        colId: tableCol[1].id,\n        rowId: tableRow[0].id,\n        content: '1',\n        colSpan: 1,\n        rowSpan: 1,\n        isMerged: false,\n      },\n      {\n        id: v4(),\n        colId: tableCol[2].id,\n        rowId: tableRow[0].id,\n        content: '1',\n        colSpan: 1,\n        rowSpan: 1,\n        isMerged: false,\n      },\n    ],\n    [\n      {\n        id: v4(),\n        colId: tableCol[0].id,\n        rowId: tableRow[1].id,\n        content: '1',\n        colSpan: 1,\n        rowSpan: 1,\n        isMerged: false,\n      },\n      {\n        id: v4(),\n        colId: tableCol[1].id,\n        rowId: tableRow[1].id,\n        content: '1',\n        colSpan: 1,\n        rowSpan: 1,\n        isMerged: false,\n      },\n      {\n        id: v4(),\n        colId: tableCol[2].id,\n        rowId: tableRow[1].id,\n        content: '1',\n        colSpan: 1,\n        rowSpan: 1,\n        isMerged: false,\n      },\n    ],\n  ];\n\n  return {\n    tableCol,\n    tableRow,\n    tableContent,\n  };\n};\n\nexport const findIndexInParentElement = (element: HTMLElement) => {\n  let index = 0;\n  let tempElement: HTMLElement | null = element.previousElementSibling as HTMLElement | null;\n  while (tempElement != null) {\n    index++;\n    tempElement = tempElement.previousElementSibling as HTMLElement | null;\n  }\n\n  return index;\n};\n\n/**\n * 参考石墨，ones，语雀，都是用的 table，只有用 table 才能很好的解决跨行和跨列的问题。\n * 否则只有通过绝对定位对每一个cell进行定位, 才能实现跨行的效果\n *\n * 行和列都需要id，否则在上下插入行的时候就没有办法准确定位之前被选中的元素，或者就是在插入的时候同时修改 selectedCell 的数据，麻烦了，不易理解和维护\n * z-index：只在脱离了文档流的元素(定位元素)上起作用，所以 z-index 总是配合 position 和 float 一起使用。https://www.cnblogs.com/wuxunyan/p/9282447.html\n *\n * 拖拽过程中的 ui 变化使用 dom api 去操作，拖拽结束后的状态保持使用 state 去控制，可以避免 dom 的频繁 render。\n * 难点：在框选表格的过程中，使用面积比较法去选择所有应该被选中的单元格\n */\n","import { v4 } from 'uuid';\nimport faker from '@faker-js/faker';\n\nexport const generateData = (len: number) => {\n  return new Array(len).fill(1).map((value, index) => {\n    return {\n      id: v4(),\n      index: index + 1,\n      content: faker.lorem.sentences(),\n    };\n  });\n};\n\ninterface Data {\n  id: string;\n  index: number;\n  content: string;\n}\n\nexport const generateMapData = (len: number) => {\n  const dataMap: Record<string, Data> = {};\n  const idList: string[] = [];\n  const dataList: Data[] = [];\n\n  new Array(len).fill(1).map((value, index) => {\n    const id = v4();\n    const data = {\n      id,\n      index: index + 1,\n      content: faker.lorem.sentences(),\n    };\n\n    dataList.push(data);\n    idList.push(id);\n    dataMap[id] = data;\n  });\n\n  return { idList, dataList, dataMap };\n};\n","import { useEffect, useRef, useState } from 'react';\nimport { generateMapData } from '../../utils/mock';\n\nconst ESTIMATE_ROW_HEIGHT = 40;\nexport const BUFFER_SIZE = 5;\n\ninterface CachePosition {\n  id: string;\n  bottom: number;\n  height: number;\n  diffHeight: number;\n}\n\nconst { idList, dataList, dataMap } = generateMapData(1000);\n\nexport const DynamicVisualList = () => {\n  const [list] = useState(dataList);\n  const scrollContainerRef = useRef<HTMLDivElement>(null);\n  const visualContentRef = useRef<HTMLDivElement>(null);\n  const actualContentRef = useRef<HTMLDivElement>(null);\n  const cachedPositions = useRef<CachePosition[]>([]);\n  const [range, setRange] = useState([\n    0,\n    Math.min(Math.ceil(window.innerHeight / ESTIMATE_ROW_HEIGHT), list.length),\n  ]);\n\n  useEffect(() => {\n    list.forEach((item, index) => {\n      const position = {\n        id: item.id,\n        bottom: (index + 1) * ESTIMATE_ROW_HEIGHT,\n        height: ESTIMATE_ROW_HEIGHT,\n        diffHeight: 0,\n      };\n      cachedPositions.current.push(position);\n    });\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    const visualContent = visualContentRef.current;\n    if (!visualContent) return;\n    visualContent.style.height = `${list.length * ESTIMATE_ROW_HEIGHT}px`;\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    const scrollContainer = scrollContainerRef.current;\n    const actualContent = actualContentRef.current;\n    const visualContent = visualContentRef.current;\n    if (!scrollContainer || !actualContent || !visualContent) return;\n\n    const getStartIndex = (scrollTop: number) => {\n      const positionList = cachedPositions.current;\n      let start = 0;\n      let end = positionList.length - 1;\n      let tempIndex = 0;\n\n      while (start <= end) {\n        tempIndex = Math.floor((start + end) / 2);\n        const midValue = positionList[tempIndex];\n\n        if (midValue.bottom === scrollTop) break;\n        if (midValue.bottom < scrollTop) start = tempIndex + 1;\n        if (midValue.bottom > scrollTop) end = tempIndex - 1;\n      }\n\n      const target = cachedPositions.current[tempIndex];\n      if (target.bottom < scrollTop) tempIndex++;\n\n      return tempIndex;\n    };\n\n    const handleScroll = () => {\n      const scrollContainerRect = scrollContainer.getBoundingClientRect();\n      const visualContentRect = visualContent.getBoundingClientRect();\n      const scrollTop = scrollContainerRect.top - visualContentRect.top;\n      const minVisibleLength = Math.ceil(scrollContainer.clientHeight / ESTIMATE_ROW_HEIGHT);\n      const currentStartIndex = getStartIndex(scrollTop);\n      const newStartIndex = Math.max(currentStartIndex - BUFFER_SIZE, 0);\n\n      setRange((range) => {\n        if (range[0] === newStartIndex) return range;\n        return [newStartIndex, newStartIndex + minVisibleLength + BUFFER_SIZE];\n      });\n    };\n\n    scrollContainer.addEventListener('scroll', handleScroll);\n    return () => {\n      scrollContainer.removeEventListener('scroll', handleScroll);\n    };\n  }, []);\n\n  useEffect(() => {\n    const actualContent = actualContentRef.current;\n    const visualContent = visualContentRef.current;\n    if (!actualContent || !visualContent) return;\n    const childrenNodes = actualContent.childNodes as NodeListOf<HTMLDivElement>;\n\n    childrenNodes.forEach((node) => {\n      const index = Number(node.dataset.index);\n      const originHeight = cachedPositions.current[index].height;\n      const realHeight = node.offsetHeight;\n      const diffHeight = originHeight - realHeight; // 想象成真实的高度不及预估的高度\n\n      if (diffHeight !== 0) {\n        cachedPositions.current[index].height = realHeight;\n        cachedPositions.current[index].diffHeight = diffHeight;\n      }\n    });\n\n    let cumulativeDiffHeight = 0;\n    const firstNode = childrenNodes[0];\n    const startIndex = Number(firstNode.dataset.index);\n    const cachedPositionsLen = cachedPositions.current.length;\n    for (let i = startIndex; i < cachedPositionsLen; i++) {\n      const item = cachedPositions.current[i];\n\n      if (item.diffHeight !== 0) {\n        cumulativeDiffHeight += item.diffHeight;\n        item.diffHeight = 0;\n      }\n\n      item.bottom = item.bottom - cumulativeDiffHeight;\n    }\n\n    const height = cachedPositions.current[cachedPositionsLen - 1].bottom;\n    visualContent.style.height = `${height}px`;\n  }, [range]);\n\n  const renderContent = (startIndex: number, endIndex: number) => {\n    return (\n      <>\n        {list.slice(startIndex, endIndex).map((item, index) => {\n          return (\n            <div\n              className='p-2 border-b'\n              key={startIndex + index}\n              data-index={startIndex + index}\n              data-uuid={item.id}\n            >\n              <span className='text-[blue] font-bold'>{item.index}</span> {item.content}\n            </div>\n          );\n        })}\n      </>\n    );\n  };\n\n  const startIndex = range[0];\n  const endIndex = range[1];\n  const transform = `translate3d(0,${\n    startIndex >= 1 ? cachedPositions.current[startIndex - 1].bottom : 0\n  }px,0)`;\n\n  // return (\n  //   <div ref={scrollContainerRef} className='h-[1000px] w-[600px] border relative overflow-auto'>\n  //     {renderContent(0, 5)}\n\n  //     <div className='h-[200px] border m-2 flex items-center justify-center text-[red] border-[red]'>\n  //       分割线，上面是正常的文档流，下面是虚拟长列表，\n  //     </div>\n\n  //     <div ref={visualContentRef} className='w-full relative'>\n  //       <div ref={actualContentRef} className='absolute top-0 w-full' style={{ transform }}>\n  //         {renderContent(startIndex, endIndex)}\n  //       </div>\n  //     </div>\n  //   </div>\n  // );\n\n  return (\n    <div ref={scrollContainerRef} className='h-[800px] w-[400px] border overflow-auto'>\n      <div ref={visualContentRef} className='w-full relative'>\n        <div ref={actualContentRef} className='absolute top-0 w-full' style={{ transform }}>\n          {renderContent(startIndex, endIndex)}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport const DynamicVisualList2 = () => {\n  const [list] = useState(idList);\n  const scrollContainerRef = useRef<HTMLDivElement>(null);\n  const visualContentRef = useRef<HTMLDivElement>(null);\n  const actualContentRef = useRef<HTMLDivElement>(null);\n  const cachedPositions = useRef<Record<string, CachePosition>>({});\n  const [range, setRange] = useState([\n    0,\n    Math.min(Math.ceil(window.innerHeight / ESTIMATE_ROW_HEIGHT), list.length),\n  ]);\n\n  const listRef = useRef<string[]>(list);\n  listRef.current = list;\n\n  // useEffect(() => {\n  //   setInterval(() => {\n  //     setList((list) => {\n  //       const id = v4();\n  //       dataMap[id] = {\n  //         id,\n  //         index: 5 + 1,\n  //         content: faker.lorem.sentences(),\n  //       };\n  //       const tempList = [...list];\n  //       tempList.splice(5, 0, id);\n\n  //       return tempList;\n  //     });\n  //   }, 3000);\n\n  //   // eslint-disable-next-line react-hooks/exhaustive-deps\n  // }, []);\n\n  useEffect(() => {\n    const visualContent = visualContentRef.current;\n    if (!visualContent) return;\n    visualContent.style.height = `${list.length * ESTIMATE_ROW_HEIGHT}px`;\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    list.forEach((id, index) => {\n      cachedPositions.current[id] = {\n        id,\n        bottom: (index + 1) * ESTIMATE_ROW_HEIGHT,\n        height: ESTIMATE_ROW_HEIGHT,\n        diffHeight: 0,\n      };\n    });\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    const actualContent = actualContentRef.current;\n    const visualContent = visualContentRef.current;\n    if (!actualContent || !visualContent) return;\n    const childrenNodes = actualContent.childNodes as NodeListOf<HTMLDivElement>;\n\n    childrenNodes.forEach((node) => {\n      const uuid = node.dataset.uuid;\n      if (!uuid) return;\n      const originHeight = cachedPositions.current[uuid].height;\n      const realHeight = node.offsetHeight;\n      const diffHeight = originHeight - realHeight; // 想象成真实的高度不及预估的高度，所以需要减掉\n\n      if (diffHeight !== 0) {\n        cachedPositions.current[uuid].height = realHeight;\n        cachedPositions.current[uuid].diffHeight = diffHeight;\n      }\n    });\n\n    let cumulativeDiffHeight = 0;\n    const startIndex = range[0];\n    const listLength = listRef.current.length;\n    for (let i = startIndex; i < listLength; i++) {\n      const id = listRef.current[i];\n      const item = cachedPositions.current[id];\n\n      if (item.diffHeight !== 0) {\n        cumulativeDiffHeight += item.diffHeight;\n        item.diffHeight = 0;\n      }\n\n      item.bottom = item.bottom - cumulativeDiffHeight;\n    }\n\n    const lastId = listRef.current[listLength - 1];\n    const lastPosition = cachedPositions.current[lastId];\n    const height = lastPosition.bottom;\n\n    visualContent.style.height = `${height}px`;\n  }, [range]);\n\n  const getStartIndex = (scrollTop: number) => {\n    const positions = cachedPositions.current;\n    let start = 0;\n    let end = listRef.current.length - 1;\n    let tempIndex = 0;\n    let tempId = '';\n\n    while (start <= end) {\n      tempIndex = Math.floor((start + end) / 2);\n      tempId = listRef.current[tempIndex];\n      const midValue = positions[tempId];\n\n      if (midValue.bottom === scrollTop) break;\n      if (midValue.bottom < scrollTop) start = tempIndex + 1;\n      if (midValue.bottom > scrollTop) end = tempIndex - 1;\n    }\n\n    tempId = listRef.current[tempIndex];\n    const target = positions[tempId];\n    if (target.bottom < scrollTop) tempIndex++;\n\n    return tempIndex;\n  };\n\n  useEffect(() => {\n    const scrollContainer = scrollContainerRef.current;\n    const actualContent = actualContentRef.current;\n    const visualContent = visualContentRef.current;\n    if (!scrollContainer || !actualContent || !visualContent) return;\n\n    const handleScroll = () => {\n      const scrollContainerRect = scrollContainer.getBoundingClientRect();\n      const visualContentRect = visualContent.getBoundingClientRect();\n      const scrollTop = scrollContainerRect.top - visualContentRect.top;\n      const minVisibleLength = Math.ceil(scrollContainer.clientHeight / ESTIMATE_ROW_HEIGHT);\n      const currentStartIndex = getStartIndex(scrollTop);\n      const newStartIndex = Math.max(currentStartIndex - BUFFER_SIZE, 0);\n\n      if (range[0] === newStartIndex) return;\n      setRange([newStartIndex, newStartIndex + minVisibleLength + BUFFER_SIZE]);\n    };\n\n    scrollContainer.addEventListener('scroll', handleScroll);\n    return () => {\n      scrollContainer.removeEventListener('scroll', handleScroll);\n    };\n  }, [range]);\n\n  const renderContent = (startIndex: number, endIndex: number) => {\n    return (\n      <>\n        {list.slice(startIndex, endIndex).map((id) => {\n          const item = dataMap[id];\n          return (\n            <div className='p-2 border-b' key={id} data-uuid={id}>\n              <span className='text-[blue] font-bold'>{item.index}</span> {item.content}\n            </div>\n          );\n        })}\n      </>\n    );\n  };\n\n  const startIndex = range[0];\n  const endIndex = range[1];\n  const startId = list[startIndex];\n  const transform = `translate3d(0,${\n    startIndex >= 1 ? cachedPositions.current[startId].bottom : 0\n  }px,0)`;\n  return (\n    <div ref={scrollContainerRef} className='h-[800px] w-[400px] border overflow-auto'>\n      <div ref={visualContentRef} className='w-full relative'>\n        <div ref={actualContentRef} className='absolute top-0 w-full' style={{ transform }}>\n          {renderContent(startIndex, endIndex)}\n        </div>\n      </div>\n    </div>\n  );\n};\n\n/**\n * 1. 根据单行 估计高度 计算 占位内容 高度，让容器具备和普通列表一样的滚动能力\n * 2. 每次渲染后 更新占位内容的高度以及后面内容的位置：\n * 3. 真实的 scrollTop 的计算: containerRect.top - listRect.top\n * 4. 计算内容容器的平移位置：startIndex => transformY\n * 5. 根据 scrollTop 计算 startIndex: cachePosition => startIndex\n *\n * update cachePosition 和 getStartIndex\n *\n * 实测证明 10000 个节点同时渲染都不会卡，如果会卡，那肯定不是 dom 节点的原因，一定是别的原因。\n */\n\n/**\n * https://reflect.app/：笔记软件，虚拟列表用的 virtuoso，编辑器使用的是 remirror(Makes ProseMirror fun to use for React developers),\n * https://virtuoso.dev/: 虚拟列表组件库\n */\n","import { useEffect, useRef, useState } from 'react';\nimport { generateData } from '../../utils/mock';\n\nconst ROW_HEIGHT = 40;\nconst BUFFER_SIZE = 20;\n\nexport const FixedHeightVisualList = () => {\n  const [list] = useState(generateData(10000));\n  const containerRef = useRef<HTMLDivElement>(null);\n  const contentRef = useRef<HTMLDivElement>(null);\n  const lastScrollTop = useRef<number>(0);\n  const [range, setRange] = useState([\n    0,\n    Math.min(Math.ceil(window.innerHeight / ROW_HEIGHT), list.length),\n  ]);\n  const rangeStartRef = useRef(0);\n  rangeStartRef.current = range[0];\n\n  useEffect(() => {\n    const container = containerRef.current;\n    const listNode = contentRef.current;\n    if (!container || !listNode) return;\n\n    const handleScroll = () => {\n      const containerRect = container.getBoundingClientRect();\n      const listRect = listNode.getBoundingClientRect();\n      const visibleLength = Math.ceil(container.clientHeight / ROW_HEIGHT);\n      const scrollTop = containerRect.top - listRect.top;\n\n      let dir = 'bottom';\n      if (scrollTop < lastScrollTop.current) {\n        dir = 'top';\n      }\n      lastScrollTop.current = scrollTop;\n\n      const hiddenStartIndex = Math.floor(scrollTop / ROW_HEIGHT);\n      let startIndex = 0;\n      let endIndex = 0;\n\n      if (dir === 'bottom') {\n        startIndex = hiddenStartIndex;\n        endIndex = hiddenStartIndex + visibleLength + BUFFER_SIZE;\n      } else {\n        startIndex = Math.max(hiddenStartIndex - BUFFER_SIZE, 0);\n        endIndex = hiddenStartIndex + visibleLength;\n      }\n\n      if (rangeStartRef.current === startIndex) return;\n      setRange([startIndex, endIndex]);\n    };\n\n    container.addEventListener('scroll', handleScroll);\n    return () => {\n      container.removeEventListener('scroll', handleScroll);\n    };\n  }, []);\n\n  const rangeStart = range[0];\n  const rangeEnd = range[1];\n  return (\n    <div className='relative h-[800px] w-96 overflow-y-scroll box-border border' ref={containerRef}>\n      <div style={{ height: `${list.length * ROW_HEIGHT}px` }} ref={contentRef}>\n        {list.slice(rangeStart, rangeEnd).map((item, index) => {\n          return (\n            <div\n              key={item.id}\n              className='absolute w-full border-b-[1px]'\n              style={{ top: `${(rangeStart + index) * ROW_HEIGHT}px`, height: ROW_HEIGHT }}\n            >\n              <div className='flex items-center h-full px-4'>{item.index}</div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n","import { useEffect } from 'react';\nimport { v4 } from 'uuid';\nimport { generateData } from '../utils/mock';\n\nconst closure = () => {\n  const data = initData();\n  return () => data;\n};\n\nconst initData = () => {\n  const list = generateData(10000);\n  return list.map((item, index) => {\n    return {\n      id: item.id,\n      bottom: (index + 1) * 90,\n      height: 90,\n      diffHeight: 0,\n    };\n  }); // 差不多 30M 内存\n\n  return Array(10000000);\n};\n\nexport const Memory = () => {\n  useEffect(() => {\n    // const list = generateData(10000);\n    // setInterval(() => {\n    //   const id = v4();\n    //   localStorage.setItem(id, JSON.stringify(list));\n    // }, 2000);\n    // localStorage 超过存储上限后会无法存入：\n    // memory.tsx:29 Uncaught DOMException: Failed to execute 'setItem' on 'Storage': Setting the value of 'c6a9917b-2743-43d4-a0c2-4de6e1e96a56' exceeded the quota.\n    // 为了解决 localStorage 超过存储限制的问题，可以引入 LRU。\n    // chrome 的 memory 使用：https://www.mzh.ren/javascript-objects-size.html\n  }, []);\n\n  useEffect(() => {\n    setTimeout(() => {\n      window.f = closure();\n\n      console.log('%c Data generated', 'color: #f00;', window.f());\n\n      setTimeout(() => {\n        console.log('%c Data recovery', 'color: #f00;');\n\n        // 变量置位 null，会自动回收\n        window.f = null;\n      }, 4000);\n    }, 1000);\n  }, []);\n  return null;\n};\n\n/**\n * 内存泄露的回收：https://juejin.cn/post/7079995358624874509\n * 在控制台测试的时候，因为控制台会有返回，返回值会产生引用，所以最好用文件进行测试。\n */\n","import { useEffect, useLayoutEffect, useRef, useState } from 'react';\nimport dayjs from 'dayjs';\n\ninterface ChildProps {\n  name: string | number;\n  info: { age: number; height: number };\n}\n\nexport const ReactDemo = () => {\n  return (\n    <div>\n      {/* <ReactRenderDemo /> */}\n      <Lifecycle />\n    </div>\n  );\n};\n\nexport const ReactRenderDemo = () => {\n  const [name, setName] = useState('王五');\n  const [time, setTime] = useState('');\n  const [info, setInfo] = useState({\n    age: 10,\n    height: 10,\n  });\n  const [array, setArray] = useState([1, 2]);\n\n  const infoRef = useRef({\n    age: 10,\n    height: 10,\n  });\n\n  console.log('=======');\n\n  useEffect(() => {\n    // setName(\"王wqwqwqwqwqwqwqwqwqwqwq\");\n    // console.log(\"useEffect\");\n  }, []);\n  useLayoutEffect(() => {\n    // console.log(\"useLayoutEffect\");\n    // setName(\"王wqwqwqwqwqwqwqwqwqwqwq\");\n  }, []);\n\n  return (\n    <div>\n      <Lifecycle />\n      <div className='flex m-2'>\n        <button\n          className='p-2 border-2 border-gray-400'\n          onClick={() => {\n            // setName(dayjs().format(\"HH:mm:ss\"));\n            // unstable_batchedUpdates(() => {\n            setName('王');\n            // setTime(\"早上十点\");\n            // });\n\n            // setTimeout(() => {\n            //   unstable_batchedUpdates(() => {\n            //     setName(\"证书\");\n            //     console.log(name);\n            //     setTime(Math.random().toString());\n            //   });\n            // }, 1000);\n\n            // setArray([2, 1]);\n          }}\n        >\n          更新时间\n        </button>\n        <button\n          className='p-2 border-2 border-gray-400 ml-1'\n          onClick={() => {\n            setTime(dayjs().format('HH:mm:ss'));\n            // setTime(dayjs().format(\"HH:mm:ss\"));\n          }}\n        >\n          更新时间，但是不更新子组件\n        </button>\n        <button\n          className='p-2 border-2 border-gray-400 ml-1'\n          onClick={() => {\n            infoRef.current.age = 100;\n            setInfo({\n              age: 10,\n              height: 10,\n            });\n          }}\n        >\n          更新 info\n        </button>\n        <div>{time}</div>\n        <div>{name}</div>\n      </div>\n      {array.map((value, index) => {\n        return <div key={index}>{value}</div>;\n      })}\n      <div className='mt-10'>{/* <ToDoList /> */}</div>\n      <div className='mt-10'>{/* <EventDemo /> */}</div>\n      <div className='mt-10'></div>\n    </div>\n  );\n};\n\nconst Child = () => {\n  console.log('%c Child', 'color:#2196f3;');\n\n  useEffect(() => {\n    console.log('%c Child useEffect', 'color:#2196f3;');\n  });\n\n  return <div className='w-20 border border-green-300 px-1 mt-2'>Child</div>;\n};\n\nconst Lifecycle = () => {\n  console.log('%c Parent', 'color:#2196f3;');\n\n  useEffect(() => {\n    console.log('%c Parent useEffect', 'color:#2196f3;');\n  });\n\n  return (\n    <div className='react-lifecycle-container border border-red-400 p-2 w-[600px]'>\n      <div>React Lifecycle 打开控制台查看顺序！！！</div>\n      <Child />\n    </div>\n  );\n};\n\n/**\n * 什么时候使用重载函数？什么时候用 union type。\n * 函数重载将特定的输入类型映射到特定的返回类型。使用联合，则只知道返回是有效类型之一，失去了输入和输出之间的关联。\n * 这可能是也可能不是问题，看情况而论\n *\n * implementation signature和 overload signature必须兼容，\n *\n * js 因为是动态类型，本身不需要支持重载，直接对参数进行类型判断即可，但是ts为了保证类型安全，支持了函数签名的类型重载\n *\n * https://stackoverflow.com/questions/64741234/function-overloading-in-typescript-vs-using-a-union-type\n * @param type\n */\nexport function getPersonInfo(type: 'age'): number;\nexport function getPersonInfo(type: 'name'): string;\nexport function getPersonInfo(type: 'age' | 'name'): number | string {\n  if (type === 'age') {\n    return 12;\n  } else {\n    return '111';\n  }\n}\n","// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-nocheck\n\n// copy form https://github.com/mozilla/pdf.js/blob/master/web/text_layer_builder.js\n\nconst EXPAND_DIVS_TIMEOUT = 300; // ms\n\n/**\n * @typedef {Object} TextLayerBuilderOptions\n * @property {HTMLDivElement} textLayerDiv - The text layer container.\n * @property {EventBus} eventBus - The application event bus.\n * @property {number} pageIndex - The page index.\n * @property {PageViewport} viewport - The viewport of the text layer.\n * @property {TextHighlighter} highlighter - Optional object that will handle\n *   highlighting text from the find controller.\n * @property {boolean} enhanceTextSelection - Option to turn on improved\n *   text selection.\n */\n\n/**\n * The text layer builder provides text selection functionality for the PDF.\n * It does this by creating overlay divs over the PDF's text. These divs\n * contain text that matches the PDF text they are overlaying.\n */\nexport class TextLayerBuilder {\n  constructor({\n    textLayerDiv,\n    eventBus,\n    pageIndex,\n    viewport,\n    highlighter = null,\n    enhanceTextSelection = false,\n  }) {\n    this.textLayerDiv = textLayerDiv;\n    this.eventBus = eventBus;\n    this.textContent = null;\n    this.textContentItemsStr = [];\n    this.textContentStream = null;\n    this.renderingDone = false;\n    this.pageNumber = pageIndex + 1;\n    this.viewport = viewport;\n    this.textDivs = [];\n    this.textLayerRenderTask = null;\n    this.highlighter = highlighter;\n    this.enhanceTextSelection = enhanceTextSelection;\n\n    this._bindMouse();\n  }\n\n  /**\n   * @private\n   */\n  _finishRendering() {\n    this.renderingDone = true;\n\n    if (!this.enhanceTextSelection) {\n      const endOfContent = document.createElement('div');\n      endOfContent.className = 'endOfContent';\n      this.textLayerDiv.appendChild(endOfContent);\n    }\n\n    // this.eventBus.dispatch('textlayerrendered', {\n    //   source: this,\n    //   pageNumber: this.pageNumber,\n    //   numTextDivs: this.textDivs.length,\n    // });\n  }\n\n  /**\n   * Renders the text layer.\n   *\n   * @param {number} [timeout] - Wait for a specified amount of milliseconds\n   *                             before rendering.\n   */\n  render(timeout = 0) {\n    if (!(this.textContent || this.textContentStream) || this.renderingDone) {\n      return;\n    }\n    this.cancel();\n\n    this.textDivs.length = 0;\n    this.highlighter?.setTextMapping(this.textDivs, this.textContentItemsStr);\n\n    const textLayerFrag = document.createDocumentFragment();\n    this.textLayerRenderTask = window.pdfjsLib.renderTextLayer({\n      textContent: this.textContent,\n      textContentStream: this.textContentStream,\n      container: textLayerFrag,\n      viewport: this.viewport,\n      textDivs: this.textDivs,\n      textContentItemsStr: this.textContentItemsStr,\n      timeout,\n      enhanceTextSelection: this.enhanceTextSelection,\n    });\n    this.textLayerRenderTask.promise.then(() => {\n      this.textLayerDiv.appendChild(textLayerFrag);\n      this._finishRendering();\n      this.highlighter?.enable();\n    });\n  }\n\n  /**\n   * Cancel rendering of the text layer.\n   */\n  cancel() {\n    if (this.textLayerRenderTask) {\n      this.textLayerRenderTask.cancel();\n      this.textLayerRenderTask = null;\n    }\n    this.highlighter?.disable();\n  }\n\n  setTextContentStream(readableStream) {\n    this.cancel();\n    this.textContentStream = readableStream;\n  }\n\n  setTextContent(textContent) {\n    this.cancel();\n    this.textContent = textContent;\n  }\n\n  /**\n   * Improves text selection by adding an additional div where the mouse was\n   * clicked. This reduces flickering of the content if the mouse is slowly\n   * dragged up or down.\n   *\n   * @private\n   */\n  _bindMouse() {\n    const div = this.textLayerDiv;\n    let expandDivsTimer = null;\n\n    div.addEventListener('mousedown', (evt) => {\n      if (this.enhanceTextSelection && this.textLayerRenderTask) {\n        this.textLayerRenderTask.expandTextDivs(true);\n        if ((typeof PDFJSDev === 'undefined' || !PDFJSDev.test('MOZCENTRAL')) && expandDivsTimer) {\n          clearTimeout(expandDivsTimer);\n          expandDivsTimer = null;\n        }\n        return;\n      }\n\n      const end = div.querySelector('.endOfContent');\n      if (!end) {\n        return;\n      }\n      if (typeof PDFJSDev === 'undefined' || !PDFJSDev.test('MOZCENTRAL')) {\n        // On non-Firefox browsers, the selection will feel better if the height\n        // of the `endOfContent` div is adjusted to start at mouse click\n        // location. This avoids flickering when the selection moves up.\n        // However it does not work when selection is started on empty space.\n        let adjustTop = evt.target !== div;\n        if (typeof PDFJSDev === 'undefined' || PDFJSDev.test('GENERIC')) {\n          adjustTop =\n            adjustTop &&\n            window.getComputedStyle(end).getPropertyValue('-moz-user-select') !== 'none';\n        }\n        if (adjustTop) {\n          const divBounds = div.getBoundingClientRect();\n          const r = Math.max(0, (evt.pageY - divBounds.top) / divBounds.height);\n          // eslint-disable-next-line prefer-template\n          end.style.top = (r * 100).toFixed(2) + '%';\n        }\n      }\n      end.classList.add('active');\n    });\n\n    div.addEventListener('mouseup', () => {\n      if (this.enhanceTextSelection && this.textLayerRenderTask) {\n        if (typeof PDFJSDev === 'undefined' || !PDFJSDev.test('MOZCENTRAL')) {\n          expandDivsTimer = setTimeout(() => {\n            if (this.textLayerRenderTask) {\n              this.textLayerRenderTask.expandTextDivs(false);\n            }\n            expandDivsTimer = null;\n          }, EXPAND_DIVS_TIMEOUT);\n        } else {\n          this.textLayerRenderTask.expandTextDivs(false);\n        }\n        return;\n      }\n\n      const end = div.querySelector('.endOfContent');\n      if (!end) {\n        return;\n      }\n      if (typeof PDFJSDev === 'undefined' || !PDFJSDev.test('MOZCENTRAL')) {\n        end.style.top = '';\n      }\n      end.classList.remove('active');\n    });\n  }\n}\n","import type { FC } from 'react';\nimport { memo, useEffect, useRef } from 'react';\nimport { DEFAULT_PAGE_HEIGHT, DEFAULT_PAGE_WIDTH } from '.';\nimport './style.css';\n\ninterface PageProps {\n  pageNum: number;\n  container: HTMLDivElement;\n  drawPage: (pageNum: number) => void;\n}\n\nexport const Page: FC<PageProps> = memo(({ container, pageNum, drawPage }) => {\n  const pageRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (!pageRef.current) return;\n\n    const observer = new IntersectionObserver(\n      (entries, observer) => {\n        entries.forEach((entry) => {\n          if (entry.isIntersecting) {\n            drawPage(Number(pageNum));\n            observer.disconnect();\n          }\n        });\n      },\n      {\n        root: container,\n        rootMargin: '800px 0px',\n      }\n    );\n\n    observer.observe(pageRef.current);\n\n    return () => observer.disconnect();\n  }, [container, drawPage, pageNum]);\n\n  return (\n    <div\n      ref={pageRef}\n      id={`page-${pageNum}`}\n      className='relative bg-white mb-4 mx-auto'\n      style={{ width: DEFAULT_PAGE_WIDTH, height: DEFAULT_PAGE_HEIGHT }}\n    >\n      loading\n    </div>\n  );\n});\n","const resourceMap: Record<string, Promise<void> | undefined> = {};\n\nexport enum TagName {\n  SCRIPT = 'script',\n  LINK = 'link',\n}\n\nexport const loadResource = (url: string, tagName: TagName) => {\n  if (resourceMap[url]) return resourceMap[url];\n\n  resourceMap[url] = new Promise((resolve, reject) => {\n    let tag: HTMLScriptElement | HTMLLinkElement;\n    if (tagName === 'script') {\n      tag = document.createElement(tagName) as HTMLScriptElement;\n      tag.src = url;\n    } else {\n      tag = document.createElement(tagName) as HTMLLinkElement;\n      tag.href = url;\n      tag.rel = 'stylesheet';\n      tag.type = 'text/css';\n    }\n\n    tag.onload = () => resolve();\n    tag.onerror = (event) => reject(event);\n    document.head.appendChild(tag);\n  });\n\n  return resourceMap[url];\n};\n\nexport const loadJs = (url: string) => loadResource(url, TagName.SCRIPT);\nexport const loadCss = (url: string) => loadResource(url, TagName.LINK);\n","import { throttle } from 'lodash-es';\nimport React, { useEffect, useState, useRef, useCallback } from 'react';\nimport type { FC, ReactNode } from 'react';\nimport { TextLayerBuilder } from './text-layer';\nimport isHotkey from 'is-hotkey';\nimport { AiOutlineDown, AiOutlineUp } from 'react-icons/ai';\nimport { Page } from './page';\nimport { loadJs } from '../../utils/load-resource';\nimport { cx } from '../../utils/classnames';\nimport './style.css';\n\nexport const DEFAULT_PAGE_WIDTH = 800;\nexport const DEFAULT_PAGE_HEIGHT = 1130;\nexport const CONTAINER_MIN_PADDING = 20;\nexport const CONTAINER_MARGIN_TOP = 55;\n\nclass PDFLoader {\n  private disposed = false;\n  private pdf: any;\n\n  constructor(private file: string) {}\n\n  async load() {\n    await loadJs(`/pdf/pdf.js`);\n\n    return (window as any).pdfjsLib\n      .getDocument({\n        url: this.file,\n        // https://stackoverflow.com/questions/32764773/what-is-a-pdf-bcmap-file/40634723\n        cMapUrl: `/pdf/cmaps/`,\n        cMapPacked: true,\n      })\n      .promise.then((pdf: any) => {\n        this.pdf = pdf;\n        if (this.disposed) {\n          pdf.destroy();\n        }\n        return pdf;\n      });\n  }\n\n  dispose() {\n    this.disposed = true;\n    if (this.pdf) {\n      this.pdf.destroy();\n    }\n  }\n}\n\nconst file =\n  'https://hexiang-images.oss-cn-beijing.aliyuncs.com/rxjs%20%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3.pdf';\n\nexport const PdfPreview: FC<{ fileUrl: string }> = ({ fileUrl = file }) => {\n  const pdfDocumentRef = useRef<any>();\n  const isOnPageNumber = useRef(false);\n  const pageNumberRef = useRef<HTMLDivElement>(null);\n  const pdfContainerRef = useRef<HTMLDivElement>(null);\n  const scrollContainerRef = useRef<HTMLDivElement>(null);\n  const inputRef = useRef<HTMLInputElement>(null);\n  const pageNumTimer = useRef<NodeJS.Timeout>();\n  const [loading, setLoading] = useState(true);\n  const [isShowPageNum, setIsShowPageNum] = useState(false);\n  const [currentPage, setCurrentPage] = useState<string>('1');\n\n  useEffect(() => {\n    const loader = new PDFLoader(fileUrl);\n\n    void loader.load().then((pdf) => {\n      pdfDocumentRef.current = pdf;\n      setLoading(false);\n    });\n\n    return () => {\n      loader.dispose();\n      clearPageNumTimer();\n    };\n  }, [fileUrl]);\n\n  const drawPage = useCallback((pageNum: number) => {\n    if (!pdfContainerRef.current) return;\n\n    const pageContainer = pdfContainerRef.current.querySelector(\n      `div[id=page-${pageNum}]`\n    ) as HTMLDivElement | null;\n\n    if (!pageContainer) return;\n    pageContainer.innerHTML = '';\n\n    pdfDocumentRef.current.getPage(pageNum).then((page: any) => {\n      if (!scrollContainerRef.current) return;\n      const viewport = page.getViewport({ scale: (window.devicePixelRatio || 1) * 1.5 });\n      const canvas = document.createElement('canvas');\n      const context = canvas.getContext('2d');\n      if (!context) return;\n\n      const scrollContainerWidth = scrollContainerRef.current.clientWidth;\n      const radio =\n        viewport.width /\n        Math.min(DEFAULT_PAGE_WIDTH, scrollContainerWidth - CONTAINER_MIN_PADDING * 2);\n      pageContainer.appendChild(canvas);\n      canvas.height = viewport.height;\n      canvas.width = viewport.width;\n\n      const cssWidth = canvas.width / radio;\n      const cssHeight = canvas.height / radio;\n      pageContainer.style.width = `${cssWidth}px`;\n      pageContainer.style.height = `${cssHeight}px`;\n      canvas.style.width = `${cssWidth}px`;\n      canvas.style.height = `${cssHeight}px`;\n\n      page\n        .render({\n          canvasContext: context,\n          viewport,\n        })\n        .promise.then(() => page.getTextContent())\n        .then((textContent: any) => {\n          const textLayerDiv = document.createElement('div');\n          textLayerDiv.setAttribute('class', 'textLayer');\n          textLayerDiv.style.transform = `scale(${1 / radio})`;\n          textLayerDiv.style.width = `${canvas.width}px`;\n          textLayerDiv.style.height = `${canvas.height}px`;\n          pageContainer.appendChild(textLayerDiv);\n\n          // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n          // @ts-ignore\n          const textLayer = new TextLayerBuilder({\n            textLayerDiv,\n            pageIndex: page.pageIndex,\n            viewport,\n          });\n\n          textLayer.setTextContent(textContent);\n          textLayer.render();\n        });\n    });\n  }, []);\n\n  const jumpPage = (page: string) => {\n    if (!scrollContainerRef.current) return;\n    const targetPage = document.querySelector(`#page-${page}`);\n    if (!targetPage) return;\n\n    scrollContainerRef.current.scrollTo(0, (targetPage as HTMLDivElement).offsetTop);\n\n    setCurrentPage(page);\n  };\n\n  const onEnter = () => {\n    const pageNum = parseInt(currentPage, 10);\n    if (Number.isNaN(pageNum) || pageNum > pdfDocumentRef.current.numPages) {\n      alert('输入页码无效！');\n    } else {\n      if (currentPage !== pageNum.toString()) {\n        setCurrentPage(pageNum.toString());\n      }\n      jumpPage(pageNum.toString());\n    }\n  };\n\n  const clearPageNumTimer = () => {\n    if (pageNumTimer.current) {\n      clearTimeout(pageNumTimer.current);\n    }\n  };\n\n  const controlPageNumVisible = (event?: React.MouseEvent) => {\n    if (event) {\n      if (pageNumberRef.current?.contains(event.target as HTMLDivElement)) {\n        isOnPageNumber.current = true;\n        setIsShowPageNum(true);\n        clearPageNumTimer();\n        return;\n      }\n      isOnPageNumber.current = false;\n    }\n\n    if (isOnPageNumber.current) {\n      return;\n    }\n\n    const setHidePageNumTimer = () => {\n      pageNumTimer.current = setTimeout(() => {\n        clearPageNumTimer();\n        if (inputRef.current === document.activeElement) {\n          setHidePageNumTimer();\n        } else {\n          setIsShowPageNum(false);\n        }\n      }, 1000);\n    };\n\n    if (!isShowPageNum) {\n      setIsShowPageNum(true);\n      setHidePageNumTimer();\n    } else {\n      clearPageNumTimer();\n      setHidePageNumTimer();\n    }\n  };\n\n  const handleScroll = () => {\n    if (inputRef.current === document.activeElement) {\n      inputRef.current?.blur();\n    }\n\n    controlPageNumVisible();\n\n    const scrollContainer = scrollContainerRef.current;\n    if (!scrollContainer) return;\n\n    const element = document.elementFromPoint(\n      scrollContainer.clientWidth / 2,\n      scrollContainer.clientHeight / 2 + CONTAINER_MARGIN_TOP\n    );\n    if (!element) return;\n    const page = element.closest('div[id^=page]');\n    if (!page) return;\n    const pageNum = page.id.split('-')[1];\n    if (pageNum) {\n      setCurrentPage(pageNum);\n    }\n  };\n\n  const renderPages = () => {\n    if (loading || !pdfDocumentRef.current || !scrollContainerRef.current) return null;\n    const pages: ReactNode[] = [];\n\n    for (let pageNum = 1; pageNum < pdfDocumentRef.current.numPages + 1; pageNum++) {\n      pages.push(\n        <Page\n          drawPage={drawPage}\n          pageNum={pageNum}\n          key={pageNum}\n          container={scrollContainerRef.current}\n        />\n      );\n    }\n    return pages;\n  };\n\n  return (\n    <div className='w-full h-[750px] relative'>\n      <div\n        ref={scrollContainerRef}\n        className='w-full h-full overflow-y-auto flex justify-center pt-2 bg-black/70 border'\n        onScroll={throttle(handleScroll, 300)}\n        onMouseMove={throttle(controlPageNumVisible, 300)}\n      >\n        <div ref={pdfContainerRef} style={{ height: 'max-content' }}>\n          {renderPages()}\n        </div>\n        <div\n          ref={pageNumberRef}\n          className={cx(\n            'absolute z-50 flex items-center h-12 px-2 text-white transition-all duration-200 -translate-x-1/2 rounded-sm bottom-4 left-1/2 bg-black '\n          )}\n        >\n          <button className='flex items-center justify-center mr-1 rounded animate-hover hover:bg-white hover:bg-opacity-10'>\n            <AiOutlineUp\n              className='p-1 w-full'\n              onClick={() => jumpPage(String(Number(currentPage) - 1))}\n            />\n          </button>\n          <div className='relative px-0.5'>\n            <span className='invisible'>{String(currentPage)}</span>\n            <input\n              ref={inputRef}\n              type='text'\n              className='absolute left-0 top-0 h-full w-full px-0 bg-transparent border-none focus:border-0 '\n              style={{ backgroundColor: 'transparent' }}\n              value={currentPage}\n              onKeyDown={(event) => {\n                if (isHotkey('enter')(event)) {\n                  onEnter();\n                }\n              }}\n              onChange={(e) => {\n                setCurrentPage(e.target.value);\n              }}\n            />\n          </div>\n          &nbsp;/&nbsp;&nbsp;<span> {pdfDocumentRef.current?.numPages} </span>\n          <button className='flex items-center justify-center ml-1 rounded animate-hover hover:bg-white hover:bg-opacity-10'>\n            <AiOutlineDown\n              size='large'\n              className='p-1 w-full'\n              onClick={() => jumpPage(String(Number(currentPage) + 1))}\n            />\n          </button>\n        </div>\n        {loading && <>loading...</>}\n      </div>\n    </div>\n  );\n};\n","import { useEffect, useRef, useState } from 'react';\nimport { v4 } from 'uuid';\nimport { cx } from '../utils/classnames';\nimport { generateData } from '../utils/mock';\nimport { NormalType, storage } from '../algorithm/storage';\n\nenum StorageTestType {\n  dataType = 'dataType',\n  expires = 'expires',\n  bigData = 'bigData',\n  exceedSize = 'exceedSize',\n}\n\nconst buttons = [\n  {\n    text: '存取的各种类型数据',\n    type: StorageTestType.dataType,\n  },\n  {\n    text: '数据过期清除',\n    type: StorageTestType.expires,\n  },\n  {\n    text: '超大数据无法存入',\n    type: StorageTestType.bigData,\n  },\n  {\n    text: '空间不够删除不常用数据',\n    type: StorageTestType.exceedSize,\n  },\n];\nexport const StorageTest = () => {\n  const [testType, setType] = useState<StorageTestType>(StorageTestType.dataType);\n  const timer = useRef<NodeJS.Timeout>();\n\n  useEffect(() => {\n    setTestType(testType);\n\n    return () => {\n      if (timer.current) {\n        clearInterval(timer.current);\n        clearTimeout(timer.current);\n      }\n    };\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  /**\n   * 测试 存储的各种类型数据\n   */\n  const testDataType = () => {\n    storage.setItem('dataType', 1);\n\n    const data: [string, NormalType][] = [\n      [v4(), true],\n      [v4(), null],\n      [v4(), undefined],\n      [v4(), 111],\n      [v4(), 'this is a sentence'],\n      [v4(), generateData(2)],\n    ];\n\n    data.forEach(([key, value]) => {\n      storage.setItem(key, value);\n    });\n\n    timer.current = setTimeout(() => {\n      console.groupCollapsed('%c 取出各种类型数据', 'color: red;');\n      data.forEach(([key]) => {\n        const result = storage.getItem(key);\n        console.log(result, 'type:' + typeof result);\n      });\n      console.groupEnd();\n    }, 1000);\n  };\n\n  /**\n   * 测试 数据过期进行回收\n   */\n  const testExpires = () => {\n    storage.setLiveTime(3 * 1000); // 3s 存活\n    storage.setCheckIntervalTime(5 * 1000); // 5 秒检测一次\n\n    const data = generateData(1);\n    storage.setItem('expires', data);\n\n    timer.current = setInterval(() => {\n      storage.setItem(v4(), data);\n    }, 500);\n  };\n\n  /**\n   * 测试 数据太大，超出储存上限\n   */\n  const testBigData = () => {\n    const data = generateData(20000);\n    storage.setItem('bigData', data);\n\n    timer.current = setInterval(() => {\n      storage.setItem(v4(), data);\n    }, 2000);\n  };\n\n  /**\n   * 测试 空间不够删除不常用数据\n   */\n  const testExceedSize = () => {\n    const data = generateData(4000);\n    storage.setItem('exceedSize', data);\n\n    timer.current = setInterval(() => {\n      storage.setItem(v4(), data);\n    }, 1000);\n  };\n\n  const setTestType = (type: StorageTestType) => {\n    setType(type);\n    storage.clear();\n    storage.resetTime();\n\n    if (timer.current) {\n      clearInterval(timer.current);\n      clearTimeout(timer.current);\n    }\n\n    switch (type) {\n      case StorageTestType.bigData:\n        testBigData();\n        break;\n      case StorageTestType.dataType:\n        testDataType();\n        break;\n\n      case StorageTestType.exceedSize:\n        testExceedSize();\n        break;\n\n      case StorageTestType.expires:\n        testExpires();\n        break;\n      default:\n        break;\n    }\n  };\n\n  return (\n    <div>\n      {buttons.map(({ text, type }) => {\n        return (\n          <button\n            key={type}\n            onClick={() => setTestType(type)}\n            className={cx('mr-2', type === testType && 'bg-gray-200')}\n          >\n            {text}\n          </button>\n        );\n      })}\n    </div>\n  );\n};\n","import { useState } from 'react';\nimport { Link, Route, Switch } from 'react-router-dom';\nimport { CalenderView } from '../components/calender';\nimport { Canvas } from '../components/canvas';\nimport { Gesture } from '../components/gesture';\nimport { History } from '../components/history';\nimport { Icons } from '../components/icon';\nimport { NotificationDemo } from '../components/notification';\nimport { Scrollbar } from '../components/scroll';\nimport { Selector } from '../components/selector';\nimport { SimpleTable } from '../components/simple-table';\n// import { Sortable } from '../components/sortable';\nimport { TimeLineView } from '../components/timeline';\nimport { VisualList } from '../components/visual-list';\nimport { Lodash } from '../example/lodash-date';\nimport { Memory } from '../example/memory';\nimport { ReactDemo } from '../example/react-demo';\n// import { Editor } from './editor';\nimport { PdfPreview } from './pdf';\nimport { StorageTest } from './storage-test';\n\nconst Example = () => {\n  const [show, setShow] = useState(false);\n\n  return (\n    <div className='relative h-screen overflow-hidden'>\n      <div className='h-full w-20 absolute z-50 border-r'>\n        <button\n          className='px-2 text-sm border-none rounded-md w-full h-10'\n          onClick={() => setShow(!show)}\n        />\n\n        {show && (\n          <div className='flex flex-col pt-2'>\n            {Routes.map((route) => {\n              return (\n                <Link\n                  to={`/example/${route.path}`}\n                  className='w-full px-2 h-8 flex items-center mb-2 hover:bg-gray-100'\n                  key={route.path}\n                >\n                  {route.path}\n                </Link>\n              );\n            })}\n          </div>\n        )}\n      </div>\n\n      <div className='overflow-scroll h-screen m-4 ml-24'>\n        <Switch>\n          {Routes.map((route) => (\n            <Route path={`/example/${route.path}`} component={route.component} key={route.path} />\n          ))}\n          <Route path='/' component={Routes[0].component} />\n        </Switch>\n      </div>\n    </div>\n  );\n};\n\nexport default Example;\n\nexport const Routes = [\n  // {\n  //   path: 'sort',\n  //   component: Sortable,\n  // },\n  // {\n  //   path: 'editor',\n  //   component: Editor,\n  // },\n  {\n    path: 'storage',\n    component: StorageTest,\n  },\n  {\n    path: 'pdf',\n    component: PdfPreview,\n  },\n  {\n    path: 'memory',\n    component: Memory,\n  },\n  {\n    path: 'timeline',\n    component: TimeLineView,\n  },\n  {\n    path: 'table',\n    component: SimpleTable,\n  },\n\n  {\n    path: 'canvas',\n    component: Canvas,\n  },\n  {\n    path: 'notice',\n    component: NotificationDemo,\n  },\n  {\n    path: 'icons',\n    component: Icons,\n  },\n  {\n    path: 'scrollbar',\n    component: Scrollbar,\n  },\n  {\n    path: 'selector',\n    component: Selector,\n  },\n  {\n    path: 'history',\n    component: History,\n  },\n  {\n    path: 'calender',\n    component: CalenderView,\n  },\n  {\n    path: 'visualList',\n    component: VisualList,\n  },\n  {\n    path: 'gesture',\n    component: Gesture,\n  },\n  {\n    path: 'lodash',\n    component: Lodash,\n  },\n  {\n    path: 'react',\n    component: ReactDemo,\n  },\n];\n","import { FaBeer } from 'react-icons/fa';\nimport * as AllIcons from '../../assets/icon';\n\nexport const Icons = () => {\n  return (\n    <div className='text-gray-900 text-xl flex'>\n      <FaBeer className='mr-2' />\n      {Object.keys(AllIcons).map((dd: string) => {\n        // @ts-ignore\n        const Com = AllIcons[dd];\n        return <Com key={dd} className='mr-2' />;\n      })}\n    </div>\n  );\n};\n\n/**\n *\n * 下载 icon 的 figma 页面：https://www.figma.com/file/IsLHnMF5YSh0cRN9P8E8XM/home?node-id=511%3A3632\n *\n * figma-export-icons：导出指定文件指定 iframe 中所有形状的 svg。可以自己修改 cli 脚本修改返回的文件类型。\n * cli： https://github.com/tsimenis/figma-export-icons/blob/master/cli.js#L203\n *\n * 脚本内容:\n * 1. 提示用户输入\n * 2. 输出程序状态\n * 3. 输出下载结果\n *\n * 更新 icon 流程：\n * yarn export-icons\n * node node/icon.js\n */\n","import { throttle } from 'lodash-es';\nimport React, { useRef } from 'react';\nimport { autoScrollY, rafY } from '../utils/auto-scroll';\nimport { getIntersectionRatio } from '../utils/intersection-ratio';\n\ninterface PosCache {\n  left: number;\n  width: number;\n  height: number;\n  offsetTop: number;\n  node: HTMLElement;\n}\n\nexport const Selector = () => {\n  const container = useRef<HTMLDivElement | null>(null);\n  const nodePosCache = useRef(new Map<string, PosCache>());\n  const mouseDownPos = useRef<{ x: number; y: number; scrollTop: number }>({\n    x: 0,\n    y: 0,\n    scrollTop: 0,\n  });\n\n  const handleMouseDown = (event: React.MouseEvent) => {\n    event.preventDefault();\n    const containerNode = container.current;\n    if (!containerNode) return;\n\n    nodePosCache.current = new Map();\n\n    mouseDownPos.current = {\n      x: event.clientX,\n      y: event.clientY,\n      scrollTop: containerNode.scrollTop,\n    };\n\n    let lastCursorPoint = { x: event.clientX, y: event.clientY };\n    let isMoving = false;\n    const selectArea = document.createElement('div');\n    selectArea.style.position = 'fixed';\n    selectArea.style.background = 'rgba(0, 250, 0, 0.3)';\n\n    const highlight = () => {\n      const firstElementChildRect = containerNode.firstElementChild?.getBoundingClientRect();\n      if (!firstElementChildRect) return;\n\n      const allSubNodes = containerNode.querySelectorAll('.sub-node') as NodeListOf<HTMLElement>;\n\n      // TODO:含有虚拟列表的框选优化，需要存储位置\n      for (const node of allSubNodes) {\n        const uuid = node.dataset.uuid;\n        if (!uuid) continue;\n\n        if (nodePosCache.current.has(uuid)) continue;\n\n        const rect = node.getBoundingClientRect();\n        const pos = {\n          left: rect.left,\n          width: rect.width,\n          height: rect.height,\n          offsetTop: rect.top - firstElementChildRect.top,\n          node,\n        };\n\n        nodePosCache.current.set(uuid, pos);\n      }\n\n      const selectorRect = {\n        left: parseInt(selectArea.style.left),\n        top: parseInt(selectArea.style.top),\n        width: parseInt(selectArea.style.width),\n        height: parseInt(selectArea.style.height),\n      } as DOMRect;\n\n      const allSelectedIds = new Set();\n      for (const [uuid, pos] of nodePosCache.current) {\n        const nodeRect = {\n          ...pos,\n          top: pos.offsetTop + firstElementChildRect.top,\n        };\n\n        // 没有虚拟列表的时候可以通过  pos.node 获取节点，因为节点一直在\n        // pos.node.classList.add('selected-node');\n\n        // 有了虚拟列表通过  pos.node 取节点就不可行了，需要每次去查询\n        // const node = document.querySelector(`[data-uuid=\"${uuid}\"]`) as HTMLElement | null;\n        // ！！！！querySelector 性能很差，不要用这个！！！1. 单行监听被选中的 id 2. 再遍历一次 allSubNodes\n        // if (!node) return;\n        if (getIntersectionRatio(nodeRect, selectorRect) > 0) {\n          allSelectedIds.add(uuid);\n          // node.classList.add('selected-node');\n        } else {\n          // pos.node.classList.remove('selected-node');\n        }\n      }\n\n      for (const node of allSubNodes) {\n        const uuid = node.dataset.uuid;\n        if (!uuid) continue;\n\n        if (allSelectedIds.has(uuid)) {\n          node.classList.add('selected-node');\n        } else {\n          if (node.classList.contains('selected-node')) {\n            node.classList.remove('selected-node');\n          }\n        }\n      }\n    };\n\n    const handleMouseMove = (event: MouseEvent) => {\n      if (!isMoving) {\n        isMoving = true;\n        document.body.appendChild(selectArea);\n      }\n\n      selectArea.style.width = `${Math.max(Math.abs(event.clientX - mouseDownPos.current.x), 1)}px`;\n      selectArea.style.left = `${Math.min(event.clientX, mouseDownPos.current.x)}px`;\n      const scrollDis = containerNode.scrollTop - mouseDownPos.current.scrollTop;\n      const realMouseDownY = mouseDownPos.current.y - scrollDis;\n      selectArea.style.top = `${Math.min(event.clientY, realMouseDownY)}px`;\n      selectArea.style.height = `${Math.abs(event.clientY - realMouseDownY)}px`;\n\n      autoScrollY({ y: event.clientY, container: containerNode });\n      lastCursorPoint = { x: event.clientX, y: event.clientY };\n\n      highlight();\n    };\n\n    const moveEvent = throttle(handleMouseMove, 60);\n\n    const handleMouseUp = () => {\n      containerNode.removeEventListener('scroll', handleScroll);\n      document.removeEventListener('mousemove', moveEvent);\n      document.removeEventListener('mouseup', handleMouseUp);\n      cancelAnimationFrame(rafY);\n      selectArea.remove();\n    };\n\n    const handleScroll = () => {\n      if (!isMoving) return;\n\n      const scrollDis = containerNode.scrollTop - mouseDownPos.current.scrollTop;\n      const realMouseDownY = mouseDownPos.current.y - scrollDis;\n      selectArea.style.top = `${Math.min(lastCursorPoint.y, realMouseDownY)}px`;\n      selectArea.style.height = `${Math.abs(lastCursorPoint.y - realMouseDownY)}px`;\n      highlight();\n    };\n\n    containerNode.addEventListener('scroll', handleScroll);\n    document.addEventListener('mousemove', moveEvent);\n    document.addEventListener('mouseup', handleMouseUp);\n  };\n\n  const scrollHeight = 100000;\n  const lineHeight = 40;\n\n  return (\n    <div className='w-full h-full overflow-auto' ref={container}>\n      <div\n        onMouseDown={handleMouseDown}\n        className='border border-gray-200'\n        style={{ height: scrollHeight }}\n      >\n        {new Array(Math.floor(scrollHeight / lineHeight)).fill(1).map((_, index) => {\n          return (\n            <div\n              key={index}\n              className='border-b border-gray-200 sub-node'\n              style={{ height: lineHeight }}\n              data-uuid={index + 1}\n            >\n              {index + 1}\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\n/**\n * scroll 的时候怎么触发 mousemove？？ 当滚动容器滚动的时候，如果鼠标不同不会触发 mousemove，但是业务逻辑都在 mousemove。监听scroll\n *\n * 监听 scroll 的时候怎么更新 node？\n * 记住每一次 mousemove 触发时的坐标，在 scroll 的时候再根据 scrollTop 去更新。\n */\n","import { FC, useState } from 'react';\nimport { cx } from '../../utils/classnames';\nimport { DynamicVisualList, DynamicVisualList2 } from './dynamic-visual-list';\nimport { FixedHeightVisualList } from './fixed-visual-list';\n\n/**\n * 长列表优化方案：\n * 1. 虚拟列表\n * 2. 懒加载 => 滚动到可视区域再渲染\n * @returns\n */\nexport const VisualList: FC = () => {\n  const [fixedHeight, setIsFixedHeight] = useState(true);\n  const [dataType, setDataType] = useState('array');\n\n  return (\n    <div>\n      <div className='mb-5'>\n        <button\n          className={cx('mr-2', fixedHeight && 'bg-gray-200')}\n          onClick={() => setIsFixedHeight(true)}\n        >\n          固定行高\n        </button>\n        <button\n          className={cx('mr-2', !fixedHeight && dataType === 'array' && 'bg-gray-200')}\n          onClick={() => {\n            setIsFixedHeight(false);\n            setDataType('array');\n          }}\n        >\n          动态行高 Array\n        </button>\n        <button\n          className={cx(!fixedHeight && dataType === 'object' && 'bg-gray-200')}\n          onClick={() => {\n            setIsFixedHeight(false);\n            setDataType('object');\n          }}\n        >\n          动态行高 Object\n        </button>\n      </div>\n\n      {fixedHeight ? (\n        <FixedHeightVisualList />\n      ) : dataType === 'array' ? (\n        <DynamicVisualList />\n      ) : (\n        <DynamicVisualList2 />\n      )}\n    </div>\n  );\n};\n","// dnd 的概念：一切都是数据驱动\n// 当一个组件或者dom节点在拖拽的时候，拖拽的不是 dom，而是 确定类型的 item\n// item：描述了一个正在被拖拽的对象\n//将拖动的数据描述为普通对象有助于保持组件之间的解耦和互不了解。\n// 通过 type 指明哪些类型是相互之间兼容的。这个在应用变得越来越大的时候很有用\n// monitors 用来存储内部状态，比如是否在拖拽过程中\n\n// a drag source, a drag preview, or a drop target\n\n// Collector 对于需要跟踪拖放状态的每个组件，您可以定义一个收集函数 collect，从监视器获得对应的数据，dnd 定时调用返回数据给组件作为属性\n\n// connector：用来连接哪些元素是可以拖拽的胡后缀放置的\n\n// 鼠标事件\n// 触摸事件\n// import { useSpring, animated } from \"react-spring\";\nimport { useDrag } from '@use-gesture/react';\nimport { clamp } from 'lodash-es';\nimport { useRef, useState } from 'react';\n\nexport const Gesture = () => {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const lineRef = useRef<HTMLDivElement>(null);\n  // const props = useSpring({ from: { opacity: 0 }, to: { opacity: 1 } });\n  // return <animated.div style={props}>I will fade in</animated.div>;\n\n  // 1. simple drag\n  const [width, setWidth] = useState(200);\n  const MinWidth = 100,\n    MaxWidth = 600;\n  const bind = useDrag(\n    ({ offset: [x] }) => {\n      if (!containerRef.current) return;\n      containerRef.current.style.width = `${clamp(x, MinWidth, MaxWidth)}px`;\n      // lineRef.current.style.transform = `translate(${state.offset[0]}px, ${state.offset[1]}px)`;\n    },\n    { from: width }\n  );\n\n  // 2. drag and dragEnd\n  // const [position, setPosition] = useState({ x: 0, y: 0 });\n  // const bind = useGesture(\n  //   {\n  //     onDrag: (state) => {\n  //       if (!lineRef.current) return;\n  //       lineRef.current.style.transform = `translate(${state.offset[0]}px, ${state.offset[1]}px)`;\n  //     },\n  //     onDragEnd: ({ offset: [mx, my] }) => {\n  //       setPosition({\n  //         x: mx,\n  //         y: my,\n  //       });\n  //     },\n  //   },\n  //   {}\n  // );\n\n  // 3. body Scroll Lock\n\n  return (\n    <div\n      className='relative border inline-flex h-[calc(100%-100px)] my-2'\n      style={{ width }}\n      ref={containerRef}\n    >\n      <div\n        {...bind()}\n        ref={lineRef}\n        className='w-2 bg-black absolute h-[calc(100%-20px)] top-2.5 -right-1'\n        // style={{ transform: `translate(${position.x}px, ${position.y}px)` }}\n      ></div>\n    </div>\n  );\n};\n\n// offset,        // offset since the first gesture\n// lastOffset,    // offset when the last gesture started\n// movement,      // displacement between offset and lastOffset\n","import dayjs from 'dayjs';\nimport { useEffect } from 'react';\n\nconst DATE_FORMAT = 'YYYY/MM/DD';\nconst formatYear = (year: number) => {\n  if (year < 10) {\n    return Number('200'.concat(String(year)));\n  }\n  if (year < 100 && year >= 10) {\n    return Number('20'.concat(String(year)));\n  }\n  return year;\n};\n\nexport const formatDateString = (value: string, format = DATE_FORMAT): string | undefined => {\n  if (format === DATE_FORMAT) {\n    const dateArr = value.split('/').map((value) => parseInt(value, 10));\n    const yearString = dateArr[0] as number;\n    const monthString = dateArr[1] as number;\n    const dayString = dateArr[2] && isNaN(dateArr[2]) ? 1 : dateArr[2];\n\n    if (dayString || dayString === 0) {\n      let newDate = new Date();\n      let day = dayString;\n      let month = monthString;\n\n      if (yearString <= 12) {\n        newDate = new Date(formatYear(dayString), yearString - 1, monthString);\n        day = monthString;\n        month = yearString - 1;\n      }\n\n      if (yearString > 12 && yearString <= 31) {\n        newDate = new Date(formatYear(dayString), monthString - 1, yearString);\n        day = yearString;\n        month = monthString - 1;\n      }\n\n      if (yearString > 31) {\n        newDate = new Date(formatYear(yearString), monthString - 1, dayString);\n        month = monthString - 1;\n      }\n\n      if (isNaN(newDate.getTime())) return;\n      if (newDate.getDate() !== day || newDate.getMonth() !== month) return;\n      return dayjs(newDate).format(format);\n    }\n  }\n};\n\nexport const isValidTimeString = (value: string) => {\n  return !isNaN(new Date(dayjs().format(DATE_FORMAT).concat(' ', value)).getTime());\n};\n\nexport const Lodash = () => {\n  // useEffect(() => {\n  //   log(compact([0, 1, 3, false, null, undefined, \"\"]));\n  //   log(difference([10, 20, 30, 40, 50], [20, 30, 40]));\n  //   log(flatten([1, [2], [3, [4]], [5, [6, [7]]]]));\n  //   log(flattenDeep([1, [2], [3, [4]], [5, [6, [7]]]]));\n  // });\n\n  useEffect(() => {\n    const dateString = '2021/9/112';\n    const dateTimeString = '2021/9/12 23:00';\n\n    const falseValue = [0, -0, Infinity, NaN, '', false, null, undefined]; // 只有 Infinity 才是真值\n    falseValue.forEach((v, index) => {\n      console.log(v, index);\n\n      if (v) {\n        console.log('真值', v);\n      }\n    });\n\n    // console.log(\"dayjs\", dayjs(dateString, \"YYYY/MM/DD\").isValid(), new Date(dateString));\n    // console.log(\n    //   \"dayjs\",\n    //   dayjs(new Date([2012, 12, 12])),\n    //   formatDateString(\"2/12/12\"),\n    //   formatDateString(\"2121/2/32\"),\n    //   formatDateString(\"2121/2/28\")\n    // );\n\n    //   console.log(\n    //     isEqual(\n    //       {\n    //         one: {\n    //           name: \"bob\",\n    //           info: {\n    //             age: 3,\n    //           },\n    //         },\n    //       },\n    //       {\n    //         one: {\n    //           name: \"bob\",\n    //           info: {\n    //             age: 3,\n    //           },\n    //         },\n    //       }\n    //     )\n    //   );\n    // });\n\n    // queueMicrotask(() => {\n    //   console.log(\"11\");\n\n    //   sleep(200).then(() => {\n    //     console.log(\"first\");\n    //   });\n    // });\n\n    // queueMicrotask(() => {\n    //   console.log(\"22\");\n\n    //   sleep(100).then(() => {\n    //     console.log(\"second\");\n    //   });\n    // });\n  });\n\n  return <div></div>;\n};\n","import { FC, useEffect, useState } from 'react';\nimport { NavLink } from 'react-router-dom';\n\ninterface DirectoryProps {\n  setFileUrl: React.Dispatch<React.SetStateAction<string>>;\n}\n\ninterface Dir {\n  dir: string;\n  files: (string | Dir)[];\n}\nexport const Directory: FC<DirectoryProps> = ({ setFileUrl }) => {\n  const [dirFiles, setDirFiles] = useState<(string | Dir)[]>([]);\n\n  useEffect(() => {\n    setDirFiles([\n      'mongo.md',\n      'other.md',\n      'regexp.md',\n      'responsive.md',\n      'serverless.md',\n      'swaggeer.md',\n      { dir: 'test', files: ['test.md'] },\n      'todo.md',\n      'vercel.md',\n      '免密登录.md',\n    ]);\n\n    // fetch('/api/articles')\n    //   .then((res) => res.json())\n    //   .then((files) => {\n    //     setDirFiles(files);\n    //   });\n  }, []);\n\n  const renderTree = (files: any, deep = 1, root = '') => {\n    return (\n      <div\n        key={root}\n        className='flex flex-col'\n        style={{\n          paddingLeft: (deep - 1) * 20,\n        }}\n      >\n        {files.map((fileName: any) => {\n          if (typeof fileName === 'string') {\n            const realName = fileName.split('.md')[0];\n            const filePath = root + '/' + fileName;\n            return (\n              <NavLink\n                className='h-7 p-2 flex items-center rounded'\n                key={fileName}\n                to={`/note${filePath.replace('.md', '')}`}\n                activeClassName='bg-[#37352f14]'\n                onClick={() => setFileUrl(filePath)}\n              >\n                {realName}\n              </NavLink>\n            );\n          } else {\n            return (\n              <div key={fileName.dir} className='p-2'>\n                <span className='h-7 flex items-center rounded'>{fileName.dir}</span>\n                {renderTree(fileName.files, deep + 1, root + '/' + fileName.dir)}\n              </div>\n            );\n          }\n        })}\n      </div>\n    );\n  };\n\n  return (\n    <div className='w-[120px] min-w-[120px] border-r text-md p-2 text-sm'>\n      {renderTree(dirFiles)}\n    </div>\n  );\n};\n","import { FC, useEffect, useState } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport remarkGfm from 'remark-gfm';\nimport remarkToc from 'remark-toc';\nimport rehypeSlug from 'rehype-slug';\nimport rehypeRaw from 'rehype-raw';\nimport rehypeAutolinkHeadings from 'rehype-autolink-headings';\nimport rehypeHighlight from 'rehype-highlight';\nimport { loadJs } from '../utils/load-resource';\nimport { readTextFromBlob } from '../utils/read-text';\nimport { Directory } from './directory';\nimport 'highlight.js/styles/github.css';\nimport './github-markdown.css';\nimport './style.css';\n\n/**\n * task 的缩进怎么回事？\n * @returns\n */\n\nconst DocsPage: FC = () => {\n  const [text, setText] = useState('');\n  const arr = location.pathname.split('/note/');\n  const fileName = arr[arr.length - 1];\n  const [fileUrl, setFileUrl] = useState(fileName ? `/${fileName}.md` : '');\n\n  useEffect(() => {\n    if (fileUrl) {\n      fetchText('/docs' + fileUrl).then((text) => setText(text));\n    }\n  }, [fileUrl]);\n\n  const options = {\n    properties: {\n      class: 'anchor',\n      tabIndex: -1,\n    },\n    content: {\n      // hast: Hypertext Abstract Syntax Tree format\n      // https://github.com/rehypejs/rehype-autolink-headings#optionscontent\n      // https://github.com/syntax-tree/hast#element\n      // https://github.com/syntax-tree/hastscript#use\n      type: 'element',\n      tagName: 'span',\n      properties: {\n        className: ['octicon', 'octicon-link'],\n      },\n      children: [],\n    },\n  };\n  return (\n    <div className='flex h-screen'>\n      <Directory setFileUrl={setFileUrl} />\n\n      <div className='overflow-auto markdown-body flex-1 flex justify-center'>\n        <ReactMarkdown\n          className='max-w-[894px] px-5 h-max py-10'\n          remarkPlugins={[remarkGfm, [remarkToc, { heading: '目录' }]]}\n          rehypePlugins={[\n            rehypeRaw,\n            rehypeHighlight,\n            rehypeSlug,\n            [rehypeAutolinkHeadings, options],\n          ]}\n          components={{\n            pre({ children }) {\n              return (\n                <div className='overflow-auto'>\n                  <pre>{children}</pre>\n                </div>\n              );\n            },\n          }}\n        >\n          {text}\n        </ReactMarkdown>\n      </div>\n    </div>\n  );\n};\n\nexport default DocsPage;\n\nexport const fetchText = async (fileUrl: string) => {\n  await loadJs('/jschardet.js');\n  return fetch(fileUrl)\n    .then((response) => response.blob())\n    .then(async (blob) => {\n      const text = await readTextFromBlob(blob);\n      return text;\n    });\n};\n","export const readTextFromBlob = (blob: Blob) => {\n  return new Promise<string>((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(blob);\n    reader.onload = () => {\n      const base64Str = reader.result;\n      if (typeof base64Str !== 'string') {\n        reject();\n        return;\n      }\n\n      const str = atob(base64Str.split(';base64,')[1] ?? '');\n      const { encoding } = window.jschardet.detect(str);\n\n      const textReader = new FileReader();\n      textReader.readAsText(blob, encoding);\n      textReader.onload = () => {\n        if (typeof textReader.result === 'string') {\n          resolve(textReader.result);\n          return;\n        }\n\n        reject();\n      };\n    };\n  });\n};\n","import { FC, useEffect, useState } from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport Example from '../example';\nimport { getDateTimeStamp } from '../utils/dates';\nimport { TodayContext } from './context';\nimport Loadable from 'react-loadable';\nimport Docs from '../docs';\n\nconst SwaggerCom = Loadable({\n  loader: () => import('../example/swagger'),\n  loading: () => <div>loading</div>,\n});\n\n// const Docs = Loadable({\n//   loader: () => import('../docs/index'),\n//   loading: () => <div>loading</div>,\n// });\n\nexport const Main: FC = () => {\n  const [today, setToday] = useState(getDateTimeStamp(Date.now()));\n\n  useEffect(() => {\n    setInterval(() => {\n      if (today !== getDateTimeStamp(Date.now())) {\n        setToday(getDateTimeStamp(Date.now()));\n      }\n    }, 30 * 60 * 1000);\n  }, [today]);\n\n  return (\n    <TodayContext.Provider value={today}>\n      <Switch>\n        <Route path='/swagger' component={SwaggerCom}></Route>\n        <Route path='/note' component={Docs}></Route>\n        <Route path='/' component={Example}></Route>\n      </Switch>\n    </TodayContext.Provider>\n  );\n};\n\n// import { connectable, interval, Observable, of, take } from \"rxjs\";\n\n// // 参考：rxjs: https://juejin.cn/post/6910943445569765384#heading-22\n\n// /**\n//  * BehaviorSubject 和 Subject 的区别在于：是否在订阅的时候就发布发布者发布的最近一次的数据。BehaviorSubject 会发布。 BehaviorSubject 在实例化的时候需要传入参数作为初始值。\n//  */\n\n// /**\n//  * Subject\n//  * subscriber\n//  * Observable: rxjs 的核心概念，可观察对象\n//  * RxJS 是基于观察者模式和迭代器模式以函数式编程思维来实现的\n//  */\n\n// // const observable = new Observable((subscriber) => {\n// //   subscriber.next(1);\n// //   subscriber.next(2);\n// //   subscriber.next(3);\n// //   setTimeout(() => {\n// //     subscriber.next(4);\n// //     subscriber.complete();\n// //   }, 1000);\n// // });\n\n// // console.log(\"just before subscribe\");\n// // observable.subscribe({\n// //   next(x) {\n// //     console.log(\"got value \" + x);\n// //   },\n// //   error(err) {\n// //     console.error(\"something wrong occurred: \" + err);\n// //   },\n// //   complete() {\n// //     console.log(\"done\");\n// //   },\n// // });\n// // console.log(\"just after subscribe\");\n\n// /**\n//  * 创建类操作符\n//  */\n\n// // observable 只有两个 api 方法， pipe 和 forEach\n// // const source1 = interval(1000).pipe(take(3)); // pipe 用来管理操作\n// // const source2 = interval(1000).forEach(\n// //   (\n// //     item\n// //   ) => console.log(\"forEach: \", item)\n// // ); // 注册一个不可以取消的观察者\n\n// // source1.subscribe(console.log);\n\n// // source1.subscribe((value) => console.log(\"A \" + value));\n\n// // setTimeout(() => {\n// //   source1.subscribe((value) => console.log(\"B \" + value));\n// // }, 3000);\n\n// // const source = interval(1000).pipe(take(3));\n// // source.subscribe((value) => console.log(\"A：\" + value));\n// // setTimeout(() => {\n// //   source.subscribe((value) => console.log(\"B：\" + value));\n// // }, 3000);\n\n// // Observable 只能实现单播，但是 Subject 可以实现多播，也就是不管订阅者什么时候开始订阅，他拿到的数据始终是当前最新发布的数据，而不会从头开始响应。\n// // Subject 类似于中间人，统一实现对观察者的管理。既是 observable(对 observer 而言) 也是 observer(对observable而言)\n\n// // observable 的内核\n// export class Observable1 {\n//   _subscribe;\n//   constructor(subscribe) {\n//     this._subscribe = subscribe;\n//   }\n//   subscribe(observer) {\n//     this._subscribe(observer);\n//   }\n// }\n\n// // Observable 作为被观察者，observer 作为观察者，两者通过 subscribe 进行连接。此后只要 Observable 这个被观察者发生了变化就会通知 observer。observer 就可以做出响应。\n// // 观察者列表是维护在 Observable 这个被观察者内部的。\n// // 观察者订阅被观察者后可以取消订阅。  一般 subscribe 调用之后都会返回 unsubscribe，此时调用该方法即可。\n\n// // Observable 是基于观察者模式和迭代器模式采用函数式编程来实现的。迭代器模式：通过一种方法来访问一个聚合对象中的元素，又无需暴露对象的内部构造。\n// // 迭代器模式的核心 API：hasNext 和 next。判断是否还有下一个元素，如果有就取出来记性操作。\n\n// const obj = {};\n// obj[Symbol(\"symbol1\")] = \"111\";\n// obj[Symbol(\"symbol2\")] = \"222\";\n// console.log(\"----\", Object.getOwnPropertySymbols(obj), obj);\n","const scriptRel = 'modulepreload';const seen = {};const base = '/';export const __vitePreload = function preload(baseModule, deps) {\n    // @ts-ignore\n    if (!__VITE_IS_MODERN__ || !deps || deps.length === 0) {\n        return baseModule();\n    }\n    return Promise.all(deps.map((dep) => {\n        // @ts-ignore\n        dep = `${base}${dep}`;\n        // @ts-ignore\n        if (dep in seen)\n            return;\n        // @ts-ignore\n        seen[dep] = true;\n        const isCss = dep.endsWith('.css');\n        const cssSelector = isCss ? '[rel=\"stylesheet\"]' : '';\n        // @ts-ignore check if the file is already preloaded by SSR markup\n        if (document.querySelector(`link[href=\"${dep}\"]${cssSelector}`)) {\n            return;\n        }\n        // @ts-ignore\n        const link = document.createElement('link');\n        // @ts-ignore\n        link.rel = isCss ? 'stylesheet' : scriptRel;\n        if (!isCss) {\n            link.as = 'script';\n            link.crossOrigin = '';\n        }\n        link.href = dep;\n        // @ts-ignore\n        document.head.appendChild(link);\n        if (isCss) {\n            return new Promise((res, rej) => {\n                link.addEventListener('load', res);\n                link.addEventListener('error', () => rej(new Error(`Unable to preload CSS for ${dep}`)));\n            });\n        }\n    })).then(() => baseModule());\n}","import React, { useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\nimport './algorithm';\nimport { storage } from './algorithm/storage';\nimport { usePerformance } from './hooks/use-performance';\nimport { Main } from './main';\nimport './index.css';\n\ndeclare global {\n  interface Window {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    [key: string]: any;\n  }\n}\n\nexport const App = () => {\n  usePerformance();\n\n  useEffect(() => () => storage.destroy());\n  return (\n    <React.StrictMode>\n      <BrowserRouter>\n        <Switch>\n          <Route path='/' component={Main} />\n        </Switch>\n      </BrowserRouter>\n    </React.StrictMode>\n  );\n};\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// git 三大区: 工作区，暂存区，版本库\n// 之前这个文件是 App.tsx, 手动改为 app.tsx 后，git 没有检测到变化？\n// 解决方案：\n//   1. git config core.ignorecase false  让 git 可以区分大小写，但是这只会让该文件作为新文件被提交，之前的文件仍然存在。\n//   2. git rm -f filename 将文件从 git 中删除\n\n// 如果在 git 目录中新建文件，那么文件处于 untracked 状态。使用 git rm --cache filename 可以将处于 git版本库中的文件恢复至此状态\n// git rm filename: 直接删除文件，包括工作区。如果当前文件有修改，则使用 -f 可以强制删除，--cache 从git版本库中删除但是保留在工作区。\n","import { useEffect } from 'react';\n\nexport const usePerformance = () => {\n  useEffect(() => {\n    const callback: PerformanceObserverCallback = (list) => {\n      for (const entry of list.getEntries()) {\n        console.groupCollapsed(entry.name);\n        console.log('entryType', entry.entryType);\n        console.log('startTime', entry.startTime);\n        console.log('duration', entry.duration);\n        console.groupEnd();\n      }\n    };\n    const observer = new PerformanceObserver(callback);\n    observer.observe({\n      entryTypes: ['navigation', 'resource', 'mark', 'measure', 'paint'],\n    });\n  }, []);\n\n  /**\n   * 进入路由 http://localhost:3001/example/memory，点击隐藏 button，显示侧边栏，此时才会 console 出 first-contentful-paint。\n   * 也就是说 first-contentful-paint 的触发时机是页面上至少有可见元素(比如文字，图片)才行\n   */\n\n  return null;\n};\n"],"names":["window","fn","_window$fn","arrayMove","array","from","to","newArray","slice","splice","length","arraySwap","arr","temp","revert","i","Math","floor","removeRepeat","index","DEFAULT_LIVE_TIME","CHECK_INTERVAL_TIME","storage","constructor","remainKeys","_defineProperty","this","key","value","setItem","cache","add","error","isExceedSize","groupCollapsed","console","log","JSON","parse","groupEnd","removeSomeKeys","save","has","localStorage","getItem","data","Object","prototype","toString","call","Date","now","expires","remove","timer","setTimeout","checkCacheValidity","checkIntervalTime","Set","keys","_value","stringify","liveTime","Error","updateKeyPos","undefined","size","count","clearLength","delete","setLiveTime","time","setCheckIntervalTime","clearTimeout","resetTime","destroy","clear","removeItem","rafX","rafY","autoScrollX","x","container","threshold","rect","getBoundingClientRect","step","left","delta","speed","scrollLeft","requestAnimationFrame","right","cancelAnimationFrame","autoScrollY","y","offset","_offset$top","_offset$bottom","thresholdTop","top","thresholdBottom","bottom","scrollTop","calendarUtil","lunarInfo","solarMonth","Gan","Zhi","Animals","festival","title","lFestival","getFestival","getLunarFestival","setFestival","param","setLunarFestival","solarTerm","sTermInfo","nStr1","nStr2","nStr3","lYearDays","sum","leapDays","leapMonth","monthDays","m","solarDays","ms","toGanZhiYear","lYear","ganKey","zhiKey","toAstro","cMonth","cDay","s","substr","toGanZhi","getTerm","n","_table","_calcDay","chunk","parseInt","push","toChinaMonth","toChinaDay","d","getAnimal","solar2lunar","yPara","mPara","dPara","objDate","leap","getFullYear","getMonth","getDate","UTC","isTodayObj","isToday","nWeek","getDay","cWeek","year","isLeap","month","day","sm","gzY","firstNode","secondNode","gzM","isTerm","Term","dayCyclical","gzD","astro","solarDate","lunarDate","festivalDate","lunarFestivalDate","date","lunarFestival","lMonth","lDay","Animal","IMonthCn","IDayCn","cYear","gzYear","gzMonth","gzDay","ncWeek","lunar2solar","isLeapMonth","_day","isAdd","strap","calObj","cY","getUTCFullYear","cM","getUTCMonth","cD","getUTCDate","cx","rest","overrideTailwindClasses","classnames","MONTHS","split","OneDayMillisecond","DateDir","DateDir2","ShowType","ShowType2","getDateRange","base","dir","includeBase","showType","dates","isNext","baseDate","getDateTimeStamp","dateStep","newLength","unshift","getTimelineDateRange","toDateString","getTime","formatDate","monthDesc","getIntersectionRatio","entry","target","max","min","width","height","targetArea","Number","toFixed","numberToPercent","String","concat","TodayContext","createContext","DATE_FORMAT","NewCardPlaceholderId","IS_IPHONE","navigator","test","userAgent","DateElementWidth","RecordLineHeight","RecordDataContext","useRecordData","context","useContext","TimelineContext","useTimeline","TimeLine","_container$current","timelineDates","setTimelineDates","scrollContainer","datesContainer","timelineHeader","monthContainer","containerScrollLeft","listRef","dateStepLength","records","range","setRange","useState","innerHeight","useLayoutEffect","current","clientWidth","useEffect","scrollWidth","ceil","containerNode","handleScroll","lastDay","last","appendDates","NEXT","newDates","firstDay","PREV","scrollFn","debounce","throttle","addEventListener","removeEventListener","datesContainerNode","timelineHeaderNode","monthContainerNode","scrollContainerNode","containerRect","scrollContainerRect","translateY","abs","style","transform","round","listNode","listRect","visibleLength","clientHeight","hiddenLength","startIndex","className","ref","children","_jsx","exports","jsx","Header","_jsxs","jsxs","TimelineMonths","TimelineDates","TimelineWeekend","map","record","RecordLine","recordIndex","id","memo","forwardRef","_","setShowType","currentMonth","setCurrentMonth","dateLength","currentMonth2","newMonth","setDate","backgroundImage","onClick","YEAR","MONTH","MdKeyboardArrowLeft","MdKeyboardArrowRight","isEqual","shouldRender","monthFirstDate","today","innerWidth","renderToday","rangeStart","rangeEnd","notRenderDates","weekday","nextSunday","prevSunday","includes","firstDate","backgroundLeft","background","backgroundPositionX","props","recordEndTime","recordStartTime","setRecords","draggingRecordId","cardRef","useRef","movingStartDateIndex","setMovingStartDateIndex","handleMouseMove","useCallback","event","leftDistance","clientX","removeWeekdateHightlight","handleMouseLeave","handleMouseClick","startTime","endTime","initDateRangeLength","v4","hasValidDateRange","useMemo","onMouseMove","onMouseLeave","PlaceholderCard","recordId","_Fragment","IndicatorArrow","card","RecordCard","DirectionMap","Direction","_container$current2","indicatorArrow","setIndicatorArrow","recordData","find","cardRect","direction","isRightDirection","isShow","edgeOffset","isLeftDirection","handleClick","opacity","BsArrowLeftShort","dayjs","format","BsArrowRightShort","timelineDatesRef","draggingNewDate","setDraggingNewDate","draggingDirection","setDraggingDirection","mouseDownPos","cardStyle","getComputedStyle","getPropertyValue","dateIndex","addWeekdateHightlight","handleTranslate","oneDateWidth","dayLength","findIndex","onMouseDown","preventDefault","clientY","cardNode","timelinePage","cardWidth","currentTarget","deltaCardX","dragStartDate","overlayContainer","lastCursorPos","isMoving","createOverlay","newDate","timelineRecordNodes","querySelectorAll","addIndicator","handleMouseUp","lastElementChild","classList","contains","oldIndex","newIndex","dataset","newRecords","boxShadow","stopPropagation","dragEndDate","lastCursorX","updateDraggingNewDate","handleMouseDown","allDatesNode","classNames","node","forEach","cloneNode","inset","document","createElement","position","zIndex","appendChild","body","overlay","allNodes","currentId","maxIntersectionRatio","overlayRect","_node$lastElementChil","intersectionRatio","indicator","backgroundColor","CalenderContext","TodoContext","useCalender","useTodoList","getCardHeight","CARD_PADDING","Calender","setTodoList","calenderDates","setCalenderDates","loading","showTypeRef","scrollHeight","calenderDates2","getCalenderDates","Week","calenderHeader","handleJump","currentMonthObj","setMonth","getOneMonthDates","dateObj","week","weekRef","_weekRef$current","weekRect","headerRect","oldMonth","DateNode","WeekCards","renderTodo","todoList","rawStartTime","rawEndTime","renderStartDate","renderEndDate","startDate","endDate","weekStartDate","weekEndDate","isStartDate","isEndDate","order","sortedTodo","sortBy","item","dateSet","orderList","entries","nextWeekDay","_dateSet$nextWeekDay","useSelectTodo","weekNodes","minHight","values","todo","Card","weekFirstDay","__self","__source","fileName","lineNumber","columnNumber","_todoListRef$current$","calenderDatesRef","todoListRef","handleStretch","targetIndex","updateTodo","minDistanceToCenter","Infinity","distBetween","p1","centerOfRectangle","p2","sqrt","pow","currentTodo","sourceTodoNode","sourceTodoNodeRect","dateNodeWidth","parseFloat","_overlayContainer2","nodeRect","clonedNode","updatePosition","currentHoverDate","querySelector","calenderTodoNodes","Array","isTarget","_overlayContainer3","newDropDate","newStartDate","newEndTime","todo2","result","_todoList$title","type","firstSunday","lastSaturday","currentDate","highlightCurrentDate","newMonthFirstDate","newMonthLastDate","firstDateIndex","indexOf","monthLength","translate","point","disX","disY","getDeviceRadio","devicePixelRatio","mementos","stroke","fill","viewBox","xmlns","fillRule","clipRule","permission","checkPermission","async","Notification","requestPermission","NumberList","CustomScroll","scrollTrack","hScrollTrack","scrollThumb","hScrollThumb","raf","hRaf","_container$current3","scrollThumbNode","hScrollThumbNode","scrollTrackNode","hScrollTrackNode","firstElementChild","hasVerticalScroll","hasHorizontalScroll","borderLeftWidth","borderTopWidth","thumbHeight","realThumbHeight","hiddenHeight","thumbTop","display","thumbWidth","realThumbWidth","hiddenWidth","thumbLeft","resizeObserver","ResizeObserver","observe","unobserve","handleDrag","_container$current4","blankTrackHeight","offsetWidth","newY","clamp","blankTrackWidth","newX","DefaultCellWidth","SelectedCellContext","useSelectedCell","TableDataContext","useTableData","Table","tableData","tableCol","tableRow","tableContent","setTableData","tableRef","col","row","Row","rowData","currentNewCol","currentNewRow","move","offsetX","offsetY","allNewRow","allNewCol","addOrDeleteRow","addOrDeleteCol","newTableContent","newTableRow","newTableCol","newRowId","newRowContent","colId","rowId","content","colSpan","rowSpan","isMerged","pop","newColId","newRowData","BsArrowDownRight","ColResize","RowResize","cell","Cell","menuPos","setMenuPos","tdRef","selectedCell","setSelectedCell","isSelected","findAllCell","selectedCellNode","allTableCellNode","allTableCellNodeRect","cellNode","sumCellArea","get","newSelectArea","tempNewSelectedCell","button","tempSelectedCell","selectArea","newSelectedCell","Map","set","cellId","_node$dataset$cellId","filter","onContextMenu","createPortal","TableRightMenu","closeModal","resizeRef","newWidth","_tableRef$current","colgroup","colNode","newHeight","tr","menuItems","firstCellId","rightColIndex","lastRowIndex","topRowIndex","leftColIndex","rowIndex","colIndex","isInsertTop","isInsertLeft","initTable","generateData","len","faker","lorem","sentences","ESTIMATE_ROW_HEIGHT","idList","dataList","dataMap","generateMapData","DynamicVisualList","list","scrollContainerRef","visualContentRef","actualContentRef","cachedPositions","diffHeight","visualContent","actualContent","getStartIndex","visualContentRect","minVisibleLength","currentStartIndex","positionList","start","end","tempIndex","midValue","newStartIndex","range2","childrenNodes","childNodes","originHeight","realHeight","offsetHeight","cumulativeDiffHeight","cachedPositionsLen","renderContent","endIndex","DynamicVisualList2","uuid","listLength","lastId","positions","tempId","startId","ROW_HEIGHT","FixedHeightVisualList","containerRef","contentRef","lastScrollTop","rangeStartRef","hiddenStartIndex","initData","Child","Lifecycle","TextLayerBuilder","textLayerDiv","eventBus","pageIndex","viewport","highlighter","enhanceTextSelection","textContent","textContentItemsStr","textContentStream","renderingDone","pageNumber","textDivs","textLayerRenderTask","_bindMouse","_finishRendering","endOfContent","render","timeout","_this$highlighter","cancel","setTextMapping","textLayerFrag","createDocumentFragment","pdfjsLib","renderTextLayer","promise","then","_this$highlighter2","enable","_this$highlighter3","disable","setTextContentStream","readableStream","setTextContent","div","expandDivsTimer","evt","expandTextDivs","PDFJSDev","adjustTop","divBounds","r","pageY","Page","pageNum","drawPage","pageRef","observer","IntersectionObserver","isIntersecting","disconnect","root","rootMargin","DEFAULT_PAGE_WIDTH","DEFAULT_PAGE_HEIGHT","resourceMap","loadJs","url","tagName","Promise","resolve","reject","tag","src","href","rel","onload","onerror","head","loadResource","TagName","PDFLoader","file","getDocument","cMapUrl","cMapPacked","pdf","disposed","dispose","buttons","text","StorageTestType","Example","show","setShow","Routes","route","Link","path","Switch","Route","component","testType","setType","setTestType","clearInterval","testDataType","setInterval","testBigData","testExceedSize","testExpires","fileUrl","_pdfDocumentRef$curre","pdfDocumentRef","isOnPageNumber","pageNumberRef","pdfContainerRef","inputRef","pageNumTimer","setLoading","isShowPageNum","setIsShowPageNum","currentPage","setCurrentPage","loader","load","clearPageNumTimer","pageContainer","innerHTML","getPage","page","getViewport","scale","canvas","getContext","scrollContainerWidth","radio","CONTAINER_MIN_PADDING","cssWidth","cssHeight","canvasContext","getTextContent","setAttribute","textLayer","jumpPage","targetPage","scrollTo","offsetTop","controlPageNumVisible","_pageNumberRef$curren","setHidePageNumTimer","activeElement","onScroll","_inputRef$current","blur","element","elementFromPoint","closest","pages","numPages","renderPages","AiOutlineUp","onKeyDown","isHotkey","isNaN","alert","onEnter","onChange","e","AiOutlineDown","f","closure","Provider","selectedCellContextValue","tableDataContextValue","canvasRef","canvasStyle","ctx","font","lineWidth","strokeRect","fillRect","beginPath","moveTo","lineTo","closePath","newStartPoint","clearRect","fillText","desc","sendNotification","FaBeer","AllIcons","dd","Com","nodePosCache","lastCursorPoint","highlight","firstElementChildRect","allSubNodes","pos","selectorRect","allSelectedIds","moveEvent","scrollDis","realMouseDownY","setValue","lastMemento","calenderContextData","todoContextData","fixedHeight","setIsFixedHeight","dataType","setDataType","lineRef","setWidth","bind","useDrag","NaN","v","Directory","setFileUrl","dirFiles","setDirFiles","files","renderTree","deep","paddingLeft","realName","filePath","NavLink","replace","activeClassName","DocsPage","setText","location","pathname","fetchText","ReactMarkdown","remarkPlugins","remarkGfm","remarkToc","heading","rehypePlugins","rehypeRaw","rehypeHighlight","rehypeSlug","rehypeAutolinkHeadings","properties","class","tabIndex","components","pre","fetch","response","blob","reader","FileReader","readAsDataURL","_base64Str$split$","base64Str","str","atob","encoding","jschardet","detect","textReader","readAsText","readTextFromBlob","SwaggerCom","Loadable","baseModule","Main","setToday","Docs","App","PerformanceObserver","getEntries","name","entryType","duration","entryTypes","React","StrictMode","BrowserRouter","ReactDOM","getElementById"],"mappings":"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AAC,KAAgB,KAAgB,KAAgB,KAAgB,KAAgB,KAAgB,KAAgB,KAAgB,KAAgB,KAAgB,KAAgB,KAAgB,KAAgB,KAAgB,KAAgB,KAAgB,KAAgB,KAAgB,KAAgB,KAAgB,KAAgB,KAAgB,KAAgB,MAO5XC,UAAW,CAAC,iCAAkC,iCAAkC,iCAC5E,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAkC,iCACpE,iCAAkC,iCAAk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"}